{"version":3,"file":"no-anonymous-exports-page-templates.js","names":["defs","ArrowFunctionExpression","messageId","FunctionDeclaration","forbid","node","declaration","id","ClassDeclaration","noAnonymousExports","meta","type","messages","anonymousArrowFunction","anonymousFunctionDeclaration","anonymousClass","create","context","isPageTemplate","store","ExportDefaultDeclaration","def","report","module","exports"],"sources":["../../../src/utils/eslint-rules/no-anonymous-exports-page-templates.ts"],"sourcesContent":["import { Rule } from \"eslint\"\nimport { Node, ExportDefaultDeclaration } from \"estree\"\nimport { store } from \"../../redux\"\nimport { isPageTemplate } from \"../eslint-rules-helpers\"\n\nconst defs = {\n  ArrowFunctionExpression: {\n    messageId: `anonymousArrowFunction`,\n  },\n  FunctionDeclaration: {\n    messageId: `anonymousFunctionDeclaration`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n  ClassDeclaration: {\n    messageId: `anonymousClass`,\n    forbid: (node): boolean => !node.declaration.id,\n  },\n}\n\nconst noAnonymousExports: Rule.RuleModule = {\n  meta: {\n    type: `problem`,\n    messages: {\n      anonymousArrowFunction: `Anonymous arrow functions cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default () => {}\n\n       After:\n       const Named = () => {}\n       export default Named;\n`,\n      anonymousFunctionDeclaration: `Anonymous function declarations cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your function, for example:\n\n       Before:\n       export default function () {}\n\n       After:\n       export default function Named() {}\n`,\n      anonymousClass: `Anonymous classes cause Fast Refresh to not preserve local component state.\n\n       Please add a name to your class, for example:\n\n       Before:\n       export default class extends Component {}\n\n       After:\n       export default class Named extends Component {}\n`,\n    },\n  },\n  create: context => {\n    if (!isPageTemplate(store, context)) {\n      return {}\n    }\n\n    return {\n      ExportDefaultDeclaration: (node: Node): void => {\n        // @ts-ignore\n        const type = node.declaration.type as ExportDefaultDeclaration[\"type\"]\n        const def = defs[type]\n\n        if (def && (!def.forbid || def.forbid(node))) {\n          context.report({\n            node,\n            messageId: def.messageId,\n          })\n        }\n      },\n    }\n  },\n}\n\nmodule.exports = noAnonymousExports\n"],"mappings":";;AAEA;AACA;AAEA,MAAMA,IAAI,GAAG;EACXC,uBAAuB,EAAE;IACvBC,SAAS,EAAG;EACd,CAAC;EACDC,mBAAmB,EAAE;IACnBD,SAAS,EAAG,8BAA6B;IACzCE,MAAM,EAAGC,IAAI,IAAc,CAACA,IAAI,CAACC,WAAW,CAACC;EAC/C,CAAC;EACDC,gBAAgB,EAAE;IAChBN,SAAS,EAAG,gBAAe;IAC3BE,MAAM,EAAGC,IAAI,IAAc,CAACA,IAAI,CAACC,WAAW,CAACC;EAC/C;AACF,CAAC;AAED,MAAME,kBAAmC,GAAG;EAC1CC,IAAI,EAAE;IACJC,IAAI,EAAG,SAAQ;IACfC,QAAQ,EAAE;MACRC,sBAAsB,EAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;MACKC,4BAA4B,EAAG;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;MACKC,cAAc,EAAG;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI;EACF,CAAC;EACDC,MAAM,EAAEC,OAAO,IAAI;IACjB,IAAI,CAAC,IAAAC,kCAAc,EAACC,YAAK,EAAEF,OAAO,CAAC,EAAE;MACnC,OAAO,CAAC,CAAC;IACX;IAEA,OAAO;MACLG,wBAAwB,EAAGf,IAAU,IAAW;QAC9C;QACA,MAAMM,IAAI,GAAGN,IAAI,CAACC,WAAW,CAACK,IAAwC;QACtE,MAAMU,GAAG,GAAGrB,IAAI,CAACW,IAAI,CAAC;QAEtB,IAAIU,GAAG,KAAK,CAACA,GAAG,CAACjB,MAAM,IAAIiB,GAAG,CAACjB,MAAM,CAACC,IAAI,CAAC,CAAC,EAAE;UAC5CY,OAAO,CAACK,MAAM,CAAC;YACbjB,IAAI;YACJH,SAAS,EAAEmB,GAAG,CAACnB;UACjB,CAAC,CAAC;QACJ;MACF;IACF,CAAC;EACH;AACF,CAAC;AAEDqB,MAAM,CAACC,OAAO,GAAGf,kBAAkB"}