{"version":3,"file":"visited-page.js","names":["createDefault","defaults","Set","add","state","Map","visitedPagesReducer","action","type","server","get","payload","componentChunkName"],"sources":["../../../src/redux/reducers/visited-page.ts"],"sourcesContent":["import {\n  IGatsbyState,\n  IDeleteCacheAction,\n  ICreateServerVisitedPage,\n} from \"../types\"\n\ntype StateMap = Map<\"server\", Set<string>>\n\n// The develop server always wants these page components.\nconst createDefault = (): StateMap => {\n  const defaults = new Set<string>()\n  defaults.add(`component---cache-dev-404-page-js`)\n  defaults.add(`component---src-pages-404-js`)\n  defaults.add(`component---src-pages-index-js`)\n\n  const state: StateMap = new Map([[`server`, new Set(defaults)]])\n\n  return state\n}\n\nexport const visitedPagesReducer = (\n  state: IGatsbyState[\"visitedPages\"] = createDefault(),\n  action: IDeleteCacheAction | ICreateServerVisitedPage\n): IGatsbyState[\"visitedPages\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return createDefault()\n\n    case `CREATE_SERVER_VISITED_PAGE`: {\n      const server = state.get(`server`)\n      if (server) {\n        server.add(action.payload.componentChunkName)\n      }\n\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;AAQA;AACA,MAAMA,aAAa,GAAG,MAAgB;EACpC,MAAMC,QAAQ,GAAG,IAAIC,GAAG,EAAU;EAClCD,QAAQ,CAACE,GAAG,CAAE,mCAAkC,CAAC;EACjDF,QAAQ,CAACE,GAAG,CAAE,8BAA6B,CAAC;EAC5CF,QAAQ,CAACE,GAAG,CAAE,gCAA+B,CAAC;EAE9C,MAAMC,KAAe,GAAG,IAAIC,GAAG,CAAC,CAAC,CAAE,QAAO,EAAE,IAAIH,GAAG,CAACD,QAAQ,CAAC,CAAC,CAAC,CAAC;EAEhE,OAAOG,KAAK;AACd,CAAC;AAEM,MAAME,mBAAmB,GAAG,CACjCF,KAAmC,GAAGJ,aAAa,EAAE,EACrDO,MAAqD,KACpB;EACjC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,cAAa;MACjB,OAAOR,aAAa,EAAE;IAExB,KAAM,4BAA2B;MAAE;QACjC,MAAMS,MAAM,GAAGL,KAAK,CAACM,GAAG,CAAE,QAAO,CAAC;QAClC,IAAID,MAAM,EAAE;UACVA,MAAM,CAACN,GAAG,CAACI,MAAM,CAACI,OAAO,CAACC,kBAAkB,CAAC;QAC/C;QAEA,OAAOR,KAAK;MACd;IAEA;MACE,OAAOA,KAAK;EAAA;AAElB,CAAC;AAAA"}