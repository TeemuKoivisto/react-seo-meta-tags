{"version":3,"file":"app.js","names":["module","hot","accept","loader","updateAsyncRequires","asyncRequires","window","___emitter","emitter","DevLoader","matchPaths","setLoader","setApiRunner","apiRunner","___loader","publicLoader","reactDomClient","require","reactFirstRenderOrHydrate","Component","el","useHydrate","children","length","root","hydrateRoot","unmount","createRoot","render","notCalledFunction","apiRunnerAsync","then","socket","socketIo","on","location","reload","navigator","serviceWorker","getRegistrations","registrations","console","warn","rootElement","document","getElementById","renderer","undefined","dismissLoadingIndicator","process","env","GATSBY_QUERY_ON_DEMAND","GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR","indicatorMountElement","cleanupFn","showIndicatorTimeout","setTimeout","createElement","body","append","clearTimeout","ReactDOM","unmountComponentAtNode","remove","Promise","all","loadPage","pathname","search","navigationInit","onHydrated","setAttribute","App","onClientEntryRanRef","React","useRef","useEffect","current","runRender","doc","readyState","documentElement","doScroll","handler","removeEventListener","addEventListener"],"sources":["../app.js"],"sourcesContent":["// needed for fast refresh\nimport \"@gatsbyjs/webpack-hot-middleware/client\"\n\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport socketIo from \"./socketIo\"\nimport emitter from \"./emitter\"\nimport { apiRunner, apiRunnerAsync } from \"./api-runner-browser\"\nimport { setLoader, publicLoader } from \"./loader\"\nimport { Indicator } from \"./loading-indicator/indicator\"\nimport DevLoader from \"./dev-loader\"\nimport asyncRequires from \"$virtual/async-requires\"\n// Generated during bootstrap\nimport matchPaths from \"$virtual/match-paths.json\"\nimport { LoadingIndicatorEventHandler } from \"./loading-indicator\"\nimport Root from \"./root\"\nimport { init as navigationInit } from \"./navigation\"\n// ensure in develop we have at least some .css (even if it's empty).\n// this is so there is no warning about not matching content-type when site doesn't include any regular css (for example when css-in-js is used)\n// this also make sure that if all css is removed in develop we are not left with stale commons.css that have stale content\nimport \"./blank.css\"\n\n// Enable fast-refresh for virtual sync-requires, gatsby-browser & navigation\n// To ensure that our <Root /> component can hot reload in case anything below doesn't\n// satisfy fast-refresh constraints\nmodule.hot.accept(\n  [`$virtual/async-requires`, `./api-runner-browser`, `./navigation`],\n  () => {\n    // asyncRequires should be automatically updated here (due to ESM import and webpack HMR spec),\n    // but loader doesn't know that and needs to be manually nudged\n    loader.updateAsyncRequires(asyncRequires)\n  }\n)\n\nwindow.___emitter = emitter\n\nconst loader = new DevLoader(asyncRequires, matchPaths)\nsetLoader(loader)\nloader.setApiRunner(apiRunner)\n\nwindow.___loader = publicLoader\n\nconst reactDomClient = require(`react-dom/client`)\nconst reactFirstRenderOrHydrate = (Component, el) => {\n  // we will use hydrate if mount element has any content inside\n  const useHydrate = el && el.children.length\n\n  if (useHydrate) {\n    const root = reactDomClient.hydrateRoot(el, Component)\n    return () => root.unmount()\n  } else {\n    const root = reactDomClient.createRoot(el)\n    root.render(Component)\n    return () => root.unmount()\n  }\n}\n\n// Do dummy dynamic import so the jsonp __webpack_require__.e is added to the commons.js\n// bundle. This ensures hot reloading doesn't break when someone first adds\n// a dynamic import.\n//\n// Without this, the runtime breaks with a\n// \"TypeError: __webpack_require__.e is not a function\"\n// error.\nexport function notCalledFunction() {\n  return import(`./dummy`)\n}\n\n// Let the site/plugins run code very early.\napiRunnerAsync(`onClientEntry`).then(() => {\n  // Hook up the client to socket.io on server\n  const socket = socketIo()\n  if (socket) {\n    socket.on(`reload`, () => {\n      window.location.reload()\n    })\n  }\n\n  /**\n   * Service Workers are persistent by nature. They stick around,\n   * serving a cached version of the site if they aren't removed.\n   * This is especially frustrating when you need to test the\n   * production build on your local machine.\n   *\n   * Let's warn if we find service workers in development.\n   */\n  if (`serviceWorker` in navigator) {\n    navigator.serviceWorker.getRegistrations().then(registrations => {\n      if (registrations.length > 0)\n        console.warn(\n          `Warning: found one or more service workers present.`,\n          `If your site isn't behaving as expected, you might want to remove these.`,\n          registrations\n        )\n    })\n  }\n\n  const rootElement = document.getElementById(`___gatsby`)\n  const renderer = apiRunner(\n    `replaceHydrateFunction`,\n    undefined,\n    reactFirstRenderOrHydrate\n  )[0]\n\n  let dismissLoadingIndicator\n  if (\n    process.env.GATSBY_QUERY_ON_DEMAND &&\n    process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR === `true`\n  ) {\n    let indicatorMountElement\n    let cleanupFn\n\n    const showIndicatorTimeout = setTimeout(() => {\n      indicatorMountElement = document.createElement(\n        `first-render-loading-indicator`\n      )\n      document.body.append(indicatorMountElement)\n      cleanupFn = renderer(<Indicator />, indicatorMountElement)\n    }, 1000)\n\n    dismissLoadingIndicator = () => {\n      clearTimeout(showIndicatorTimeout)\n      if (indicatorMountElement) {\n        // If user defined replaceHydrateFunction themselves the cleanupFn return might not be there\n        // So fallback to unmountComponentAtNode for now\n        if (cleanupFn && typeof cleanupFn === `function`) {\n          cleanupFn()\n        } else {\n          ReactDOM.unmountComponentAtNode(indicatorMountElement)\n        }\n        indicatorMountElement.remove()\n      }\n    }\n  }\n\n  Promise.all([\n    loader.loadPage(`/dev-404-page/`),\n    loader.loadPage(`/404.html`),\n    loader.loadPage(window.location.pathname + window.location.search),\n  ]).then(() => {\n    navigationInit()\n\n    function onHydrated() {\n      apiRunner(`onInitialClientRender`)\n\n      // Render query on demand overlay\n      if (\n        process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR &&\n        process.env.GATSBY_QUERY_ON_DEMAND_LOADING_INDICATOR === `true`\n      ) {\n        const indicatorMountElement = document.createElement(`div`)\n        indicatorMountElement.setAttribute(\n          `id`,\n          `query-on-demand-indicator-element`\n        )\n        document.body.append(indicatorMountElement)\n\n        renderer(<LoadingIndicatorEventHandler />, indicatorMountElement)\n      }\n    }\n\n    function App() {\n      const onClientEntryRanRef = React.useRef(false)\n\n      React.useEffect(() => {\n        if (!onClientEntryRanRef.current) {\n          onClientEntryRanRef.current = true\n\n          onHydrated()\n        }\n      }, [])\n\n      return <Root />\n    }\n\n    function runRender() {\n      if (dismissLoadingIndicator) {\n        dismissLoadingIndicator()\n      }\n\n      renderer(<App />, rootElement)\n    }\n\n    // https://github.com/madrobby/zepto/blob/b5ed8d607f67724788ec9ff492be297f64d47dfc/src/zepto.js#L439-L450\n    // TODO remove IE 10 support\n    const doc = document\n    if (\n      doc.readyState === `complete` ||\n      (doc.readyState !== `loading` && !doc.documentElement.doScroll)\n    ) {\n      setTimeout(function () {\n        runRender()\n      }, 0)\n    } else {\n      const handler = function () {\n        doc.removeEventListener(`DOMContentLoaded`, handler, false)\n        window.removeEventListener(`load`, handler, false)\n\n        runRender()\n      }\n\n      doc.addEventListener(`DOMContentLoaded`, handler, false)\n      window.addEventListener(`load`, handler, false)\n    }\n  })\n})\n"],"mappings":"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"}