{"version":3,"file":"status.js","names":["defaultState","PLUGINS_HASH","LAST_NODE_COUNTER","plugins","statusReducer","state","action","type","payload","plugin","name","Error","JSON","stringify","internal","counter"],"sources":["../../../src/redux/reducers/status.ts"],"sourcesContent":["import _ from \"lodash\"\nimport { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst defaultState: IGatsbyState[\"status\"] = {\n  PLUGINS_HASH: ``,\n  LAST_NODE_COUNTER: 0,\n  plugins: {},\n}\n\nexport const statusReducer = (\n  state: IGatsbyState[\"status\"] = defaultState,\n  action: ActionsUnion\n): IGatsbyState[\"status\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return defaultState\n    case `UPDATE_PLUGINS_HASH`:\n      return {\n        ...state,\n        PLUGINS_HASH: action.payload,\n      }\n    case `SET_PLUGIN_STATUS`:\n      if (!action.plugin || !action.plugin?.name) {\n        throw new Error(`You can't set plugin status without a plugin`)\n      }\n      if (!_.isObject(action.payload)) {\n        throw new Error(\n          `You must pass an object into setPluginStatus. What was passed in was ${JSON.stringify(\n            action.payload,\n            null,\n            4\n          )}`\n        )\n      }\n      return {\n        ...state,\n        plugins: {\n          ...state.plugins,\n          [action.plugin.name]: _.merge(\n            {},\n            state.plugins[action.plugin.name],\n            action.payload\n          ),\n        },\n      }\n    case `CREATE_NODE`:\n      state.LAST_NODE_COUNTER = action.payload.internal.counter\n      return state\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;;;;AAGA,MAAMA,YAAoC,GAAG;EAC3CC,YAAY,EAAG,EAAC;EAChBC,iBAAiB,EAAE,CAAC;EACpBC,OAAO,EAAE,CAAC;AACZ,CAAC;AAEM,MAAMC,aAAa,GAAG,CAC3BC,KAA6B,GAAGL,YAAY,EAC5CM,MAAoB,KACO;EAAA;EAC3B,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,cAAa;MACjB,OAAOP,YAAY;IACrB,KAAM,qBAAoB;MACxB,OAAO;QACL,GAAGK,KAAK;QACRJ,YAAY,EAAEK,MAAM,CAACE;MACvB,CAAC;IACH,KAAM,mBAAkB;MACtB,IAAI,CAACF,MAAM,CAACG,MAAM,IAAI,oBAACH,MAAM,CAACG,MAAM,2CAAb,eAAeC,IAAI,GAAE;QAC1C,MAAM,IAAIC,KAAK,CAAE,8CAA6C,CAAC;MACjE;MACA,IAAI,CAAC,wBAAWL,MAAM,CAACE,OAAO,CAAC,EAAE;QAC/B,MAAM,IAAIG,KAAK,CACZ,wEAAuEC,IAAI,CAACC,SAAS,CACpFP,MAAM,CAACE,OAAO,EACd,IAAI,EACJ,CAAC,CACD,EAAC,CACJ;MACH;MACA,OAAO;QACL,GAAGH,KAAK;QACRF,OAAO,EAAE;UACP,GAAGE,KAAK,CAACF,OAAO;UAChB,CAACG,MAAM,CAACG,MAAM,CAACC,IAAI,GAAG,qBACpB,CAAC,CAAC,EACFL,KAAK,CAACF,OAAO,CAACG,MAAM,CAACG,MAAM,CAACC,IAAI,CAAC,EACjCJ,MAAM,CAACE,OAAO;QAElB;MACF,CAAC;IACH,KAAM,aAAY;MAChBH,KAAK,CAACH,iBAAiB,GAAGI,MAAM,CAACE,OAAO,CAACM,QAAQ,CAACC,OAAO;MACzD,OAAOV,KAAK;IACd;MACE,OAAOA,KAAK;EAAA;AAElB,CAAC;AAAA"}