{"version":3,"file":"graphql-errors.js","names":["WrappedAccordionItem","error","open","title","message","context","sourceMessage","docsUrl","filePath","lineNumber","location","start","line","columnNumber","column","locString","decoded","prettifyStack","text","level","code","openInEditor","GraphqlErrors","errors","dismiss","deduplicatedErrors","React","useMemo","Array","from","Set","hasMultipleErrors","length","map","index"],"sources":["../../../fast-refresh-overlay/components/graphql-errors.js"],"sourcesContent":["import * as React from \"react\"\nimport { Body, Header, HeaderOpenClose, Overlay } from \"./overlay\"\nimport { Accordion, AccordionItem } from \"./accordion\"\nimport { openInEditor, prettifyStack } from \"../utils\"\nimport { CodeFrame } from \"./code-frame\"\n\nfunction WrappedAccordionItem({ error, open }) {\n  const title =\n    error?.error?.message ||\n    error.context.sourceMessage ||\n    `Unknown GraphQL error`\n  const docsUrl = error?.docsUrl\n  const filePath = error?.filePath\n  const lineNumber = error?.location?.start?.line\n  const columnNumber = error?.location?.start?.column\n\n  let locString = ``\n  if (typeof lineNumber !== `undefined`) {\n    locString += `:${lineNumber}`\n    if (typeof columnNumber !== `undefined`) {\n      locString += `:${columnNumber}`\n    }\n  }\n\n  // Sometimes the GraphQL error text has ANSI in it. If it's only text, it'll be passed through\n  const decoded = prettifyStack(error.text)\n\n  return (\n    <AccordionItem open={open} title={title}>\n      <div data-gatsby-overlay=\"body__graphql-error-message\">\n        <div data-gatsby-overlay=\"codeframe__top\">\n          <div data-gatsby-overlay=\"tag\">\n            {error.level}\n            {` `}#{error.code}\n          </div>\n          <button\n            data-gatsby-overlay=\"body__open-in-editor\"\n            onClick={() => openInEditor(filePath, lineNumber)}\n          >\n            Open in Editor\n          </button>\n        </div>\n        {filePath && (\n          <div data-gatsby-overlay=\"codeframe__top\">\n            {filePath}\n            {locString}\n          </div>\n        )}\n        <CodeFrame decoded={decoded} />\n        {docsUrl && (\n          <div data-gatsby-overlay=\"codeframe__bottom\">\n            See our docs page for more info on this error:{` `}\n            <a href={docsUrl}>{docsUrl}</a>\n          </div>\n        )}\n      </div>\n    </AccordionItem>\n  )\n}\n\nexport function GraphqlErrors({ errors, dismiss }) {\n  const deduplicatedErrors = React.useMemo(\n    () => Array.from(new Set(errors)),\n    [errors]\n  )\n  const hasMultipleErrors = deduplicatedErrors.length > 1\n  return (\n    <Overlay>\n      <Header data-gatsby-error-type=\"graphql-error\">\n        <div data-gatsby-overlay=\"header__cause-file\">\n          <h1 id=\"gatsby-overlay-labelledby\">\n            {hasMultipleErrors\n              ? `${errors.length} Unhandled GraphQL Errors`\n              : `Unhandled GraphQL Error`}\n          </h1>\n        </div>\n        <HeaderOpenClose dismiss={dismiss} />\n      </Header>\n      <Body>\n        <p\n          data-gatsby-overlay=\"body__describedby\"\n          id=\"gatsby-overlay-describedby\"\n        >\n          {hasMultipleErrors ? `Multiple` : `One`} unhandled GraphQL{` `}\n          {hasMultipleErrors ? `errors` : `error`} found in your files. See the\n          list below to fix {hasMultipleErrors ? `them` : `it`}:\n        </p>\n        <Accordion>\n          {deduplicatedErrors.map((error, index) => (\n            <WrappedAccordionItem\n              open={index === 0}\n              error={error}\n              key={`${error.sourceMessage}-${index}`}\n            />\n          ))}\n        </Accordion>\n      </Body>\n    </Overlay>\n  )\n}\n"],"mappings":"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"}