{"version":3,"file":"prefetch.js","names":["support","feature","document","fakeLink","createElement","relList","supports","err","linkPrefetchStrategy","url","options","Promise","resolve","reject","link","setAttribute","Object","keys","forEach","key","onload","onerror","parentElement","getElementsByTagName","getElementsByName","parentNode","appendChild","xhrPrefetchStrategy","req","XMLHttpRequest","open","status","send","supportedPrefetchStrategy","preFetched","prefetch","then","catch"],"sources":["../prefetch.js"],"sourcesContent":["const support = function (feature) {\n  if (typeof document === `undefined`) {\n    return false\n  }\n  const fakeLink = document.createElement(`link`)\n  try {\n    if (fakeLink.relList && typeof fakeLink.relList.supports === `function`) {\n      return fakeLink.relList.supports(feature)\n    }\n  } catch (err) {\n    return false\n  }\n  return false\n}\n\nconst linkPrefetchStrategy = function (url, options) {\n  return new Promise((resolve, reject) => {\n    if (typeof document === `undefined`) {\n      reject()\n      return\n    }\n\n    const link = document.createElement(`link`)\n    link.setAttribute(`rel`, `prefetch`)\n    link.setAttribute(`href`, url)\n\n    Object.keys(options).forEach(key => {\n      link.setAttribute(key, options[key])\n    })\n\n    link.onload = resolve\n    link.onerror = reject\n\n    const parentElement =\n      document.getElementsByTagName(`head`)[0] ||\n      document.getElementsByName(`script`)[0].parentNode\n    parentElement.appendChild(link)\n  })\n}\n\nconst xhrPrefetchStrategy = function (url) {\n  return new Promise((resolve, reject) => {\n    const req = new XMLHttpRequest()\n    req.open(`GET`, url, true)\n\n    req.onload = () => {\n      if (req.status === 200) {\n        resolve()\n      } else {\n        reject()\n      }\n    }\n\n    req.send(null)\n  })\n}\n\nconst supportedPrefetchStrategy = support(`prefetch`)\n  ? linkPrefetchStrategy\n  : xhrPrefetchStrategy\n\nconst preFetched = {}\n\nconst prefetch = function (url, options) {\n  return new Promise(resolve => {\n    if (preFetched[url]) {\n      resolve()\n      return\n    }\n\n    supportedPrefetchStrategy(url, options)\n      .then(() => {\n        resolve()\n        preFetched[url] = true\n      })\n      .catch(() => {}) // 404s are logged to the console anyway\n  })\n}\n\nexport default prefetch\n"],"mappings":"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"}