{"version":3,"file":"load-config-and-plugins.js","names":["loadConfigAndPlugins","args","siteDirectory","program","store","dispatch","type","payload","directory","config","loadConfig","loadPlugins","apiRunnerNode"],"sources":["../../../../src/utils/worker/child/load-config-and-plugins.ts"],"sourcesContent":["import { loadConfig } from \"../../../bootstrap/load-config\"\nimport { loadPlugins } from \"../../../bootstrap/load-plugins\"\nimport { store } from \"../../../redux\"\nimport apiRunnerNode from \"../../api-runner-node\"\n\nexport async function loadConfigAndPlugins(\n  ...args: Parameters<typeof loadConfig>\n): Promise<void> {\n  const [{ siteDirectory, program }] = args\n\n  store.dispatch({\n    type: `SET_PROGRAM`,\n    payload: {\n      ...program,\n      directory: siteDirectory,\n    },\n  })\n  const config = await loadConfig(...args)\n  await loadPlugins(config, siteDirectory)\n\n  // Cache is already initialized\n  await apiRunnerNode(`onPluginInit`)\n}\n"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAEO,eAAeA,oBAAoB,CACxC,GAAGC,IAAmC,EACvB;EACf,MAAM,CAAC;IAAEC,aAAa;IAAEC;EAAQ,CAAC,CAAC,GAAGF,IAAI;EAEzCG,YAAK,CAACC,QAAQ,CAAC;IACbC,IAAI,EAAG,aAAY;IACnBC,OAAO,EAAE;MACP,GAAGJ,OAAO;MACVK,SAAS,EAAEN;IACb;EACF,CAAC,CAAC;EACF,MAAMO,MAAM,GAAG,MAAM,IAAAC,sBAAU,EAAC,GAAGT,IAAI,CAAC;EACxC,MAAM,IAAAU,wBAAW,EAACF,MAAM,EAAEP,aAAa,CAAC;;EAExC;EACA,MAAM,IAAAU,sBAAa,EAAE,cAAa,CAAC;AACrC"}