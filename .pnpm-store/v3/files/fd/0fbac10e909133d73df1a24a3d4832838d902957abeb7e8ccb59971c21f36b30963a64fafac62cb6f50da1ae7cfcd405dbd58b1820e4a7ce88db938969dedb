{"version":3,"file":"engines-helpers.js","names":["shouldPrintEngineSnapshot","process","env","gatsby_executing_command","generate","shouldSendTelemetryForHeadAPI","shouldGenerateEngines","emitter","on","action","payload","mode","serverData","config","Head","trackFeatureIsUsed"],"sources":["../../src/utils/engines-helpers.ts"],"sourcesContent":["import { emitter } from \"../redux\"\nimport { ICreatePageAction, ISetComponentFeatures } from \"../redux/types\"\nimport { trackFeatureIsUsed } from \"gatsby-telemetry\"\n\nexport function shouldPrintEngineSnapshot(): boolean {\n  return process.env.gatsby_executing_command === `build`\n}\n\nlet generate = false\nlet shouldSendTelemetryForHeadAPI = true\nexport function shouldGenerateEngines(): boolean {\n  return process.env.gatsby_executing_command === `build` && generate\n}\n\nemitter.on(`CREATE_PAGE`, (action: ICreatePageAction) => {\n  if (action.payload.mode && action.payload.mode !== `SSG`) generate = true\n})\nemitter.on(`SET_COMPONENT_FEATURES`, (action: ISetComponentFeatures) => {\n  if (action.payload.serverData) generate = true\n  if (action.payload.config) generate = true\n  if (action.payload.Head && shouldSendTelemetryForHeadAPI) {\n    trackFeatureIsUsed(`HeadAPI`)\n    shouldSendTelemetryForHeadAPI = false\n  }\n})\n"],"mappings":";;;;;AAAA;AAEA;AAEO,SAASA,yBAAyB,GAAY;EACnD,OAAOC,OAAO,CAACC,GAAG,CAACC,wBAAwB,KAAM,OAAM;AACzD;AAEA,IAAIC,QAAQ,GAAG,KAAK;AACpB,IAAIC,6BAA6B,GAAG,IAAI;AACjC,SAASC,qBAAqB,GAAY;EAC/C,OAAOL,OAAO,CAACC,GAAG,CAACC,wBAAwB,KAAM,OAAM,IAAIC,QAAQ;AACrE;AAEAG,cAAO,CAACC,EAAE,CAAE,aAAY,EAAGC,MAAyB,IAAK;EACvD,IAAIA,MAAM,CAACC,OAAO,CAACC,IAAI,IAAIF,MAAM,CAACC,OAAO,CAACC,IAAI,KAAM,KAAI,EAAEP,QAAQ,GAAG,IAAI;AAC3E,CAAC,CAAC;AACFG,cAAO,CAACC,EAAE,CAAE,wBAAuB,EAAGC,MAA6B,IAAK;EACtE,IAAIA,MAAM,CAACC,OAAO,CAACE,UAAU,EAAER,QAAQ,GAAG,IAAI;EAC9C,IAAIK,MAAM,CAACC,OAAO,CAACG,MAAM,EAAET,QAAQ,GAAG,IAAI;EAC1C,IAAIK,MAAM,CAACC,OAAO,CAACI,IAAI,IAAIT,6BAA6B,EAAE;IACxD,IAAAU,mCAAkB,EAAE,SAAQ,CAAC;IAC7BV,6BAA6B,GAAG,KAAK;EACvC;AACF,CAAC,CAAC"}