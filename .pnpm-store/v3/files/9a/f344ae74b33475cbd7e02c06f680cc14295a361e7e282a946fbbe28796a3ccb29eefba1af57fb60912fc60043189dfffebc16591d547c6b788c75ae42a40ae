{"version":3,"file":"webpack-utils.js","names":["vendorRegex","createWebpackUtils","stage","program","assetRelativeRoot","supportedBrowsers","getBrowsersList","directory","PRODUCTION","includes","isSSR","config","store","getState","assetPrefix","pathPrefix","publicPath","getPublicPath","makeExternalOnly","original","options","rule","include","makeInternalOnly","exclude","fileLoaderCommonOptions","name","outputPath","path","relative","ROUTES_DIRECTORY","loaders","json","loader","require","resolve","yaml","asJSON","null","raw","style","miniCssExtract","moduleOptions","undefined","modules","restOptions","namedExport","MiniCssExtractPlugin","css","modulesOptions","auto","localIdentName","exportLocalsConvention","exportOnlyLocals","url","startsWith","sourceMap","postcss","plugins","overrideBrowserslist","postcssOpts","execute","postcssOptions","loaderContext","postCSSPlugins","autoprefixerPlugin","autoprefixer","flexbox","find","plugin","postcssPlugin","unshift","flexbugs","file","limit","fallback","js","reactRuntime","jsxRuntime","reactImportSource","jsxImportSource","cacheDirectory","join","rootDir","dependencies","rules","modulesThatUseGatsby","test","modulePath","some","module","type","use","resourceQuery","issuer","configFile","compact","isPageTemplate","jsOptions","babelrc","presets","sourceMaps","cacheIdentifier","JSON","stringify","browsersList","gatsbyPreset","version","VENDORS_TO_NOT_POLYFILL","doNotPolyfillRegex","RegExp","fonts","images","media","miscAssets","browsers","importLoaders","filter","Boolean","internal","external","cssModules","builtinPlugins","minifyJs","terserOptions","TerserPlugin","ie8","mangle","safari10","parse","ecma","compress","output","parallel","Math","max","cpuCoreCount","minifyCss","minimizerOptions","preset","svgo","full","CssMinimizerPlugin","fastRefresh","regExpToHack","ReactRefreshWebpackPlugin","overlay","sockIntegration","__dirname","extractText","moment","ignore","resourceRegExp","contextRegExp","extractStats","GatsbyWebpackStatsExtractor","eslintGraphqlSchemaReload","virtualModules","GatsbyWebpackVirtualModules","eslint","extensions","VIRTUAL_MODULES_BASE_PATH","eslintConfig","ESLintPlugin","eslintRequired","eslintRequiredConfig"],"sources":["../../src/utils/webpack-utils.ts"],"sourcesContent":["import * as path from \"path\"\nimport { RuleSetRule, WebpackPluginInstance } from \"webpack\"\nimport { GraphQLSchema } from \"graphql\"\nimport { Plugin as PostCSSPlugin } from \"postcss\"\nimport autoprefixer from \"autoprefixer\"\nimport flexbugs from \"postcss-flexbugs-fixes\"\nimport TerserPlugin from \"terser-webpack-plugin\"\nimport type { MinifyOptions as TerserOptions } from \"terser\"\nimport MiniCssExtractPlugin from \"mini-css-extract-plugin\"\nimport CssMinimizerPlugin from \"css-minimizer-webpack-plugin\"\nimport ReactRefreshWebpackPlugin from \"@pmmmwh/react-refresh-webpack-plugin\"\nimport { getBrowsersList } from \"./browserslist\"\nimport ESLintPlugin from \"eslint-webpack-plugin\"\nimport { cpuCoreCount } from \"gatsby-core-utils\"\nimport { GatsbyWebpackStatsExtractor } from \"./gatsby-webpack-stats-extractor\"\nimport { getPublicPath } from \"./get-public-path\"\nimport {\n  GatsbyWebpackVirtualModules,\n  VIRTUAL_MODULES_BASE_PATH,\n} from \"./gatsby-webpack-virtual-modules\"\n\nimport { builtinPlugins } from \"./webpack-plugins\"\nimport { IProgram, Stage } from \"../commands/types\"\nimport { eslintConfig, eslintRequiredConfig } from \"./eslint-config\"\nimport { store } from \"../redux\"\nimport type { RuleSetUseItem } from \"webpack\"\nimport { ROUTES_DIRECTORY } from \"../constants\"\n\ntype Loader = string | { loader: string; options?: { [name: string]: any } }\ntype LoaderResolver<T = Record<string, unknown>> = (options?: T) => Loader\n\ntype LoaderOptions = Record<string, any>\ntype RuleFactory<T = Record<string, unknown>> = (\n  options?: T & LoaderOptions\n) => RuleSetRule\n\ntype ContextualRuleFactory<T = Record<string, unknown>> = RuleFactory<T> & {\n  internal?: RuleFactory<T>\n  external?: RuleFactory<T>\n}\n\ntype PluginFactory = (...args: any) => WebpackPluginInstance | null\n\ntype BuiltinPlugins = typeof builtinPlugins\n\ntype CSSModulesOptions =\n  | boolean\n  | string\n  | {\n      mode?:\n        | \"local\"\n        | \"global\"\n        | \"pure\"\n        | ((resourcePath: string) => \"local\" | \"global\" | \"pure\")\n      auto?: boolean\n      exportGlobals?: boolean\n      localIdentName?: string\n      localIdentContext?: string\n      localIdentHashPrefix?: string\n      namedExport?: boolean\n      exportLocalsConvention?:\n        | \"asIs\"\n        | \"camelCaseOnly\"\n        | \"camelCase\"\n        | \"dashes\"\n        | \"dashesOnly\"\n      exportOnlyLocals?: boolean\n    }\n\ntype MiniCSSExtractLoaderModuleOptions =\n  | undefined\n  | boolean\n  | {\n      namedExport?: boolean\n    }\n/**\n * Utils that produce webpack `loader` objects\n */\ninterface ILoaderUtils {\n  yaml: LoaderResolver\n  style: LoaderResolver\n  css: LoaderResolver<{\n    url?: boolean | ((url: string, resourcePath: string) => boolean)\n    import?:\n      | boolean\n      | ((url: string, media: string, resourcePath: string) => boolean)\n    modules?: CSSModulesOptions\n    sourceMap?: boolean\n    importLoaders?: number\n    esModule?: boolean\n  }>\n  postcss: LoaderResolver<{\n    browsers?: Array<string>\n    overrideBrowserslist?: Array<string>\n    plugins?: Array<PostCSSPlugin> | ((loader: Loader) => Array<PostCSSPlugin>)\n  }>\n\n  file: LoaderResolver\n  url: LoaderResolver\n  js: LoaderResolver\n  json: LoaderResolver\n  null: LoaderResolver\n  raw: LoaderResolver\n  dependencies: LoaderResolver\n\n  miniCssExtract: LoaderResolver\n  imports?: LoaderResolver\n  exports?: LoaderResolver\n}\n\ninterface IModuleThatUseGatsby {\n  name: string\n  path: string\n}\n\ntype CssLoaderModuleOption = boolean | Record<string, any> | string\n\n/**\n * Utils that produce webpack rule objects\n */\ninterface IRuleUtils {\n  /**\n   * Handles JavaScript compilation via babel\n   */\n  js: RuleFactory<{ modulesThatUseGatsby?: Array<IModuleThatUseGatsby> }>\n  dependencies: RuleFactory<{\n    modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n  }>\n  yaml: RuleFactory\n  fonts: RuleFactory\n  images: RuleFactory\n  miscAssets: RuleFactory\n  media: RuleFactory\n\n  css: ContextualRuleFactory<{\n    browsers?: Array<string>\n    modules?: CssLoaderModuleOption\n  }>\n  cssModules: RuleFactory\n  postcss: ContextualRuleFactory<{ overrideBrowserOptions: Array<string> }>\n\n  eslint: (schema: GraphQLSchema) => RuleSetRule\n  eslintRequired: () => RuleSetRule\n}\n\ntype PluginUtils = BuiltinPlugins & {\n  extractText: PluginFactory\n  uglify: PluginFactory\n  moment: PluginFactory\n  extractStats: PluginFactory\n  minifyJs: PluginFactory\n  minifyCss: PluginFactory\n  fastRefresh: PluginFactory\n  eslintGraphqlSchemaReload: PluginFactory\n  virtualModules: PluginFactory\n  eslint: PluginFactory\n  eslintRequired: PluginFactory\n}\n\n/**\n * webpack atoms namespace\n */\ninterface IWebpackUtils {\n  loaders: ILoaderUtils\n\n  rules: IRuleUtils\n\n  plugins: PluginUtils\n}\n\nconst vendorRegex = /(node_modules|bower_components)/\n\n/**\n * A factory method that produces an atoms namespace\n */\nexport const createWebpackUtils = (\n  stage: Stage,\n  program: IProgram\n): IWebpackUtils => {\n  const assetRelativeRoot = `static/`\n  const supportedBrowsers = getBrowsersList(program.directory)\n\n  const PRODUCTION = !stage.includes(`develop`)\n\n  const isSSR = stage.includes(`html`)\n  const { config } = store.getState()\n  const { assetPrefix, pathPrefix } = config\n\n  const publicPath = getPublicPath({ assetPrefix, pathPrefix, ...program })\n\n  const makeExternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.include = vendorRegex\n      return rule\n    }\n\n  const makeInternalOnly =\n    (original: RuleFactory) =>\n    (options = {}): RuleSetRule => {\n      const rule = original(options)\n      rule.exclude = vendorRegex\n      return rule\n    }\n\n  const fileLoaderCommonOptions: {\n    name: string\n    publicPath?: string\n    outputPath?: string\n  } = {\n    name: `${assetRelativeRoot}[name]-[hash].[ext]`,\n  }\n\n  if (stage === `build-html` || stage === `develop-html`) {\n    // build-html and develop-html outputs to `.cache/page-ssr/routes/` (ROUTES_DIRECTORY)\n    // so this config is setting it to output assets to `public` (outputPath)\n    // while preserving \"url\" (publicPath)\n    fileLoaderCommonOptions.outputPath = path.relative(\n      ROUTES_DIRECTORY,\n      `public`\n    )\n    fileLoaderCommonOptions.publicPath = publicPath || `/`\n  }\n\n  const loaders: ILoaderUtils = {\n    json: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`json-loader`),\n      }\n    },\n    yaml: (options = {}) => {\n      return {\n        loader: require.resolve(`yaml-loader`),\n        options: {\n          asJSON: true,\n          ...options,\n        },\n      }\n    },\n\n    null: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`null-loader`),\n      }\n    },\n\n    raw: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`raw-loader`),\n      }\n    },\n\n    style: (options = {}) => {\n      return {\n        options,\n        loader: require.resolve(`style-loader`),\n      }\n    },\n\n    // TODO(v5): Re-Apply https://github.com/gatsbyjs/gatsby/pull/33979 with breaking change in inline loader syntax\n    miniCssExtract: (\n      options: {\n        modules?: MiniCSSExtractLoaderModuleOptions\n      } = {}\n    ) => {\n      let moduleOptions: MiniCSSExtractLoaderModuleOptions = undefined\n\n      const { modules, ...restOptions } = options\n\n      if (typeof modules === `boolean` && options.modules) {\n        moduleOptions = {\n          namedExport: true,\n        }\n      } else {\n        moduleOptions = modules\n      }\n\n      return {\n        loader: MiniCssExtractPlugin.loader,\n        options: {\n          modules: moduleOptions,\n          ...restOptions,\n        },\n      }\n    },\n\n    css: (options = {}) => {\n      let modulesOptions: CSSModulesOptions = false\n      if (options.modules) {\n        modulesOptions = {\n          auto: undefined,\n          namedExport: true,\n          localIdentName: `[name]--[local]--[hash:hex:5]`,\n          exportLocalsConvention: `dashesOnly`,\n          exportOnlyLocals: isSSR,\n        }\n\n        if (typeof options.modules === `object`) {\n          modulesOptions = {\n            ...modulesOptions,\n            ...options.modules,\n          }\n        }\n      }\n\n      return {\n        loader: require.resolve(`css-loader`),\n        options: {\n          // Absolute urls (https or //) are not send to this function. Only resolvable paths absolute or relative ones.\n          url: function (url: string): boolean {\n            // When an url starts with /\n            if (url.startsWith(`/`)) {\n              return false\n            }\n\n            return true\n          },\n          sourceMap: !PRODUCTION,\n          modules: modulesOptions,\n        },\n      }\n    },\n\n    postcss: (options = {}) => {\n      const {\n        plugins,\n        overrideBrowserslist = supportedBrowsers,\n        ...postcssOpts\n      } = options\n\n      return {\n        loader: require.resolve(`postcss-loader`),\n        options: {\n          execute: false,\n          sourceMap: !PRODUCTION,\n          // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n          postcssOptions: (loaderContext: any) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let postCSSPlugins: Array<PostCSSPlugin> = []\n            if (plugins) {\n              postCSSPlugins =\n                typeof plugins === `function` ? plugins(loaderContext) : plugins\n            }\n\n            const autoprefixerPlugin = autoprefixer({\n              overrideBrowserslist,\n              flexbox: `no-2009`,\n              ...((\n                postCSSPlugins.find(\n                  plugin => plugin.postcssPlugin === `autoprefixer`\n                ) as unknown as autoprefixer.ExportedAPI\n              )?.options ?? {}),\n            })\n\n            postCSSPlugins.unshift(autoprefixerPlugin)\n            postCSSPlugins.unshift(flexbugs)\n\n            return {\n              plugins: postCSSPlugins,\n              ...postcssOpts,\n            }\n          },\n        },\n      }\n    },\n\n    file: (options = {}) => {\n      return {\n        loader: require.resolve(`file-loader`),\n        options: {\n          ...fileLoaderCommonOptions,\n          ...options,\n        },\n      }\n    },\n\n    url: (options = {}) => {\n      return {\n        loader: require.resolve(`url-loader`),\n        options: {\n          limit: 10000,\n          ...fileLoaderCommonOptions,\n          fallback: require.resolve(`file-loader`),\n          ...options,\n        },\n      }\n    },\n\n    js: options => {\n      return {\n        options: {\n          stage,\n          reactRuntime: config.jsxRuntime,\n          reactImportSource: config.jsxImportSource,\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n          rootDir: program.directory,\n        },\n        loader: require.resolve(`./babel-loader`),\n      }\n    },\n\n    dependencies: options => {\n      return {\n        options: {\n          cacheDirectory: path.join(\n            program.directory,\n            `.cache`,\n            `webpack`,\n            `babel`\n          ),\n          ...options,\n        },\n        loader: require.resolve(`babel-loader`),\n      }\n    },\n  }\n\n  /**\n   * Rules\n   */\n  const rules = {} as IRuleUtils\n\n  /**\n   * JavaScript loader via babel, includes userland code\n   * and packages that depend on `gatsby`\n   */\n  {\n    const js = ({\n      modulesThatUseGatsby = [],\n      ...options\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      return {\n        test: /\\.(js|mjs|jsx|ts|tsx)$/,\n        include: (modulePath: string): boolean => {\n          // when it's not coming from node_modules we treat it as a source file.\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If the module uses Gatsby as a dependency\n          // we want to treat it as src so we can extract queries\n          return modulesThatUseGatsby.some(module =>\n            modulePath.includes(module.path)\n          )\n        },\n        type: `javascript/auto`,\n        use: ({ resourceQuery, issuer }): Array<RuleSetUseItem> => [\n          // If a JS import comes from async-requires, assume it is for a page component.\n          // Using `issuer` allows us to avoid mutating async-requires for this case.\n          //\n          // If other imports are added to async-requires in the future, another option is to\n          // append a query param to page components in the store and check against `resourceQuery` here.\n          //\n          // This would require we adjust `doesModuleMatchResourcePath` in `static-query-mapper`\n          // to check against the module's `resourceResolveData.path` instead of resource to avoid\n          // mismatches because of the added query param. Other adjustments may also be needed.\n          loaders.js({\n            ...options,\n            configFile: true,\n            compact: PRODUCTION,\n            isPageTemplate: /async-requires/.test(issuer),\n            resourceQuery,\n          }),\n        ],\n      }\n    }\n    rules.js = js\n  }\n\n  /**\n   * Node_modules JavaScript loader via babel\n   * Excludes core-js & babel-runtime to speedup babel transpilation\n   * Excludes modules that use Gatsby since the `rules.js` already transpiles those\n   */\n  {\n    const dependencies = ({\n      modulesThatUseGatsby = [],\n    }: {\n      modulesThatUseGatsby?: Array<IModuleThatUseGatsby>\n    } = {}): RuleSetRule => {\n      const jsOptions = {\n        babelrc: false,\n        configFile: false,\n        compact: false,\n        presets: [\n          [\n            require.resolve(`babel-preset-gatsby/dependencies`),\n            {\n              stage,\n            },\n          ],\n        ],\n        // If an error happens in a package, it's possible to be\n        // because it was compiled. Thus, we don't want the browser\n        // debugger to show the original code. Instead, the code\n        // being evaluated would be much more helpful.\n        sourceMaps: false,\n\n        cacheIdentifier: JSON.stringify({\n          browsersList: supportedBrowsers,\n          gatsbyPreset: require(`babel-preset-gatsby/package.json`).version,\n        }),\n      }\n\n      // TODO REMOVE IN V3\n      // a list of vendors we know we shouldn't polyfill (we should have set core-js to entry but we didn't so we have to do this)\n      const VENDORS_TO_NOT_POLYFILL = [\n        `@babel[\\\\\\\\/]runtime`,\n        `@mikaelkristiansson[\\\\\\\\/]domready`,\n        `@reach[\\\\\\\\/]router`,\n        `babel-preset-gatsby`,\n        `core-js`,\n        `dom-helpers`,\n        `gatsby-legacy-polyfills`,\n        `gatsby-link`,\n        `gatsby-script`,\n        `gatsby-react-router-scroll`,\n        `invariant`,\n        `lodash`,\n        `mitt`,\n        `prop-types`,\n        `react-dom`,\n        `react`,\n        `regenerator-runtime`,\n        `scheduler`,\n        `scroll-behavior`,\n        `shallow-compare`,\n        `warning`,\n        `webpack`,\n      ]\n      const doNotPolyfillRegex = new RegExp(\n        `[\\\\\\\\/]node_modules[\\\\\\\\/](${VENDORS_TO_NOT_POLYFILL.join(\n          `|`\n        )})[\\\\\\\\/]`\n      )\n\n      return {\n        test: /\\.(js|mjs)$/,\n        exclude: (modulePath: string): boolean => {\n          // If dep is user land code, exclude\n          if (!vendorRegex.test(modulePath)) {\n            return true\n          }\n\n          // If dep uses Gatsby, exclude\n          if (\n            modulesThatUseGatsby.some(module =>\n              modulePath.includes(module.path)\n            )\n          ) {\n            return true\n          }\n\n          return doNotPolyfillRegex.test(modulePath)\n        },\n        type: `javascript/auto`,\n        use: [loaders.dependencies(jsOptions)],\n      }\n    }\n    rules.dependencies = dependencies\n  }\n\n  rules.yaml = (): RuleSetRule => {\n    return {\n      test: /\\.ya?ml$/,\n      type: `json`,\n      use: [loaders.yaml()],\n    }\n  }\n\n  /**\n   * Font loader\n   */\n  rules.fonts = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(eot|otf|ttf|woff(2)?)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads image assets, inlines images via a data URI if they are below\n   * the size threshold\n   */\n  rules.images = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(ico|svg|jpg|jpeg|png|gif|webp|avif)(\\?.*)?$/,\n    }\n  }\n\n  /**\n   * Loads audio and video and inlines them via a data URI if they are below\n   * the size threshold\n   */\n  rules.media = (): RuleSetRule => {\n    return {\n      use: [loaders.url()],\n      test: /\\.(mp4|webm|ogv|wav|mp3|m4a|aac|oga|flac)$/,\n    }\n  }\n\n  /**\n   * Loads assets without inlining\n   */\n  rules.miscAssets = (): RuleSetRule => {\n    return {\n      use: [loaders.file()],\n      test: /\\.pdf$/,\n    }\n  }\n\n  /**\n   * CSS style loader.\n   */\n  {\n    const css: IRuleUtils[\"css\"] = (options = {}): RuleSetRule => {\n      const { browsers, ...restOptions } = options\n      const use = [\n        !isSSR && loaders.miniCssExtract(restOptions),\n        loaders.css({ ...restOptions, importLoaders: 1 }),\n        loaders.postcss({ browsers }),\n      ].filter(Boolean) as RuleSetRule[\"use\"]\n\n      return {\n        use,\n        test: /\\.css$/,\n      }\n    }\n\n    /**\n     * CSS style loader, _excludes_ node_modules.\n     */\n    css.internal = makeInternalOnly(css)\n    css.external = makeExternalOnly(css)\n\n    const cssModules: IRuleUtils[\"cssModules\"] = (options): RuleSetRule => {\n      const rule = css({ ...options, modules: true })\n      delete rule.exclude\n      rule.test = /\\.module\\.css$/\n      return rule\n    }\n\n    rules.css = css\n    rules.cssModules = cssModules\n  }\n\n  /**\n   * PostCSS loader.\n   */\n  {\n    const postcss: ContextualRuleFactory = (options): RuleSetRule => {\n      return {\n        test: /\\.css$/,\n        use: [loaders.css({ importLoaders: 1 }), loaders.postcss(options)],\n      }\n    }\n\n    /**\n     * PostCSS loader, _excludes_ node_modules.\n     */\n    postcss.internal = makeInternalOnly(postcss)\n    postcss.external = makeExternalOnly(postcss)\n    rules.postcss = postcss\n  }\n  /**\n   * cast rules to IRuleUtils\n   */\n  /**\n   * Plugins\n   */\n  const plugins = { ...builtinPlugins } as PluginUtils\n\n  plugins.minifyJs = ({\n    terserOptions,\n    ...options\n  }: {\n    terserOptions?: TerserOptions\n  } = {}): WebpackPluginInstance =>\n    new TerserPlugin({\n      exclude: /\\.min\\.js/,\n      terserOptions: {\n        ie8: false,\n        mangle: {\n          safari10: true,\n        },\n        parse: {\n          ecma: 5,\n        },\n        compress: {\n          ecma: 5,\n        },\n        output: {\n          ecma: 5,\n        },\n        ...terserOptions,\n      },\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.minifyCss = (\n    options = {\n      minimizerOptions: {\n        preset: [\n          `default`,\n          {\n            svgo: {\n              full: true,\n              plugins: [\n                // potentially destructive plugins removed - see https://github.com/gatsbyjs/gatsby/issues/15629\n                // use correct config format and remove plugins requiring specific params - see https://github.com/gatsbyjs/gatsby/issues/31619\n                // List of default plugins and their defaults: https://github.com/svg/svgo#built-in-plugins\n                // Last update 2021-08-17\n                `cleanupAttrs`,\n                `cleanupEnableBackground`,\n                `cleanupIDs`,\n                `cleanupListOfValues`, // Default: disabled\n                `cleanupNumericValues`,\n                `collapseGroups`,\n                `convertColors`,\n                `convertPathData`,\n                `convertStyleToAttrs`, // Default: disabled\n                `convertTransform`,\n                `inlineStyles`,\n                `mergePaths`,\n                `minifyStyles`,\n                `moveElemsAttrsToGroup`,\n                `moveGroupAttrsToElems`,\n                `prefixIds`, // Default: disabled\n                `removeComments`,\n                `removeDesc`,\n                `removeDoctype`,\n                `removeEditorsNSData`,\n                `removeEmptyAttrs`,\n                `removeEmptyContainers`,\n                `removeEmptyText`,\n                `removeHiddenElems`,\n                `removeMetadata`,\n                `removeNonInheritableGroupAttrs`,\n                `removeRasterImages`, // Default: disabled\n                `removeScriptElement`, // Default: disabled\n                `removeStyleElement`, // Default: disabled\n                `removeTitle`,\n                `removeUnknownsAndDefaults`,\n                `removeUnusedNS`,\n                `removeUselessDefs`,\n                `removeUselessStrokeAndFill`,\n                `removeXMLProcInst`,\n                `reusePaths`, // Default: disabled\n                `sortAttrs`, // Default: disabled\n              ],\n            },\n          },\n        ],\n      },\n    }\n  ): CssMinimizerPlugin =>\n    new CssMinimizerPlugin({\n      parallel: Math.max(1, cpuCoreCount() - 1),\n      ...options,\n    })\n\n  plugins.fastRefresh = ({ modulesThatUseGatsby }): WebpackPluginInstance => {\n    const regExpToHack = /node_modules/\n    regExpToHack.test = (modulePath: string): boolean => {\n      // when it's not coming from node_modules we treat it as a source file.\n      if (!vendorRegex.test(modulePath)) {\n        return false\n      }\n\n      // If the module uses Gatsby as a dependency\n      // we want to treat it as src because of shadowing\n      return !modulesThatUseGatsby.some(module =>\n        modulePath.includes(module.path)\n      )\n    }\n\n    return new ReactRefreshWebpackPlugin({\n      overlay: {\n        sockIntegration: `whm`,\n        module: path.join(__dirname, `fast-refresh-module`),\n      },\n      // this is a bit hacky - exclude expect string or regexp or array of those\n      // so this is tricking ReactRefreshWebpackPlugin with providing regexp with\n      // overwritten .test method\n      exclude: regExpToHack,\n    })\n  }\n\n  plugins.extractText = (options: any): WebpackPluginInstance =>\n    new MiniCssExtractPlugin({\n      ...options,\n    })\n\n  plugins.moment = (): WebpackPluginInstance =>\n    plugins.ignore({ resourceRegExp: /^\\.\\/locale$/, contextRegExp: /moment$/ })\n\n  plugins.extractStats = (): GatsbyWebpackStatsExtractor =>\n    new GatsbyWebpackStatsExtractor(publicPath)\n\n  // TODO: remove this in v5\n  plugins.eslintGraphqlSchemaReload = (): null => null\n\n  plugins.virtualModules = (): GatsbyWebpackVirtualModules =>\n    new GatsbyWebpackVirtualModules()\n\n  plugins.eslint = (): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintConfig(config.jsxRuntime === `automatic`),\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  plugins.eslintRequired = (): WebpackPluginInstance => {\n    const options = {\n      extensions: [`js`, `jsx`],\n      exclude: [\n        `/node_modules/`,\n        `/bower_components/`,\n        VIRTUAL_MODULES_BASE_PATH,\n      ],\n      ...eslintRequiredConfig,\n    }\n    // @ts-ignore\n    return new ESLintPlugin(options)\n  }\n\n  return {\n    loaders,\n    rules,\n    plugins,\n  }\n}\n"],"mappings":";;;;;AAAA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AAEA;AACA;AAEA;AAA+C;AAAA;AAgJ/C,MAAMA,WAAW,GAAG,iCAAiC;;AAErD;AACA;AACA;AACO,MAAMC,kBAAkB,GAAG,CAChCC,KAAY,EACZC,OAAiB,KACC;EAClB,MAAMC,iBAAiB,GAAI,SAAQ;EACnC,MAAMC,iBAAiB,GAAG,IAAAC,6BAAe,EAACH,OAAO,CAACI,SAAS,CAAC;EAE5D,MAAMC,UAAU,GAAG,CAACN,KAAK,CAACO,QAAQ,CAAE,SAAQ,CAAC;EAE7C,MAAMC,KAAK,GAAGR,KAAK,CAACO,QAAQ,CAAE,MAAK,CAAC;EACpC,MAAM;IAAEE;EAAO,CAAC,GAAGC,YAAK,CAACC,QAAQ,EAAE;EACnC,MAAM;IAAEC,WAAW;IAAEC;EAAW,CAAC,GAAGJ,MAAM;EAE1C,MAAMK,UAAU,GAAG,IAAAC,4BAAa,EAAC;IAAEH,WAAW;IAAEC,UAAU;IAAE,GAAGZ;EAAQ,CAAC,CAAC;EAEzE,MAAMe,gBAAgB,GACnBC,QAAqB,IACtB,CAACC,OAAO,GAAG,CAAC,CAAC,KAAkB;IAC7B,MAAMC,IAAI,GAAGF,QAAQ,CAACC,OAAO,CAAC;IAC9BC,IAAI,CAACC,OAAO,GAAGtB,WAAW;IAC1B,OAAOqB,IAAI;EACb,CAAC;EAEH,MAAME,gBAAgB,GACnBJ,QAAqB,IACtB,CAACC,OAAO,GAAG,CAAC,CAAC,KAAkB;IAC7B,MAAMC,IAAI,GAAGF,QAAQ,CAACC,OAAO,CAAC;IAC9BC,IAAI,CAACG,OAAO,GAAGxB,WAAW;IAC1B,OAAOqB,IAAI;EACb,CAAC;EAEH,MAAMI,uBAIL,GAAG;IACFC,IAAI,EAAG,GAAEtB,iBAAkB;EAC7B,CAAC;EAED,IAAIF,KAAK,KAAM,YAAW,IAAIA,KAAK,KAAM,cAAa,EAAE;IACtD;IACA;IACA;IACAuB,uBAAuB,CAACE,UAAU,GAAGC,IAAI,CAACC,QAAQ,CAChDC,2BAAgB,EACf,QAAO,CACT;IACDL,uBAAuB,CAACT,UAAU,GAAGA,UAAU,IAAK,GAAE;EACxD;EAEA,MAAMe,OAAqB,GAAG;IAC5BC,IAAI,EAAE,CAACZ,OAAO,GAAG,CAAC,CAAC,KAAK;MACtB,OAAO;QACLA,OAAO;QACPa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,aAAY;MACvC,CAAC;IACH,CAAC;IACDC,IAAI,EAAE,CAAChB,OAAO,GAAG,CAAC,CAAC,KAAK;MACtB,OAAO;QACLa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,aAAY,CAAC;QACtCf,OAAO,EAAE;UACPiB,MAAM,EAAE,IAAI;UACZ,GAAGjB;QACL;MACF,CAAC;IACH,CAAC;IAEDkB,IAAI,EAAE,CAAClB,OAAO,GAAG,CAAC,CAAC,KAAK;MACtB,OAAO;QACLA,OAAO;QACPa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,aAAY;MACvC,CAAC;IACH,CAAC;IAEDI,GAAG,EAAE,CAACnB,OAAO,GAAG,CAAC,CAAC,KAAK;MACrB,OAAO;QACLA,OAAO;QACPa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,YAAW;MACtC,CAAC;IACH,CAAC;IAEDK,KAAK,EAAE,CAACpB,OAAO,GAAG,CAAC,CAAC,KAAK;MACvB,OAAO;QACLA,OAAO;QACPa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,cAAa;MACxC,CAAC;IACH,CAAC;IAED;IACAM,cAAc,EAAE,CACdrB,OAEC,GAAG,CAAC,CAAC,KACH;MACH,IAAIsB,aAAgD,GAAGC,SAAS;MAEhE,MAAM;QAAEC,OAAO;QAAE,GAAGC;MAAY,CAAC,GAAGzB,OAAO;MAE3C,IAAI,OAAOwB,OAAO,KAAM,SAAQ,IAAIxB,OAAO,CAACwB,OAAO,EAAE;QACnDF,aAAa,GAAG;UACdI,WAAW,EAAE;QACf,CAAC;MACH,CAAC,MAAM;QACLJ,aAAa,GAAGE,OAAO;MACzB;MAEA,OAAO;QACLX,MAAM,EAAEc,6BAAoB,CAACd,MAAM;QACnCb,OAAO,EAAE;UACPwB,OAAO,EAAEF,aAAa;UACtB,GAAGG;QACL;MACF,CAAC;IACH,CAAC;IAEDG,GAAG,EAAE,CAAC5B,OAAO,GAAG,CAAC,CAAC,KAAK;MACrB,IAAI6B,cAAiC,GAAG,KAAK;MAC7C,IAAI7B,OAAO,CAACwB,OAAO,EAAE;QACnBK,cAAc,GAAG;UACfC,IAAI,EAAEP,SAAS;UACfG,WAAW,EAAE,IAAI;UACjBK,cAAc,EAAG,+BAA8B;UAC/CC,sBAAsB,EAAG,YAAW;UACpCC,gBAAgB,EAAE3C;QACpB,CAAC;QAED,IAAI,OAAOU,OAAO,CAACwB,OAAO,KAAM,QAAO,EAAE;UACvCK,cAAc,GAAG;YACf,GAAGA,cAAc;YACjB,GAAG7B,OAAO,CAACwB;UACb,CAAC;QACH;MACF;MAEA,OAAO;QACLX,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,YAAW,CAAC;QACrCf,OAAO,EAAE;UACP;UACAkC,GAAG,EAAE,UAAUA,GAAW,EAAW;YACnC;YACA,IAAIA,GAAG,CAACC,UAAU,CAAE,GAAE,CAAC,EAAE;cACvB,OAAO,KAAK;YACd;YAEA,OAAO,IAAI;UACb,CAAC;UACDC,SAAS,EAAE,CAAChD,UAAU;UACtBoC,OAAO,EAAEK;QACX;MACF,CAAC;IACH,CAAC;IAEDQ,OAAO,EAAE,CAACrC,OAAO,GAAG,CAAC,CAAC,KAAK;MACzB,MAAM;QACJsC,OAAO;QACPC,oBAAoB,GAAGtD,iBAAiB;QACxC,GAAGuD;MACL,CAAC,GAAGxC,OAAO;MAEX,OAAO;QACLa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,gBAAe,CAAC;QACzCf,OAAO,EAAE;UACPyC,OAAO,EAAE,KAAK;UACdL,SAAS,EAAE,CAAChD,UAAU;UACtB;UACAsD,cAAc,EAAGC,aAAkB,IAAK;YAAA;YACtC;YACA,IAAIC,cAAoC,GAAG,EAAE;YAC7C,IAAIN,OAAO,EAAE;cACXM,cAAc,GACZ,OAAON,OAAO,KAAM,UAAS,GAAGA,OAAO,CAACK,aAAa,CAAC,GAAGL,OAAO;YACpE;YAEA,MAAMO,kBAAkB,GAAG,IAAAC,qBAAY,EAAC;cACtCP,oBAAoB;cACpBQ,OAAO,EAAG,SAAQ;cAClB,wCACEH,cAAc,CAACI,IAAI,CACjBC,MAAM,IAAIA,MAAM,CAACC,aAAa,KAAM,cAAa,CAClD,yDAHC,qBAIDlD,OAAO,+CAAI,CAAC,CAAC;YAClB,CAAC,CAAC;YAEF4C,cAAc,CAACO,OAAO,CAACN,kBAAkB,CAAC;YAC1CD,cAAc,CAACO,OAAO,CAACC,6BAAQ,CAAC;YAEhC,OAAO;cACLd,OAAO,EAAEM,cAAc;cACvB,GAAGJ;YACL,CAAC;UACH;QACF;MACF,CAAC;IACH,CAAC;IAEDa,IAAI,EAAE,CAACrD,OAAO,GAAG,CAAC,CAAC,KAAK;MACtB,OAAO;QACLa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,aAAY,CAAC;QACtCf,OAAO,EAAE;UACP,GAAGK,uBAAuB;UAC1B,GAAGL;QACL;MACF,CAAC;IACH,CAAC;IAEDkC,GAAG,EAAE,CAAClC,OAAO,GAAG,CAAC,CAAC,KAAK;MACrB,OAAO;QACLa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,YAAW,CAAC;QACrCf,OAAO,EAAE;UACPsD,KAAK,EAAE,KAAK;UACZ,GAAGjD,uBAAuB;UAC1BkD,QAAQ,EAAEzC,OAAO,CAACC,OAAO,CAAE,aAAY,CAAC;UACxC,GAAGf;QACL;MACF,CAAC;IACH,CAAC;IAEDwD,EAAE,EAAExD,OAAO,IAAI;MACb,OAAO;QACLA,OAAO,EAAE;UACPlB,KAAK;UACL2E,YAAY,EAAElE,MAAM,CAACmE,UAAU;UAC/BC,iBAAiB,EAAEpE,MAAM,CAACqE,eAAe;UACzCC,cAAc,EAAErD,IAAI,CAACsD,IAAI,CACvB/E,OAAO,CAACI,SAAS,EAChB,QAAO,EACP,SAAQ,EACR,OAAM,CACR;UACD,GAAGa,OAAO;UACV+D,OAAO,EAAEhF,OAAO,CAACI;QACnB,CAAC;QACD0B,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,gBAAe;MAC1C,CAAC;IACH,CAAC;IAEDiD,YAAY,EAAEhE,OAAO,IAAI;MACvB,OAAO;QACLA,OAAO,EAAE;UACP6D,cAAc,EAAErD,IAAI,CAACsD,IAAI,CACvB/E,OAAO,CAACI,SAAS,EAChB,QAAO,EACP,SAAQ,EACR,OAAM,CACR;UACD,GAAGa;QACL,CAAC;QACDa,MAAM,EAAEC,OAAO,CAACC,OAAO,CAAE,cAAa;MACxC,CAAC;IACH;EACF,CAAC;;EAED;AACF;AACA;EACE,MAAMkD,KAAK,GAAG,CAAC,CAAe;;EAE9B;AACF;AACA;AACA;EACE;IACE,MAAMT,EAAE,GAAG,CAAC;MACVU,oBAAoB,GAAG,EAAE;MACzB,GAAGlE;IAGL,CAAC,GAAG,CAAC,CAAC,KAAkB;MACtB,OAAO;QACLmE,IAAI,EAAE,wBAAwB;QAC9BjE,OAAO,EAAGkE,UAAkB,IAAc;UACxC;UACA,IAAI,CAACxF,WAAW,CAACuF,IAAI,CAACC,UAAU,CAAC,EAAE;YACjC,OAAO,IAAI;UACb;;UAEA;UACA;UACA,OAAOF,oBAAoB,CAACG,IAAI,CAACC,MAAM,IACrCF,UAAU,CAAC/E,QAAQ,CAACiF,MAAM,CAAC9D,IAAI,CAAC,CACjC;QACH,CAAC;QACD+D,IAAI,EAAG,iBAAgB;QACvBC,GAAG,EAAE,CAAC;UAAEC,aAAa;UAAEC;QAAO,CAAC,KAA4B;QACzD;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA/D,OAAO,CAAC6C,EAAE,CAAC;UACT,GAAGxD,OAAO;UACV2E,UAAU,EAAE,IAAI;UAChBC,OAAO,EAAExF,UAAU;UACnByF,cAAc,EAAE,gBAAgB,CAACV,IAAI,CAACO,MAAM,CAAC;UAC7CD;QACF,CAAC,CAAC;MAEN,CAAC;IACH,CAAC;IACDR,KAAK,CAACT,EAAE,GAAGA,EAAE;EACf;;EAEA;AACF;AACA;AACA;AACA;EACE;IACE,MAAMQ,YAAY,GAAG,CAAC;MACpBE,oBAAoB,GAAG;IAGzB,CAAC,GAAG,CAAC,CAAC,KAAkB;MACtB,MAAMY,SAAS,GAAG;QAChBC,OAAO,EAAE,KAAK;QACdJ,UAAU,EAAE,KAAK;QACjBC,OAAO,EAAE,KAAK;QACdI,OAAO,EAAE,CACP,CACElE,OAAO,CAACC,OAAO,CAAE,kCAAiC,CAAC,EACnD;UACEjC;QACF,CAAC,CACF,CACF;QACD;QACA;QACA;QACA;QACAmG,UAAU,EAAE,KAAK;QAEjBC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAAC;UAC9BC,YAAY,EAAEpG,iBAAiB;UAC/BqG,YAAY,EAAExE,OAAO,CAAE,kCAAiC,CAAC,CAACyE;QAC5D,CAAC;MACH,CAAC;;MAED;MACA;MACA,MAAMC,uBAAuB,GAAG,CAC7B,sBAAqB,EACrB,oCAAmC,EACnC,qBAAoB,EACpB,qBAAoB,EACpB,SAAQ,EACR,aAAY,EACZ,yBAAwB,EACxB,aAAY,EACZ,eAAc,EACd,4BAA2B,EAC3B,WAAU,EACV,QAAO,EACP,MAAK,EACL,YAAW,EACX,WAAU,EACV,OAAM,EACN,qBAAoB,EACpB,WAAU,EACV,iBAAgB,EAChB,iBAAgB,EAChB,SAAQ,EACR,SAAQ,CACV;MACD,MAAMC,kBAAkB,GAAG,IAAIC,MAAM,CAClC,8BAA6BF,uBAAuB,CAAC1B,IAAI,CACvD,GAAE,CACH,UAAS,CACZ;MAED,OAAO;QACLK,IAAI,EAAE,aAAa;QACnB/D,OAAO,EAAGgE,UAAkB,IAAc;UACxC;UACA,IAAI,CAACxF,WAAW,CAACuF,IAAI,CAACC,UAAU,CAAC,EAAE;YACjC,OAAO,IAAI;UACb;;UAEA;UACA,IACEF,oBAAoB,CAACG,IAAI,CAACC,MAAM,IAC9BF,UAAU,CAAC/E,QAAQ,CAACiF,MAAM,CAAC9D,IAAI,CAAC,CACjC,EACD;YACA,OAAO,IAAI;UACb;UAEA,OAAOiF,kBAAkB,CAACtB,IAAI,CAACC,UAAU,CAAC;QAC5C,CAAC;QACDG,IAAI,EAAG,iBAAgB;QACvBC,GAAG,EAAE,CAAC7D,OAAO,CAACqD,YAAY,CAACc,SAAS,CAAC;MACvC,CAAC;IACH,CAAC;IACDb,KAAK,CAACD,YAAY,GAAGA,YAAY;EACnC;EAEAC,KAAK,CAACjD,IAAI,GAAG,MAAmB;IAC9B,OAAO;MACLmD,IAAI,EAAE,UAAU;MAChBI,IAAI,EAAG,MAAK;MACZC,GAAG,EAAE,CAAC7D,OAAO,CAACK,IAAI,EAAE;IACtB,CAAC;EACH,CAAC;;EAED;AACF;AACA;EACEiD,KAAK,CAAC0B,KAAK,GAAG,MAAmB;IAC/B,OAAO;MACLnB,GAAG,EAAE,CAAC7D,OAAO,CAACuB,GAAG,EAAE,CAAC;MACpBiC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;;EAED;AACF;AACA;AACA;EACEF,KAAK,CAAC2B,MAAM,GAAG,MAAmB;IAChC,OAAO;MACLpB,GAAG,EAAE,CAAC7D,OAAO,CAACuB,GAAG,EAAE,CAAC;MACpBiC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;;EAED;AACF;AACA;AACA;EACEF,KAAK,CAAC4B,KAAK,GAAG,MAAmB;IAC/B,OAAO;MACLrB,GAAG,EAAE,CAAC7D,OAAO,CAACuB,GAAG,EAAE,CAAC;MACpBiC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;;EAED;AACF;AACA;EACEF,KAAK,CAAC6B,UAAU,GAAG,MAAmB;IACpC,OAAO;MACLtB,GAAG,EAAE,CAAC7D,OAAO,CAAC0C,IAAI,EAAE,CAAC;MACrBc,IAAI,EAAE;IACR,CAAC;EACH,CAAC;;EAED;AACF;AACA;EACE;IACE,MAAMvC,GAAsB,GAAG,CAAC5B,OAAO,GAAG,CAAC,CAAC,KAAkB;MAC5D,MAAM;QAAE+F,QAAQ;QAAE,GAAGtE;MAAY,CAAC,GAAGzB,OAAO;MAC5C,MAAMwE,GAAG,GAAG,CACV,CAAClF,KAAK,IAAIqB,OAAO,CAACU,cAAc,CAACI,WAAW,CAAC,EAC7Cd,OAAO,CAACiB,GAAG,CAAC;QAAE,GAAGH,WAAW;QAAEuE,aAAa,EAAE;MAAE,CAAC,CAAC,EACjDrF,OAAO,CAAC0B,OAAO,CAAC;QAAE0D;MAAS,CAAC,CAAC,CAC9B,CAACE,MAAM,CAACC,OAAO,CAAuB;MAEvC,OAAO;QACL1B,GAAG;QACHL,IAAI,EAAE;MACR,CAAC;IACH,CAAC;;IAED;AACJ;AACA;IACIvC,GAAG,CAACuE,QAAQ,GAAGhG,gBAAgB,CAACyB,GAAG,CAAC;IACpCA,GAAG,CAACwE,QAAQ,GAAGtG,gBAAgB,CAAC8B,GAAG,CAAC;IAEpC,MAAMyE,UAAoC,GAAIrG,OAAO,IAAkB;MACrE,MAAMC,IAAI,GAAG2B,GAAG,CAAC;QAAE,GAAG5B,OAAO;QAAEwB,OAAO,EAAE;MAAK,CAAC,CAAC;MAC/C,OAAOvB,IAAI,CAACG,OAAO;MACnBH,IAAI,CAACkE,IAAI,GAAG,gBAAgB;MAC5B,OAAOlE,IAAI;IACb,CAAC;IAEDgE,KAAK,CAACrC,GAAG,GAAGA,GAAG;IACfqC,KAAK,CAACoC,UAAU,GAAGA,UAAU;EAC/B;;EAEA;AACF;AACA;EACE;IACE,MAAMhE,OAA8B,GAAIrC,OAAO,IAAkB;MAC/D,OAAO;QACLmE,IAAI,EAAE,QAAQ;QACdK,GAAG,EAAE,CAAC7D,OAAO,CAACiB,GAAG,CAAC;UAAEoE,aAAa,EAAE;QAAE,CAAC,CAAC,EAAErF,OAAO,CAAC0B,OAAO,CAACrC,OAAO,CAAC;MACnE,CAAC;IACH,CAAC;;IAED;AACJ;AACA;IACIqC,OAAO,CAAC8D,QAAQ,GAAGhG,gBAAgB,CAACkC,OAAO,CAAC;IAC5CA,OAAO,CAAC+D,QAAQ,GAAGtG,gBAAgB,CAACuC,OAAO,CAAC;IAC5C4B,KAAK,CAAC5B,OAAO,GAAGA,OAAO;EACzB;EACA;AACF;AACA;EACE;AACF;AACA;EACE,MAAMC,OAAO,GAAG;IAAE,GAAGgE;EAAe,CAAgB;EAEpDhE,OAAO,CAACiE,QAAQ,GAAG,CAAC;IAClBC,aAAa;IACb,GAAGxG;EAGL,CAAC,GAAG,CAAC,CAAC,KACJ,IAAIyG,4BAAY,CAAC;IACfrG,OAAO,EAAE,WAAW;IACpBoG,aAAa,EAAE;MACbE,GAAG,EAAE,KAAK;MACVC,MAAM,EAAE;QACNC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAE;QACLC,IAAI,EAAE;MACR,CAAC;MACDC,QAAQ,EAAE;QACRD,IAAI,EAAE;MACR,CAAC;MACDE,MAAM,EAAE;QACNF,IAAI,EAAE;MACR,CAAC;MACD,GAAGN;IACL,CAAC;IACDS,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAAC,6BAAY,GAAE,GAAG,CAAC,CAAC;IACzC,GAAGpH;EACL,CAAC,CAAC;EAEJsC,OAAO,CAAC+E,SAAS,GAAG,CAClBrH,OAAO,GAAG;IACRsH,gBAAgB,EAAE;MAChBC,MAAM,EAAE,CACL,SAAQ,EACT;QACEC,IAAI,EAAE;UACJC,IAAI,EAAE,IAAI;UACVnF,OAAO,EAAE;UACP;UACA;UACA;UACA;UACC,cAAa,EACb,yBAAwB,EACxB,YAAW,EACX,qBAAoB;UAAE;UACtB,sBAAqB,EACrB,gBAAe,EACf,eAAc,EACd,iBAAgB,EAChB,qBAAoB;UAAE;UACtB,kBAAiB,EACjB,cAAa,EACb,YAAW,EACX,cAAa,EACb,uBAAsB,EACtB,uBAAsB,EACtB,WAAU;UAAE;UACZ,gBAAe,EACf,YAAW,EACX,eAAc,EACd,qBAAoB,EACpB,kBAAiB,EACjB,uBAAsB,EACtB,iBAAgB,EAChB,mBAAkB,EAClB,gBAAe,EACf,gCAA+B,EAC/B,oBAAmB;UAAE;UACrB,qBAAoB;UAAE;UACtB,oBAAmB;UAAE;UACrB,aAAY,EACZ,2BAA0B,EAC1B,gBAAe,EACf,mBAAkB,EAClB,4BAA2B,EAC3B,mBAAkB,EAClB,YAAW;UAAE;UACb,WAAU,CAAE;UAAA;QAEjB;MACF,CAAC;IAEL;EACF,CAAC,KAED,IAAIoF,kCAAkB,CAAC;IACrBT,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAAC,6BAAY,GAAE,GAAG,CAAC,CAAC;IACzC,GAAGpH;EACL,CAAC,CAAC;EAEJsC,OAAO,CAACqF,WAAW,GAAG,CAAC;IAAEzD;EAAqB,CAAC,KAA4B;IACzE,MAAM0D,YAAY,GAAG,cAAc;IACnCA,YAAY,CAACzD,IAAI,GAAIC,UAAkB,IAAc;MACnD;MACA,IAAI,CAACxF,WAAW,CAACuF,IAAI,CAACC,UAAU,CAAC,EAAE;QACjC,OAAO,KAAK;MACd;;MAEA;MACA;MACA,OAAO,CAACF,oBAAoB,CAACG,IAAI,CAACC,MAAM,IACtCF,UAAU,CAAC/E,QAAQ,CAACiF,MAAM,CAAC9D,IAAI,CAAC,CACjC;IACH,CAAC;IAED,OAAO,IAAIqH,kCAAyB,CAAC;MACnCC,OAAO,EAAE;QACPC,eAAe,EAAG,KAAI;QACtBzD,MAAM,EAAE9D,IAAI,CAACsD,IAAI,CAACkE,SAAS,EAAG,qBAAoB;MACpD,CAAC;MACD;MACA;MACA;MACA5H,OAAO,EAAEwH;IACX,CAAC,CAAC;EACJ,CAAC;EAEDtF,OAAO,CAAC2F,WAAW,GAAIjI,OAAY,IACjC,IAAI2B,6BAAoB,CAAC;IACvB,GAAG3B;EACL,CAAC,CAAC;EAEJsC,OAAO,CAAC4F,MAAM,GAAG,MACf5F,OAAO,CAAC6F,MAAM,CAAC;IAAEC,cAAc,EAAE,cAAc;IAAEC,aAAa,EAAE;EAAU,CAAC,CAAC;EAE9E/F,OAAO,CAACgG,YAAY,GAAG,MACrB,IAAIC,wDAA2B,CAAC3I,UAAU,CAAC;;EAE7C;EACA0C,OAAO,CAACkG,yBAAyB,GAAG,MAAY,IAAI;EAEpDlG,OAAO,CAACmG,cAAc,GAAG,MACvB,IAAIC,wDAA2B,EAAE;EAEnCpG,OAAO,CAACqG,MAAM,GAAG,MAA6B;IAC5C,MAAM3I,OAAO,GAAG;MACd4I,UAAU,EAAE,CAAE,IAAG,EAAG,KAAI,CAAC;MACzBxI,OAAO,EAAE,CACN,gBAAe,EACf,oBAAmB,EACpByI,sDAAyB,CAC1B;MACD,GAAG,IAAAC,0BAAY,EAACvJ,MAAM,CAACmE,UAAU,KAAM,WAAU;IACnD,CAAC;IACD;IACA,OAAO,IAAIqF,4BAAY,CAAC/I,OAAO,CAAC;EAClC,CAAC;EAEDsC,OAAO,CAAC0G,cAAc,GAAG,MAA6B;IACpD,MAAMhJ,OAAO,GAAG;MACd4I,UAAU,EAAE,CAAE,IAAG,EAAG,KAAI,CAAC;MACzBxI,OAAO,EAAE,CACN,gBAAe,EACf,oBAAmB,EACpByI,sDAAyB,CAC1B;MACD,GAAGI;IACL,CAAC;IACD;IACA,OAAO,IAAIF,4BAAY,CAAC/I,OAAO,CAAC;EAClC,CAAC;EAED,OAAO;IACLW,OAAO;IACPsD,KAAK;IACL3B;EACF,CAAC;AACH,CAAC;AAAA"}