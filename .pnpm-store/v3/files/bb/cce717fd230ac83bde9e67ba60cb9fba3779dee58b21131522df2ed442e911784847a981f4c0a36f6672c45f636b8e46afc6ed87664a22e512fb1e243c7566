{"version":3,"file":"focus-trap.js","names":["nodeArray","input","Array","isArray","nodeType","undefined","document","querySelectorAll","length","slice","call","TypeError","String","contextToElement","_ref","context","_ref$label","label","resolveDocument","defaultToDocument","element","Node","DOCUMENT_NODE","documentElement","ELEMENT_NODE","DOCUMENT_FRAGMENT_NODE","getShadowHost","arguments","container","parentNode","host","getDocument","node","ownerDocument","isActiveElement","_document","activeElement","shadowHost","shadowRoot","getParents","list","push","names","name","findMethodName","some","_name","elementMatches","selector","platform","JSON","parse","stringify","_platform","os","family","ANDROID","WINDOWS","OSX","IOS","BLINK","layout","GECKO","TRIDENT","EDGE","WEBKIT","version","parseFloat","majorVersion","Math","floor","is","IE9","IE10","IE11","before","data","windowScrollTop","window","scrollTop","windowScrollLeft","scrollLeft","bodyScrollTop","body","bodyScrollLeft","iframe","createElement","setAttribute","appendChild","_window","contentWindow","open","close","wrapper","test","options","innerHTML","focus","mutate","validate","after","blur","removeChild","detectFocus","tests","results","Object","keys","map","key","version$1","readLocalStorage","localStorage","getItem","e","writeLocalStorage","value","hasFocus","removeItem","setItem","userAgent","navigator","cacheKey","cache","cache$1","get","set","values","forEach","time","Date","toISOString","cssShadowPiercingDeepCombinator","combinator","querySelector","noArrowArrowArrow","noDeep","gif","focusAreaImgTabindex","focusAreaTabindex","focusTarget","focusAreaWithoutHref","focusAudioWithoutControls","invalidGif","focusBrokenImageMap","focusChildrenOfFocusableFlexbox","focusFieldsetDisabled","focusFieldset","focusFlexboxContainer","focusFormDisabled","focusImgIsmap","href","focusImgUsemapTabindex","focusInHiddenIframe","iframeDocument","style","visibility","result","focusInZeroDimensionObject","focusInvalidTabindex","focusLabelTabindex","variableToPreventDeadCodeElimination","offsetHeight","svg","focusObjectSvgHidden","focusObjectSvg","result$1","focusObjectSwf","focusRedirectImgUsemap","target","focusRedirectLegend","focusable","tabbable","focusScrollBody","focusScrollContainerWithoutOverflow","focusScrollContainer","focusSummary","firstElementChild","makeFocusableForeignObject","fragment","firstChild","focusSvgForeignObjectHack","isSvgElement","ownerSVGElement","nodeName","toLowerCase","foreignObject","disabled","generate","HTMLElement","prototype","focusSvgFocusableAttribute","focusSvgTabindexAttribute","focusSvgNegativeTabindexAttribute","focusSvgUseTabindex","join","focusSvgForeignobjectTabindex","getElementsByTagName","result$2","Boolean","SVGElement","focusSvgInIframe","focusSvg","focusTabindexTrailingCharacters","focusTable","createDocumentFragment","focusVideoWithoutControls","result$3","tabsequenceAreaAtImgPosition","testCallbacks","testDescriptions","executeTests","supportsCache","_supports","supports","validIntegerPatternNoTrailing","validIntegerPatternWithTrailing","isValidTabindex","validIntegerPattern","hasTabindex","hasAttribute","hasTabIndex","tabindex","getAttribute","tabindexValue","attributeName","parseInt","isNaN","isUserModifyWritable","userModify","webkitUserModify","indexOf","hasCssOverflowScroll","getPropertyValue","overflow","hasCssDisplayFlex","display","isScrollableContainer","parentNodeName","parentStyle","scrollHeight","offsetWidth","scrollWidth","supports$1","isFocusRelevantRules","_ref$except","except","flexbox","scrollable","shadow","type","svgType","validTabindex","isSvgContent","focusableAttribute","getComputedStyle","hasLinkParent","parent","parentElement","isFocusRelevant","rules","findIndex","array","callback","i","getContentDocument","contentDocument","getSVGDocument","getWindow","defaultView","shadowPrefix","selectInShadows","operator","replace","split","findDocumentHostElement","_frameElement","potentialHosts","getFrameElement","frameElement","notRenderedElementsPattern","computedStyle","property","notDisplayed","_path","notVisible","hidden","visible","collapsedParent","offset","isVisibleRules","notRendered","cssDisplay","cssVisibility","detailsElement","browsingContext","isAudioWithoutControls","_isVisible","isVisible","getMapByName","cssEscape","getImageOfArea","supports$2","isValidArea","img","complete","naturalHeight","childOfInteractive","_element","supports$3","disabledElementsPattern","disabledElements","select","textarea","button","fieldset","form","isNativeDisabledSupported","RegExp","supports$4","isDisabledFieldset","isDisabledForm","isDisabled","parents","isOnlyTabbableRules","onlyFocusableBrowsingContext","isOnlyTabbable","supports$5","isOnlyFocusRelevant","_tabindex","isFocusableRules","onlyTabbable","_isOnlyTabbable","focusRelevant","visibilityOptions","_nodeName2","_nodeName","isFocusable","createFilter","condition","filter","NodeFilter","FILTER_ACCEPT","FILTER_SKIP","acceptNode","PossiblyFocusableFilter","queryFocusableStrict","includeContext","includeOnlyTabbable","strategy","_isFocusable","walker","createTreeWalker","SHOW_ELEMENT","nextNode","currentNode","concat","unshift","supports$6","selector$1","selector$2","queryFocusableQuick","_selector","elements","queryFocusable","_ref$strategy","supports$7","focusableElementsPattern","isTabbableRules","frameNodeName","isFixedBlink","hasTabbableTabindexOrNone","hasTabbableTabindex","potentiallyTabbable","tabIndex","_style","_style2","isFocusRelevantWithoutFlexbox","isTabbableWithoutFlexbox","isTabbable","queryTabbable","_isTabbable","compareDomPosition","a","b","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","sortDomOrder","sort","getFirstSuccessorOffset","findInsertionOffsets","resolveElement","insertions","injections","insertElementsAtOffsets","inserted","insertion","remove","args","splice","apply","mergeInDomOrder","_list","_elements","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_classCallCheck","instance","Maps","maps","getAreasFor","addMapByName","extractAreasFromList","sortArea","usemaps","image","_createClass$1","_classCallCheck$1","Shadows","sortElements","hostCounter","inHost","inDocument","hosts","_registerHost","_sortingId","parentHost","_registerHostParent","_registerElement","extractElements","_injectHosts","_replaceHosts","_cleanup","_context","_merge","merged","_resolveHostElement","bind","sortShadowed","shadows","sortTabindex","indexes","normal","reduceRight","previous","current","supports$8","moveContextToBeginning","pos","tmp","queryTabsequence","createShadowRoot","keycode","tab","left","up","right","down","pageUp","pageDown","end","home","enter","escape","space","shift","capsLock","ctrl","alt","meta","pause","insert","delete","backspace","_alias","n","_n","code","numCode","_n2","_code","name$1","fromCharCode","modifier","modifierSequence","createExpectedModifiers","ignoreModifiers","altKey","ctrlKey","metaKey","shiftKey","resolveModifiers","modifiers","expected","token","propertyName","resolveKey","matchModifiers","event","prop","keyBinding","text","_text","tokens","_modifiers","_keyCodes","keyCodes","getParentComparator","includeSelf","isChildOf","DOCUMENT_POSITION_CONTAINED_BY","isParentOf","whenKey","bindings","mapKeys","registerBinding","addCallback","handleKeyDown","defaultPrevented","isParentOfElement","keyCode","which","_event","disengage","addEventListener","removeEventListener","altShiftTab","preventDefault","sequence","backward","first","last","source","currentIndex","found","index"],"sources":["../../../fast-refresh-overlay/helpers/focus-trap.js"],"sourcesContent":["/* eslint-disable */\n// Adapted from https://github.com/medialize/ally.js\n// License: MIT\n// Copyright (c) 2015 Rodney Rehm\n//\n// Entrypoint: ally.js/maintain/tab-focus\n\nimport _platform from 'platform'\nimport cssEscape from 'css.escape'\n\n// input may be undefined, selector-tring, Node, NodeList, HTMLCollection, array of Nodes\n// yes, to some extent this is a bad replica of jQuery's constructor function\nfunction nodeArray(input) {\n  if (!input) {\n    return []\n  }\n\n  if (Array.isArray(input)) {\n    return input\n  }\n\n  // instanceof Node - does not work with iframes\n  if (input.nodeType !== undefined) {\n    return [input]\n  }\n\n  if (typeof input === 'string') {\n    input = document.querySelectorAll(input)\n  }\n\n  if (input.length !== undefined) {\n    return [].slice.call(input, 0)\n  }\n\n  throw new TypeError('unexpected input ' + String(input))\n}\n\nfunction contextToElement(_ref) {\n  var context = _ref.context,\n    _ref$label = _ref.label,\n    label = _ref$label === undefined ? 'context-to-element' : _ref$label,\n    resolveDocument = _ref.resolveDocument,\n    defaultToDocument = _ref.defaultToDocument\n\n  var element = nodeArray(context)[0]\n\n  if (resolveDocument && element && element.nodeType === Node.DOCUMENT_NODE) {\n    element = element.documentElement\n  }\n\n  if (!element && defaultToDocument) {\n    return document.documentElement\n  }\n\n  if (!element) {\n    throw new TypeError(label + ' requires valid options.context')\n  }\n\n  if (\n    element.nodeType !== Node.ELEMENT_NODE &&\n    element.nodeType !== Node.DOCUMENT_FRAGMENT_NODE\n  ) {\n    throw new TypeError(label + ' requires options.context to be an Element')\n  }\n\n  return element\n}\n\nfunction getShadowHost() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context\n\n  var element = contextToElement({\n    label: 'get/shadow-host',\n    context: context,\n  })\n\n  // walk up to the root\n  var container = null\n\n  while (element) {\n    container = element\n    element = element.parentNode\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType\n  // NOTE: Firefox 34 does not expose ShadowRoot.host (but 37 does)\n  if (\n    container.nodeType === container.DOCUMENT_FRAGMENT_NODE &&\n    container.host\n  ) {\n    // the root is attached to a fragment node that has a host\n    return container.host\n  }\n\n  return null\n}\n\nfunction getDocument(node) {\n  if (!node) {\n    return document\n  }\n\n  if (node.nodeType === Node.DOCUMENT_NODE) {\n    return node\n  }\n\n  return node.ownerDocument || document\n}\n\nfunction isActiveElement(context) {\n  var element = contextToElement({\n    label: 'is/active-element',\n    resolveDocument: true,\n    context: context,\n  })\n\n  var _document = getDocument(element)\n  if (_document.activeElement === element) {\n    return true\n  }\n\n  var shadowHost = getShadowHost({ context: element })\n  if (shadowHost && shadowHost.shadowRoot.activeElement === element) {\n    return true\n  }\n\n  return false\n}\n\n// [elem, elem.parent, elem.parent.parent, …, html]\n// will not contain the shadowRoot (DOCUMENT_FRAGMENT_NODE) and shadowHost\nfunction getParents() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context\n\n  var list = []\n  var element = contextToElement({\n    label: 'get/parents',\n    context: context,\n  })\n\n  while (element) {\n    list.push(element)\n    // IE does know support parentElement on SVGElement\n    element = element.parentNode\n    if (element && element.nodeType !== Node.ELEMENT_NODE) {\n      element = null\n    }\n  }\n\n  return list\n}\n\n// Element.prototype.matches may be available at a different name\n// https://developer.mozilla.org/en/docs/Web/API/Element/matches\n\nvar names = [\n  'matches',\n  'webkitMatchesSelector',\n  'mozMatchesSelector',\n  'msMatchesSelector',\n]\nvar name = null\n\nfunction findMethodName(element) {\n  names.some(function (_name) {\n    if (!element[_name]) {\n      return false\n    }\n\n    name = _name\n    return true\n  })\n}\n\nfunction elementMatches(element, selector) {\n  if (!name) {\n    findMethodName(element)\n  }\n\n  return element[name](selector)\n}\n\n// deep clone of original platform\nvar platform = JSON.parse(JSON.stringify(_platform))\n\n// operating system\nvar os = platform.os.family || ''\nvar ANDROID = os === 'Android'\nvar WINDOWS = os.slice(0, 7) === 'Windows'\nvar OSX = os === 'OS X'\nvar IOS = os === 'iOS'\n\n// layout\nvar BLINK = platform.layout === 'Blink'\nvar GECKO = platform.layout === 'Gecko'\nvar TRIDENT = platform.layout === 'Trident'\nvar EDGE = platform.layout === 'EdgeHTML'\nvar WEBKIT = platform.layout === 'WebKit'\n\n// browser version (not layout engine version!)\nvar version = parseFloat(platform.version)\nvar majorVersion = Math.floor(version)\nplatform.majorVersion = majorVersion\n\nplatform.is = {\n  // operating system\n  ANDROID: ANDROID,\n  WINDOWS: WINDOWS,\n  OSX: OSX,\n  IOS: IOS,\n  // layout\n  BLINK: BLINK, // \"Chrome\", \"Chrome Mobile\", \"Opera\"\n  GECKO: GECKO, // \"Firefox\"\n  TRIDENT: TRIDENT, // \"Internet Explorer\"\n  EDGE: EDGE, // \"Microsoft Edge\"\n  WEBKIT: WEBKIT, // \"Safari\"\n  // INTERNET EXPLORERS\n  IE9: TRIDENT && majorVersion === 9,\n  IE10: TRIDENT && majorVersion === 10,\n  IE11: TRIDENT && majorVersion === 11,\n}\n\nfunction before() {\n  var data = {\n    // remember what had focus to restore after test\n    activeElement: document.activeElement,\n    // remember scroll positions to restore after test\n    windowScrollTop: window.scrollTop,\n    windowScrollLeft: window.scrollLeft,\n    bodyScrollTop: document.body.scrollTop,\n    bodyScrollLeft: document.body.scrollLeft,\n  }\n\n  // wrap tests in an element hidden from screen readers to prevent them\n  // from announcing focus, which can be quite irritating to the user\n  var iframe = document.createElement('iframe')\n  iframe.setAttribute(\n    'style',\n    'position:absolute; position:fixed; top:0; left:-2px; width:1px; height:1px; overflow:hidden;'\n  )\n  iframe.setAttribute('aria-live', 'off')\n  iframe.setAttribute('aria-busy', 'true')\n  iframe.setAttribute('aria-hidden', 'true')\n  document.body.appendChild(iframe)\n\n  var _window = iframe.contentWindow\n  var _document = _window.document\n\n  _document.open()\n  _document.close()\n  var wrapper = _document.createElement('div')\n  _document.body.appendChild(wrapper)\n\n  data.iframe = iframe\n  data.wrapper = wrapper\n  data.window = _window\n  data.document = _document\n\n  return data\n}\n\n// options.element:\n//  {string} element name\n//  {function} callback(wrapper, document) to generate an element\n// options.mutate: (optional)\n//  {function} callback(element, wrapper, document) to manipulate element prior to focus-test.\n//             Can return DOMElement to define focus target (default: element)\n// options.validate: (optional)\n//  {function} callback(element, focusTarget, document) to manipulate test-result\nfunction test(data, options) {\n  // make sure we operate on a clean slate\n  data.wrapper.innerHTML = ''\n  // create dummy element to test focusability of\n  var element =\n    typeof options.element === 'string'\n      ? data.document.createElement(options.element)\n      : options.element(data.wrapper, data.document)\n  // allow callback to further specify dummy element\n  // and optionally define element to focus\n  var focus =\n    options.mutate && options.mutate(element, data.wrapper, data.document)\n  if (!focus && focus !== false) {\n    focus = element\n  }\n  // element needs to be part of the DOM to be focusable\n  !element.parentNode && data.wrapper.appendChild(element)\n  // test if the element with invalid tabindex can be focused\n  focus && focus.focus && focus.focus()\n  // validate test's result\n  return options.validate\n    ? options.validate(element, focus, data.document)\n    : data.document.activeElement === focus\n}\n\nfunction after(data) {\n  // restore focus to what it was before test and cleanup\n  if (data.activeElement === document.body) {\n    document.activeElement &&\n    document.activeElement.blur &&\n    document.activeElement.blur()\n    if (platform.is.IE10) {\n      // IE10 does not redirect focus to <body> when the activeElement is removed\n      document.body.focus()\n    }\n  } else {\n    data.activeElement && data.activeElement.focus && data.activeElement.focus()\n  }\n\n  document.body.removeChild(data.iframe)\n\n  // restore scroll position\n  window.scrollTop = data.windowScrollTop\n  window.scrollLeft = data.windowScrollLeft\n  document.body.scrollTop = data.bodyScrollTop\n  document.body.scrollLeft = data.bodyScrollLeft\n}\n\nfunction detectFocus(tests) {\n  var data = before()\n\n  var results = {}\n  Object.keys(tests).map(function (key) {\n    results[key] = test(data, tests[key])\n  })\n\n  after(data)\n  return results\n}\n\n// this file is overwritten by `npm run build:pre`\nvar version$1 = '1.4.1'\n\n/*\n    Facility to cache test results in localStorage.\n\n    USAGE:\n      cache.get('key');\n      cache.set('key', 'value');\n */\n\nfunction readLocalStorage(key) {\n  // allow reading from storage to retrieve previous support results\n  // even while the document does not have focus\n  var data = void 0\n\n  try {\n    data = window.localStorage && window.localStorage.getItem(key)\n    data = data ? JSON.parse(data) : {}\n  } catch (e) {\n    data = {}\n  }\n\n  return data\n}\n\nfunction writeLocalStorage(key, value) {\n  if (!document.hasFocus()) {\n    // if the document does not have focus when tests are executed, focus() may\n    // not be handled properly and events may not be dispatched immediately.\n    // This can happen when a document is reloaded while Developer Tools have focus.\n    try {\n      window.localStorage && window.localStorage.removeItem(key)\n    } catch (e) {\n      // ignore\n    }\n\n    return\n  }\n\n  try {\n    window.localStorage &&\n    window.localStorage.setItem(key, JSON.stringify(value))\n  } catch (e) {\n    // ignore\n  }\n}\n\nvar userAgent =\n  (typeof window !== 'undefined' && window.navigator.userAgent) || ''\nvar cacheKey = 'ally-supports-cache'\nvar cache = readLocalStorage(cacheKey)\n\n// update the cache if ally or the user agent changed (newer version, etc)\nif (cache.userAgent !== userAgent || cache.version !== version$1) {\n  cache = {}\n}\n\ncache.userAgent = userAgent\ncache.version = version$1\n\nvar cache$1 = {\n  get: function get() {\n    return cache\n  },\n  set: function set(values) {\n    Object.keys(values).forEach(function (key) {\n      cache[key] = values[key]\n    })\n\n    cache.time = new Date().toISOString()\n    writeLocalStorage(cacheKey, cache)\n  },\n}\n\nfunction cssShadowPiercingDeepCombinator() {\n  var combinator = void 0\n\n  // see https://dev.w3.org/csswg/css-scoping-1/#deep-combinator\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1117572\n  // https://code.google.com/p/chromium/issues/detail?id=446051\n  try {\n    document.querySelector('html >>> :first-child')\n    combinator = '>>>'\n  } catch (noArrowArrowArrow) {\n    try {\n      // old syntax supported at least up to Chrome 41\n      // https://code.google.com/p/chromium/issues/detail?id=446051\n      document.querySelector('html /deep/ :first-child')\n      combinator = '/deep/'\n    } catch (noDeep) {\n      combinator = ''\n    }\n  }\n\n  return combinator\n}\n\nvar gif =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\nvar focusAreaImgTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"image-map-tabindex-test\">' +\n      '<area shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#image-map-tabindex-test\" tabindex=\"-1\" alt=\"\" src=\"' +\n      gif +\n      '\">'\n\n    return element.querySelector('area')\n  },\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\nvar focusAreaTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"image-map-tabindex-test\">' +\n      '<area href=\"#void\" tabindex=\"-1\" shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#image-map-tabindex-test\" alt=\"\" src=\"' +\n      gif +\n      '\">'\n\n    return false\n  },\n  validate: function validate(element, focusTarget, _document) {\n    if (platform.is.GECKO) {\n      // fixes https://github.com/medialize/ally.js/issues/35\n      // Firefox loads the DataURI asynchronously, causing a false-negative\n      return true\n    }\n\n    var focus = element.querySelector('area')\n    focus.focus()\n    return _document.activeElement === focus\n  },\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\nvar focusAreaWithoutHref = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"image-map-area-href-test\">' +\n      '<area shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#image-map-area-href-test\" alt=\"\" src=\"' +\n      gif +\n      '\">'\n\n    return element.querySelector('area')\n  },\n  validate: function validate(element, focusTarget, _document) {\n    if (platform.is.GECKO) {\n      // fixes https://github.com/medialize/ally.js/issues/35\n      // Firefox loads the DataURI asynchronously, causing a false-negative\n      return true\n    }\n\n    return _document.activeElement === focusTarget\n  },\n}\n\nvar focusAudioWithoutControls = {\n  name: 'can-focus-audio-without-controls',\n  element: 'audio',\n  mutate: function mutate(element) {\n    try {\n      // invalid media file can trigger warning in console, data-uri to prevent HTTP request\n      element.setAttribute('src', gif)\n    } catch (e) {\n      // IE9 may throw \"Error: Not implemented\"\n    }\n  },\n}\n\nvar invalidGif =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ'\n\n// NOTE: https://github.com/medialize/ally.js/issues/35\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\nvar focusBrokenImageMap = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"broken-image-map-test\"><area href=\"#void\" shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#broken-image-map-test\" alt=\"\" src=\"' +\n      invalidGif +\n      '\">'\n\n    return element.querySelector('area')\n  },\n}\n\n// Children of focusable elements with display:flex are focusable in IE10-11\nvar focusChildrenOfFocusableFlexbox = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', '-1')\n    element.setAttribute(\n      'style',\n      'display: -webkit-flex; display: -ms-flexbox; display: flex;'\n    )\n    element.innerHTML = '<span style=\"display: block;\">hello</span>'\n    return element.querySelector('span')\n  },\n}\n\n// fieldset[tabindex=0][disabled] should not be focusable, but Blink and WebKit disagree\n// @specification https://www.w3.org/TR/html5/disabled-elements.html#concept-element-disabled\n// @browser-issue Chromium https://crbug.com/453847\n// @browser-issue WebKit https://bugs.webkit.org/show_bug.cgi?id=141086\nvar focusFieldsetDisabled = {\n  element: 'fieldset',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', 0)\n    element.setAttribute('disabled', 'disabled')\n  },\n}\n\nvar focusFieldset = {\n  element: 'fieldset',\n  mutate: function mutate(element) {\n    element.innerHTML = '<legend>legend</legend><p>content</p>'\n  },\n}\n\n// elements with display:flex are focusable in IE10-11\nvar focusFlexboxContainer = {\n  element: 'span',\n  mutate: function mutate(element) {\n    element.setAttribute(\n      'style',\n      'display: -webkit-flex; display: -ms-flexbox; display: flex;'\n    )\n    element.innerHTML = '<span style=\"display: block;\">hello</span>'\n  },\n}\n\n// form[tabindex=0][disabled] should be focusable as the\n// specification doesn't know the disabled attribute on the form element\n// @specification https://www.w3.org/TR/html5/forms.html#the-form-element\nvar focusFormDisabled = {\n  element: 'form',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', 0)\n    element.setAttribute('disabled', 'disabled')\n  },\n}\n\n// NOTE: https://github.com/medialize/ally.js/issues/35\n// fixes https://github.com/medialize/ally.js/issues/20\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-ismap\nvar focusImgIsmap = {\n  element: 'a',\n  mutate: function mutate(element) {\n    element.href = '#void'\n    element.innerHTML = '<img ismap src=\"' + gif + '\" alt=\"\">'\n    return element.querySelector('img')\n  },\n}\n\n// NOTE: https://github.com/medialize/ally.js/issues/35\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\nvar focusImgUsemapTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"image-map-tabindex-test\"><area href=\"#void\" shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#image-map-tabindex-test\" tabindex=\"-1\" alt=\"\" ' +\n      'src=\"' +\n      gif +\n      '\">'\n\n    return element.querySelector('img')\n  },\n}\n\nvar focusInHiddenIframe = {\n  element: function element(wrapper, _document) {\n    var iframe = _document.createElement('iframe')\n\n    // iframe must be part of the DOM before accessing the contentWindow is possible\n    wrapper.appendChild(iframe)\n\n    // create the iframe's default document (<html><head></head><body></body></html>)\n    var iframeDocument = iframe.contentWindow.document\n    iframeDocument.open()\n    iframeDocument.close()\n    return iframe\n  },\n  mutate: function mutate(iframe) {\n    iframe.style.visibility = 'hidden'\n\n    var iframeDocument = iframe.contentWindow.document\n    var input = iframeDocument.createElement('input')\n    iframeDocument.body.appendChild(input)\n    return input\n  },\n  validate: function validate(iframe) {\n    var iframeDocument = iframe.contentWindow.document\n    var focus = iframeDocument.querySelector('input')\n    return iframeDocument.activeElement === focus\n  },\n}\n\nvar result = !platform.is.WEBKIT\n\nfunction focusInZeroDimensionObject() {\n  return result\n}\n\n// Firefox allows *any* value and treats invalid values like tabindex=\"-1\"\n// @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1128054\nvar focusInvalidTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', 'invalid-value')\n  },\n}\n\nvar focusLabelTabindex = {\n  element: 'label',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', '-1')\n  },\n  validate: function validate(element, focusTarget, _document) {\n    // force layout in Chrome 49, otherwise the element won't be focusable\n    /* eslint-disable no-unused-vars */\n    var variableToPreventDeadCodeElimination = element.offsetHeight\n    /* eslint-enable no-unused-vars */\n    element.focus()\n    return _document.activeElement === element\n  },\n}\n\nvar svg =\n  'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtb' +\n  'G5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0ic3ZnIj48dGV4dCB4PSIxMCIgeT0iMjAiIGlkPSJ' +\n  'zdmctbGluay10ZXh0Ij50ZXh0PC90ZXh0Pjwvc3ZnPg=='\n\n// Note: IE10 on BrowserStack does not like this test\n\nvar focusObjectSvgHidden = {\n  element: 'object',\n  mutate: function mutate(element) {\n    element.setAttribute('type', 'image/svg+xml')\n    element.setAttribute('data', svg)\n    element.setAttribute('width', '200')\n    element.setAttribute('height', '50')\n    element.style.visibility = 'hidden'\n  },\n}\n\n// Note: IE10 on BrowserStack does not like this test\n\nvar focusObjectSvg = {\n  name: 'can-focus-object-svg',\n  element: 'object',\n  mutate: function mutate(element) {\n    element.setAttribute('type', 'image/svg+xml')\n    element.setAttribute('data', svg)\n    element.setAttribute('width', '200')\n    element.setAttribute('height', '50')\n  },\n  validate: function validate(element, focusTarget, _document) {\n    if (platform.is.GECKO) {\n      // Firefox seems to be handling the object creation asynchronously and thereby produces a false negative test result.\n      // Because we know Firefox is able to focus object elements referencing SVGs, we simply cheat by sniffing the user agent string\n      return true\n    }\n\n    return _document.activeElement === element\n  },\n}\n\n// Every Environment except IE9 considers SWF objects focusable\nvar result$1 = !platform.is.IE9\n\nfunction focusObjectSwf() {\n  return result$1\n}\n\nvar focusRedirectImgUsemap = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<map name=\"focus-redirect-img-usemap\"><area href=\"#void\" shape=\"rect\" coords=\"63,19,144,45\"></map>' +\n      '<img usemap=\"#focus-redirect-img-usemap\" alt=\"\" ' +\n      'src=\"' +\n      gif +\n      '\">'\n\n    // focus the <img>, not the <div>\n    return element.querySelector('img')\n  },\n  validate: function validate(element, focusTarget, _document) {\n    var target = element.querySelector('area')\n    return _document.activeElement === target\n  },\n}\n\n// see https://jsbin.com/nenirisage/edit?html,js,console,output\n\nvar focusRedirectLegend = {\n  element: 'fieldset',\n  mutate: function mutate(element) {\n    element.innerHTML =\n      '<legend>legend</legend><input tabindex=\"-1\"><input tabindex=\"0\">'\n    // take care of focus in validate();\n    return false\n  },\n  validate: function validate(element, focusTarget, _document) {\n    var focusable = element.querySelector('input[tabindex=\"-1\"]')\n    var tabbable = element.querySelector('input[tabindex=\"0\"]')\n\n    // Firefox requires this test to focus the <fieldset> first, while this is not necessary in\n    // https://jsbin.com/nenirisage/edit?html,js,console,output\n    element.focus()\n\n    element.querySelector('legend').focus()\n    return (\n      (_document.activeElement === focusable && 'focusable') ||\n      (_document.activeElement === tabbable && 'tabbable') ||\n      ''\n    )\n  },\n}\n\n// https://github.com/medialize/ally.js/issues/21\nvar focusScrollBody = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('style', 'width: 100px; height: 50px; overflow: auto;')\n    element.innerHTML =\n      '<div style=\"width: 500px; height: 40px;\">scrollable content</div>'\n    return element.querySelector('div')\n  },\n}\n\n// https://github.com/medialize/ally.js/issues/21\nvar focusScrollContainerWithoutOverflow = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('style', 'width: 100px; height: 50px;')\n    element.innerHTML =\n      '<div style=\"width: 500px; height: 40px;\">scrollable content</div>'\n  },\n}\n\n// https://github.com/medialize/ally.js/issues/21\nvar focusScrollContainer = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('style', 'width: 100px; height: 50px; overflow: auto;')\n    element.innerHTML =\n      '<div style=\"width: 500px; height: 40px;\">scrollable content</div>'\n  },\n}\n\nvar focusSummary = {\n  element: 'details',\n  mutate: function mutate(element) {\n    element.innerHTML = '<summary>foo</summary><p>content</p>'\n    return element.firstElementChild\n  },\n}\n\nfunction makeFocusableForeignObject() {\n  var fragment = document.createElement('div')\n  fragment.innerHTML =\n    '<svg><foreignObject width=\"30\" height=\"30\">\\n      <input type=\"text\"/>\\n  </foreignObject></svg>'\n\n  return fragment.firstChild.firstChild\n}\n\nfunction focusSvgForeignObjectHack(element) {\n  // Edge13, Edge14: foreignObject focus hack\n  // https://jsbin.com/kunehinugi/edit?html,js,output\n  // https://jsbin.com/fajagi/3/edit?html,js,output\n  var isSvgElement =\n    element.ownerSVGElement || element.nodeName.toLowerCase() === 'svg'\n  if (!isSvgElement) {\n    return false\n  }\n\n  // inject and focus an <input> element into the SVG element to receive focus\n  var foreignObject = makeFocusableForeignObject()\n  element.appendChild(foreignObject)\n  var input = foreignObject.querySelector('input')\n  input.focus()\n\n  // upon disabling the activeElement, IE and Edge\n  // will not shift focus to <body> like all the other\n  // browsers, but instead find the first focusable\n  // ancestor and shift focus to that\n  input.disabled = true\n\n  // clean up\n  element.removeChild(foreignObject)\n  return true\n}\n\nfunction generate(element) {\n  return (\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">' +\n    element +\n    '</svg>'\n  )\n}\n\nfunction focus(element) {\n  if (element.focus) {\n    return\n  }\n\n  try {\n    HTMLElement.prototype.focus.call(element)\n  } catch (e) {\n    focusSvgForeignObjectHack(element)\n  }\n}\n\nfunction validate(element, focusTarget, _document) {\n  focus(focusTarget)\n  return _document.activeElement === focusTarget\n}\n\nvar focusSvgFocusableAttribute = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate('<text focusable=\"true\">a</text>')\n    return element.querySelector('text')\n  },\n  validate: validate,\n}\n\nvar focusSvgTabindexAttribute = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate('<text tabindex=\"0\">a</text>')\n    return element.querySelector('text')\n  },\n  validate: validate,\n}\n\nvar focusSvgNegativeTabindexAttribute = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate('<text tabindex=\"-1\">a</text>')\n    return element.querySelector('text')\n  },\n  validate: validate,\n}\n\nvar focusSvgUseTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate(\n      [\n        '<g id=\"ally-test-target\"><a xlink:href=\"#void\"><text>link</text></a></g>',\n        '<use xlink:href=\"#ally-test-target\" x=\"0\" y=\"0\" tabindex=\"-1\" />',\n      ].join('')\n    )\n\n    return element.querySelector('use')\n  },\n  validate: validate,\n}\n\nvar focusSvgForeignobjectTabindex = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate(\n      '<foreignObject tabindex=\"-1\"><input type=\"text\" /></foreignObject>'\n    )\n    // Safari 8's quersSelector() can't identify foreignObject, but getElementyByTagName() can\n    return (\n      element.querySelector('foreignObject') ||\n      element.getElementsByTagName('foreignObject')[0]\n    )\n  },\n  validate: validate,\n}\n\n// Firefox seems to be handling the SVG-document-in-iframe creation asynchronously\n// and thereby produces a false negative test result. Thus the test is pointless\n// and we resort to UA sniffing once again.\n// see http://jsbin.com/vunadohoko/1/edit?js,console,output\n\nvar result$2 = Boolean(\n  platform.is.GECKO &&\n  typeof SVGElement !== 'undefined' &&\n  SVGElement.prototype.focus\n)\n\nfunction focusSvgInIframe() {\n  return result$2\n}\n\nvar focusSvg = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.innerHTML = generate('')\n    return element.firstChild\n  },\n  validate: validate,\n}\n\n// Firefox allows *any* value and treats invalid values like tabindex=\"-1\"\n// @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1128054\nvar focusTabindexTrailingCharacters = {\n  element: 'div',\n  mutate: function mutate(element) {\n    element.setAttribute('tabindex', '3x')\n  },\n}\n\nvar focusTable = {\n  element: 'table',\n  mutate: function mutate(element, wrapper, _document) {\n    // IE9 has a problem replacing TBODY contents with innerHTML.\n    // https://stackoverflow.com/a/8097055/515124\n    // element.innerHTML = '<tr><td>cell</td></tr>';\n    var fragment = _document.createDocumentFragment()\n    fragment.innerHTML = '<tr><td>cell</td></tr>'\n    element.appendChild(fragment)\n  },\n}\n\nvar focusVideoWithoutControls = {\n  element: 'video',\n  mutate: function mutate(element) {\n    try {\n      // invalid media file can trigger warning in console, data-uri to prevent HTTP request\n      element.setAttribute('src', gif)\n    } catch (e) {\n      // IE9 may throw \"Error: Not implemented\"\n    }\n  },\n}\n\n// https://jsbin.com/vafaba/3/edit?html,js,console,output\nvar result$3 = platform.is.GECKO || platform.is.TRIDENT || platform.is.EDGE\n\nfunction tabsequenceAreaAtImgPosition() {\n  return result$3\n}\n\nvar testCallbacks = {\n  cssShadowPiercingDeepCombinator: cssShadowPiercingDeepCombinator,\n  focusInZeroDimensionObject: focusInZeroDimensionObject,\n  focusObjectSwf: focusObjectSwf,\n  focusSvgInIframe: focusSvgInIframe,\n  tabsequenceAreaAtImgPosition: tabsequenceAreaAtImgPosition,\n}\n\nvar testDescriptions = {\n  focusAreaImgTabindex: focusAreaImgTabindex,\n  focusAreaTabindex: focusAreaTabindex,\n  focusAreaWithoutHref: focusAreaWithoutHref,\n  focusAudioWithoutControls: focusAudioWithoutControls,\n  focusBrokenImageMap: focusBrokenImageMap,\n  focusChildrenOfFocusableFlexbox: focusChildrenOfFocusableFlexbox,\n  focusFieldsetDisabled: focusFieldsetDisabled,\n  focusFieldset: focusFieldset,\n  focusFlexboxContainer: focusFlexboxContainer,\n  focusFormDisabled: focusFormDisabled,\n  focusImgIsmap: focusImgIsmap,\n  focusImgUsemapTabindex: focusImgUsemapTabindex,\n  focusInHiddenIframe: focusInHiddenIframe,\n  focusInvalidTabindex: focusInvalidTabindex,\n  focusLabelTabindex: focusLabelTabindex,\n  focusObjectSvg: focusObjectSvg,\n  focusObjectSvgHidden: focusObjectSvgHidden,\n  focusRedirectImgUsemap: focusRedirectImgUsemap,\n  focusRedirectLegend: focusRedirectLegend,\n  focusScrollBody: focusScrollBody,\n  focusScrollContainerWithoutOverflow: focusScrollContainerWithoutOverflow,\n  focusScrollContainer: focusScrollContainer,\n  focusSummary: focusSummary,\n  focusSvgFocusableAttribute: focusSvgFocusableAttribute,\n  focusSvgTabindexAttribute: focusSvgTabindexAttribute,\n  focusSvgNegativeTabindexAttribute: focusSvgNegativeTabindexAttribute,\n  focusSvgUseTabindex: focusSvgUseTabindex,\n  focusSvgForeignobjectTabindex: focusSvgForeignobjectTabindex,\n  focusSvg: focusSvg,\n  focusTabindexTrailingCharacters: focusTabindexTrailingCharacters,\n  focusTable: focusTable,\n  focusVideoWithoutControls: focusVideoWithoutControls,\n}\n\nfunction executeTests() {\n  var results = detectFocus(testDescriptions)\n  Object.keys(testCallbacks).forEach(function (key) {\n    results[key] = testCallbacks[key]()\n  })\n\n  return results\n}\n\nvar supportsCache = null\n\nfunction _supports() {\n  if (supportsCache) {\n    return supportsCache\n  }\n\n  supportsCache = cache$1.get()\n  if (!supportsCache.time) {\n    cache$1.set(executeTests())\n    supportsCache = cache$1.get()\n  }\n\n  return supportsCache\n}\n\nvar supports = void 0\n\n// https://www.w3.org/TR/html5/infrastructure.html#rules-for-parsing-integers\n// NOTE: all browsers agree to allow trailing spaces as well\nvar validIntegerPatternNoTrailing = /^\\s*(-|\\+)?[0-9]+\\s*$/\nvar validIntegerPatternWithTrailing = /^\\s*(-|\\+)?[0-9]+.*$/\n\nfunction isValidTabindex(context) {\n  if (!supports) {\n    supports = _supports()\n  }\n\n  var validIntegerPattern = supports.focusTabindexTrailingCharacters\n    ? validIntegerPatternWithTrailing\n    : validIntegerPatternNoTrailing\n\n  var element = contextToElement({\n    label: 'is/valid-tabindex',\n    resolveDocument: true,\n    context: context,\n  })\n\n  // Edge 14 has a capitalization problem on SVG elements,\n  // see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/9282058/\n  var hasTabindex = element.hasAttribute('tabindex')\n  var hasTabIndex = element.hasAttribute('tabIndex')\n\n  if (!hasTabindex && !hasTabIndex) {\n    return false\n  }\n\n  // older Firefox and Internet Explorer don't support tabindex on SVG elements\n  var isSvgElement =\n    element.ownerSVGElement || element.nodeName.toLowerCase() === 'svg'\n  if (isSvgElement && !supports.focusSvgTabindexAttribute) {\n    return false\n  }\n\n  // @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1128054\n  if (supports.focusInvalidTabindex) {\n    return true\n  }\n\n  // an element matches the tabindex selector even if its value is invalid\n  var tabindex = element.getAttribute(hasTabindex ? 'tabindex' : 'tabIndex')\n  // IE11 parses tabindex=\"\" as the value \"-32768\"\n  // @browser-issue Trident https://connect.microsoft.com/IE/feedback/details/1072965\n  if (tabindex === '-32768') {\n    return false\n  }\n\n  return Boolean(tabindex && validIntegerPattern.test(tabindex))\n}\n\nfunction tabindexValue(element) {\n  if (!isValidTabindex(element)) {\n    return null\n  }\n\n  // Edge 14 has a capitalization problem on SVG elements,\n  // see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/9282058/\n  var hasTabindex = element.hasAttribute('tabindex')\n  var attributeName = hasTabindex ? 'tabindex' : 'tabIndex'\n\n  // @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=1128054\n  var tabindex = parseInt(element.getAttribute(attributeName), 10)\n  return isNaN(tabindex) ? -1 : tabindex\n}\n\n// this is a shared utility file for focus-relevant.js and tabbable.js\n// separate testing of this file's functions is not necessary,\n// as they're implicitly tested by way of the consumers\n\nfunction isUserModifyWritable(style) {\n  // https://www.w3.org/TR/1999/WD-css3-userint-19990916#user-modify\n  // https://github.com/medialize/ally.js/issues/17\n  var userModify = style.webkitUserModify || ''\n  return Boolean(userModify && userModify.indexOf('write') !== -1)\n}\n\nfunction hasCssOverflowScroll(style) {\n  return [\n    style.getPropertyValue('overflow'),\n    style.getPropertyValue('overflow-x'),\n    style.getPropertyValue('overflow-y'),\n  ].some(function (overflow) {\n    return overflow === 'auto' || overflow === 'scroll'\n  })\n}\n\nfunction hasCssDisplayFlex(style) {\n  return style.display.indexOf('flex') > -1\n}\n\nfunction isScrollableContainer(element, nodeName, parentNodeName, parentStyle) {\n  if (nodeName !== 'div' && nodeName !== 'span') {\n    // Internet Explorer advances scrollable containers and bodies to focusable\n    // only if the scrollable container is <div> or <span> - this does *not*\n    // happen for <section>, <article>, …\n    return false\n  }\n\n  if (\n    parentNodeName &&\n    parentNodeName !== 'div' &&\n    parentNodeName !== 'span' &&\n    !hasCssOverflowScroll(parentStyle)\n  ) {\n    return false\n  }\n\n  return (\n    element.offsetHeight < element.scrollHeight ||\n    element.offsetWidth < element.scrollWidth\n  )\n}\n\nvar supports$1 = void 0\n\nfunction isFocusRelevantRules() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    _ref$except = _ref.except,\n    except =\n      _ref$except === undefined\n        ? {\n          flexbox: false,\n          scrollable: false,\n          shadow: false,\n        }\n        : _ref$except\n\n  if (!supports$1) {\n    supports$1 = _supports()\n  }\n\n  var element = contextToElement({\n    label: 'is/focus-relevant',\n    resolveDocument: true,\n    context: context,\n  })\n\n  if (!except.shadow && element.shadowRoot) {\n    // a ShadowDOM host receives focus when the focus moves to its content\n    return true\n  }\n\n  var nodeName = element.nodeName.toLowerCase()\n\n  if (nodeName === 'input' && element.type === 'hidden') {\n    // input[type=\"hidden\"] supports.cannot be focused\n    return false\n  }\n\n  if (\n    nodeName === 'input' ||\n    nodeName === 'select' ||\n    nodeName === 'button' ||\n    nodeName === 'textarea'\n  ) {\n    return true\n  }\n\n  if (nodeName === 'legend' && supports$1.focusRedirectLegend) {\n    // specifics filtered in is/focusable\n    return true\n  }\n\n  if (nodeName === 'label') {\n    // specifics filtered in is/focusable\n    return true\n  }\n\n  if (nodeName === 'area') {\n    // specifics filtered in is/focusable\n    return true\n  }\n\n  if (nodeName === 'a' && element.hasAttribute('href')) {\n    return true\n  }\n\n  if (nodeName === 'object' && element.hasAttribute('usemap')) {\n    // object[usemap] is not focusable in any browser\n    return false\n  }\n\n  if (nodeName === 'object') {\n    var svgType = element.getAttribute('type')\n    if (!supports$1.focusObjectSvg && svgType === 'image/svg+xml') {\n      // object[type=\"image/svg+xml\"] is not focusable in Internet Explorer\n      return false\n    } else if (\n      !supports$1.focusObjectSwf &&\n      svgType === 'application/x-shockwave-flash'\n    ) {\n      // object[type=\"application/x-shockwave-flash\"] is not focusable in Internet Explorer 9\n      return false\n    }\n  }\n\n  if (nodeName === 'iframe' || nodeName === 'object') {\n    // browsing context containers\n    return true\n  }\n\n  if (nodeName === 'embed' || nodeName === 'keygen') {\n    // embed is considered focus-relevant but not focusable\n    // see https://github.com/medialize/ally.js/issues/82\n    return true\n  }\n\n  if (element.hasAttribute('contenteditable')) {\n    // also see CSS property user-modify below\n    return true\n  }\n\n  if (\n    nodeName === 'audio' &&\n    (supports$1.focusAudioWithoutControls || element.hasAttribute('controls'))\n  ) {\n    return true\n  }\n\n  if (\n    nodeName === 'video' &&\n    (supports$1.focusVideoWithoutControls || element.hasAttribute('controls'))\n  ) {\n    return true\n  }\n\n  if (supports$1.focusSummary && nodeName === 'summary') {\n    return true\n  }\n\n  var validTabindex = isValidTabindex(element)\n\n  if (nodeName === 'img' && element.hasAttribute('usemap')) {\n    // Gecko, Trident and Edge do not allow an image with an image map and tabindex to be focused,\n    // it appears the tabindex is overruled so focus is still forwarded to the <map>\n    return (\n      (validTabindex && supports$1.focusImgUsemapTabindex) ||\n      supports$1.focusRedirectImgUsemap\n    )\n  }\n\n  if (supports$1.focusTable && (nodeName === 'table' || nodeName === 'td')) {\n    // IE10-11 supports.can focus <table> and <td>\n    return true\n  }\n\n  if (supports$1.focusFieldset && nodeName === 'fieldset') {\n    // IE10-11 supports.can focus <fieldset>\n    return true\n  }\n\n  var isSvgElement = nodeName === 'svg'\n  var isSvgContent = element.ownerSVGElement\n  var focusableAttribute = element.getAttribute('focusable')\n  var tabindex = tabindexValue(element)\n\n  if (\n    nodeName === 'use' &&\n    tabindex !== null &&\n    !supports$1.focusSvgUseTabindex\n  ) {\n    // <use> cannot be made focusable by adding a tabindex attribute anywhere but Blink and WebKit\n    return false\n  }\n\n  if (nodeName === 'foreignobject') {\n    // <use> can only be made focusable in Blink and WebKit\n    return tabindex !== null && supports$1.focusSvgForeignobjectTabindex\n  }\n\n  if (elementMatches(element, 'svg a') && element.hasAttribute('xlink:href')) {\n    return true\n  }\n\n  if (\n    (isSvgElement || isSvgContent) &&\n    element.focus &&\n    !supports$1.focusSvgNegativeTabindexAttribute &&\n    tabindex < 0\n  ) {\n    // Firefox 51 and 52 treat any natively tabbable SVG element with\n    // tabindex=\"-1\" as tabbable and everything else as inert\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=1302340\n    return false\n  }\n\n  if (isSvgElement) {\n    return (\n      validTabindex ||\n      supports$1.focusSvg ||\n      supports$1.focusSvgInIframe ||\n      // Internet Explorer understands the focusable attribute introduced in SVG Tiny 1.2\n      Boolean(\n        supports$1.focusSvgFocusableAttribute &&\n        focusableAttribute &&\n        focusableAttribute === 'true'\n      )\n    )\n  }\n\n  if (isSvgContent) {\n    if (supports$1.focusSvgTabindexAttribute && validTabindex) {\n      return true\n    }\n\n    if (supports$1.focusSvgFocusableAttribute) {\n      // Internet Explorer understands the focusable attribute introduced in SVG Tiny 1.2\n      return focusableAttribute === 'true'\n    }\n  }\n\n  // https://www.w3.org/TR/html5/editing.html#sequential-focus-navigation-and-the-tabindex-attribute\n  if (validTabindex) {\n    return true\n  }\n\n  var style = window.getComputedStyle(element, null)\n  if (isUserModifyWritable(style)) {\n    return true\n  }\n\n  if (\n    supports$1.focusImgIsmap &&\n    nodeName === 'img' &&\n    element.hasAttribute('ismap')\n  ) {\n    // IE10-11 considers the <img> in <a href><img ismap> focusable\n    // https://github.com/medialize/ally.js/issues/20\n    var hasLinkParent = getParents({ context: element }).some(function (\n      parent\n    ) {\n      return (\n        parent.nodeName.toLowerCase() === 'a' && parent.hasAttribute('href')\n      )\n    })\n\n    if (hasLinkParent) {\n      return true\n    }\n  }\n\n  // https://github.com/medialize/ally.js/issues/21\n  if (!except.scrollable && supports$1.focusScrollContainer) {\n    if (supports$1.focusScrollContainerWithoutOverflow) {\n      // Internet Explorer does will consider the scrollable area focusable\n      // if the element is a <div> or a <span> and it is in fact scrollable,\n      // regardless of the CSS overflow property\n      if (isScrollableContainer(element, nodeName)) {\n        return true\n      }\n    } else if (hasCssOverflowScroll(style)) {\n      // Firefox requires proper overflow setting, IE does not necessarily\n      // https://developer.mozilla.org/en-US/docs/Web/CSS/overflow\n      return true\n    }\n  }\n\n  if (\n    !except.flexbox &&\n    supports$1.focusFlexboxContainer &&\n    hasCssDisplayFlex(style)\n  ) {\n    // elements with display:flex are focusable in IE10-11\n    return true\n  }\n\n  var parent = element.parentElement\n  if (!except.scrollable && parent) {\n    var parentNodeName = parent.nodeName.toLowerCase()\n    var parentStyle = window.getComputedStyle(parent, null)\n    if (\n      supports$1.focusScrollBody &&\n      isScrollableContainer(parent, nodeName, parentNodeName, parentStyle)\n    ) {\n      // scrollable bodies are focusable Internet Explorer\n      // https://github.com/medialize/ally.js/issues/21\n      return true\n    }\n\n    // Children of focusable elements with display:flex are focusable in IE10-11\n    if (supports$1.focusChildrenOfFocusableFlexbox) {\n      if (hasCssDisplayFlex(parentStyle)) {\n        return true\n      }\n    }\n  }\n\n  // NOTE: elements marked as inert are not focusable,\n  // but that property is not exposed to the DOM\n  // https://www.w3.org/TR/html5/editing.html#inert\n\n  return false\n}\n\n// bind exceptions to an iterator callback\nisFocusRelevantRules.except = function () {\n  var except =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var isFocusRelevant = function isFocusRelevant(context) {\n    return isFocusRelevantRules({\n      context: context,\n      except: except,\n    })\n  }\n\n  isFocusRelevant.rules = isFocusRelevantRules\n  return isFocusRelevant\n}\n\n// provide isFocusRelevant(context) as default iterator callback\nvar isFocusRelevant = isFocusRelevantRules.except({})\n\nfunction findIndex(array, callback) {\n  // attempt to use native or polyfilled Array#findIndex first\n  if (array.findIndex) {\n    return array.findIndex(callback)\n  }\n\n  var length = array.length\n\n  // shortcut if the array is empty\n  if (length === 0) {\n    return -1\n  }\n\n  // otherwise loop over array\n  for (var i = 0; i < length; i++) {\n    if (callback(array[i], i, array)) {\n      return i\n    }\n  }\n\n  return -1\n}\n\nfunction getContentDocument(node) {\n  try {\n    // works on <object> and <iframe>\n    return (\n      node.contentDocument ||\n      // works on <object> and <iframe>\n      (node.contentWindow && node.contentWindow.document) ||\n      // works on <object> and <iframe> that contain SVG\n      (node.getSVGDocument && node.getSVGDocument()) ||\n      null\n    )\n  } catch (e) {\n    // SecurityError: Failed to read the 'contentDocument' property from 'HTMLObjectElement'\n    // also IE may throw member not found exception e.g. on <object type=\"image/png\">\n    return null\n  }\n}\n\nfunction getWindow(node) {\n  var _document = getDocument(node)\n  return _document.defaultView || window\n}\n\nvar shadowPrefix = void 0\n\nfunction selectInShadows(selector) {\n  if (typeof shadowPrefix !== 'string') {\n    var operator = cssShadowPiercingDeepCombinator()\n    if (operator) {\n      shadowPrefix = ', html ' + operator + ' '\n    }\n  }\n\n  if (!shadowPrefix) {\n    return selector\n  }\n\n  return (\n    selector +\n    shadowPrefix +\n    selector\n      .replace(/\\s*,\\s*/g, ',')\n      .split(',')\n      .join(shadowPrefix)\n  )\n}\n\nvar selector = void 0\n\nfunction findDocumentHostElement(_window) {\n  if (!selector) {\n    selector = selectInShadows('object, iframe')\n  }\n\n  if (_window._frameElement !== undefined) {\n    return _window._frameElement\n  }\n\n  _window._frameElement = null\n\n  var potentialHosts = _window.parent.document.querySelectorAll(selector)\n  ;[].some.call(potentialHosts, function (element) {\n    var _document = getContentDocument(element)\n    if (_document !== _window.document) {\n      return false\n    }\n\n    _window._frameElement = element\n    return true\n  })\n\n  return _window._frameElement\n}\n\nfunction getFrameElement(element) {\n  var _window = getWindow(element)\n  if (!_window.parent || _window.parent === _window) {\n    // if there is no parent browsing context,\n    // we're not going to get a frameElement either way\n    return null\n  }\n\n  try {\n    // see https://developer.mozilla.org/en-US/docs/Web/API/Window/frameElement\n    // does not work within <embed> anywhere, and not within in <object> in IE\n    return _window.frameElement || findDocumentHostElement(_window)\n  } catch (e) {\n    return null\n  }\n}\n\n// https://www.w3.org/TR/html5/rendering.html#being-rendered\n// <area> is not rendered, but we *consider* it visible to simplfiy this function's usage\nvar notRenderedElementsPattern = /^(area)$/\n\nfunction computedStyle(element, property) {\n  return window.getComputedStyle(element, null).getPropertyValue(property)\n}\n\nfunction notDisplayed(_path) {\n  return _path.some(function (element) {\n    // display:none is not visible (optimized away at layout)\n    return computedStyle(element, 'display') === 'none'\n  })\n}\n\nfunction notVisible(_path) {\n  // https://github.com/jquery/jquery-ui/blob/master/ui/core.js#L109-L114\n  // NOTE: a nested element can reverse visibility:hidden|collapse by explicitly setting visibility:visible\n  // NOTE: visibility can be [\"\", \"visible\", \"hidden\", \"collapse\"]\n  var hidden = findIndex(_path, function (element) {\n    var visibility = computedStyle(element, 'visibility')\n    return visibility === 'hidden' || visibility === 'collapse'\n  })\n\n  if (hidden === -1) {\n    // there is no hidden element\n    return false\n  }\n\n  var visible = findIndex(_path, function (element) {\n    return computedStyle(element, 'visibility') === 'visible'\n  })\n\n  if (visible === -1) {\n    // there is no visible element (but a hidden element)\n    return true\n  }\n\n  if (hidden < visible) {\n    // there is a hidden element and it's closer than the first visible element\n    return true\n  }\n\n  // there may be a hidden element, but the closest element is visible\n  return false\n}\n\nfunction collapsedParent(_path) {\n  var offset = 1\n  if (_path[0].nodeName.toLowerCase() === 'summary') {\n    offset = 2\n  }\n\n  return _path.slice(offset).some(function (element) {\n    // \"content children\" of a closed details element are not visible\n    return (\n      element.nodeName.toLowerCase() === 'details' && element.open === false\n    )\n  })\n}\n\nfunction isVisibleRules() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    _ref$except = _ref.except,\n    except =\n      _ref$except === undefined\n        ? {\n          notRendered: false,\n          cssDisplay: false,\n          cssVisibility: false,\n          detailsElement: false,\n          browsingContext: false,\n        }\n        : _ref$except\n\n  var element = contextToElement({\n    label: 'is/visible',\n    resolveDocument: true,\n    context: context,\n  })\n\n  var nodeName = element.nodeName.toLowerCase()\n  if (!except.notRendered && notRenderedElementsPattern.test(nodeName)) {\n    return true\n  }\n\n  var _path = getParents({ context: element })\n\n  // in Internet Explorer <audio> has a default display: none, where others have display: inline\n  // but IE allows focusing <audio style=\"display:none\">, but not <div display:none><audio>\n  // this is irrelevant to other browsers, as the controls attribute is required to make <audio> focusable\n  var isAudioWithoutControls =\n    nodeName === 'audio' && !element.hasAttribute('controls')\n  if (\n    !except.cssDisplay &&\n    notDisplayed(isAudioWithoutControls ? _path.slice(1) : _path)\n  ) {\n    return false\n  }\n\n  if (!except.cssVisibility && notVisible(_path)) {\n    return false\n  }\n\n  if (!except.detailsElement && collapsedParent(_path)) {\n    return false\n  }\n\n  if (!except.browsingContext) {\n    // elements within a browsing context are affected by the\n    // browsing context host element's visibility and tabindex\n    var frameElement = getFrameElement(element)\n    var _isVisible = isVisibleRules.except(except)\n    if (frameElement && !_isVisible(frameElement)) {\n      return false\n    }\n  }\n\n  return true\n}\n\n// bind exceptions to an iterator callback\nisVisibleRules.except = function () {\n  var except =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var isVisible = function isVisible(context) {\n    return isVisibleRules({\n      context: context,\n      except: except,\n    })\n  }\n\n  isVisible.rules = isVisibleRules\n  return isVisible\n}\n\n// provide isVisible(context) as default iterator callback\nvar isVisible = isVisibleRules.except({})\n\nfunction getMapByName(name, _document) {\n  // apparently getElementsByName() also considers id attribute in IE & opera\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n  var map = _document.querySelector('map[name=\"' + cssEscape(name) + '\"]')\n  return map || null\n}\n\nfunction getImageOfArea(element) {\n  var map = element.parentElement\n\n  if (!map.name || map.nodeName.toLowerCase() !== 'map') {\n    return null\n  }\n\n  // NOTE: image maps can also be applied to <object> with image content,\n  // but no browser supports this at the moment\n\n  // HTML5 specifies HTMLMapElement.images to be an HTMLCollection of all\n  // <img> and <object> referencing the <map> element, but no browser implements this\n  //   https://www.w3.org/TR/html5/embedded-content-0.html#the-map-element\n  //   https://developer.mozilla.org/en-US/docs/Web/API/HTMLMapElement\n  // the image must be valid and loaded for the map to take effect\n  var _document = getDocument(element)\n  return (\n    _document.querySelector('img[usemap=\"#' + cssEscape(map.name) + '\"]') ||\n    null\n  )\n}\n\nvar supports$2 = void 0\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/map\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\n// https://github.com/jquery/jquery-ui/blob/master/ui/core.js#L88-L107\nfunction isValidArea(context) {\n  if (!supports$2) {\n    supports$2 = _supports()\n  }\n\n  var element = contextToElement({\n    label: 'is/valid-area',\n    context: context,\n  })\n\n  var nodeName = element.nodeName.toLowerCase()\n  if (nodeName !== 'area') {\n    return false\n  }\n\n  var hasTabindex = element.hasAttribute('tabindex')\n  if (!supports$2.focusAreaTabindex && hasTabindex) {\n    // Blink and WebKit do not consider <area tabindex=\"-1\" href=\"#void\"> focusable\n    return false\n  }\n\n  var img = getImageOfArea(element)\n  if (!img || !isVisible(img)) {\n    return false\n  }\n\n  // Firefox only allows fully loaded images to reference image maps\n  // https://stereochro.me/ideas/detecting-broken-images-js\n  if (\n    !supports$2.focusBrokenImageMap &&\n    (!img.complete ||\n      !img.naturalHeight ||\n      img.offsetWidth <= 0 ||\n      img.offsetHeight <= 0)\n  ) {\n    return false\n  }\n\n  // Firefox supports.can focus area elements even if they don't have an href attribute\n  if (!supports$2.focusAreaWithoutHref && !element.href) {\n    // Internet explorer supports.can focus area elements without href if either\n    // the area element or the image element has a tabindex attribute\n    return (\n      (supports$2.focusAreaTabindex && hasTabindex) ||\n      (supports$2.focusAreaImgTabindex && img.hasAttribute('tabindex'))\n    )\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#attr-usemap\n  var childOfInteractive = getParents({ context: img })\n    .slice(1)\n    .some(function (_element) {\n      var name = _element.nodeName.toLowerCase()\n      return name === 'button' || name === 'a'\n    })\n\n  if (childOfInteractive) {\n    return false\n  }\n\n  return true\n}\n\nvar supports$3 = void 0\n\n// https://www.w3.org/TR/html5/disabled-elements.html#concept-element-disabled\nvar disabledElementsPattern = void 0\nvar disabledElements = {\n  input: true,\n  select: true,\n  textarea: true,\n  button: true,\n  fieldset: true,\n  form: true,\n}\n\nfunction isNativeDisabledSupported(context) {\n  if (!supports$3) {\n    supports$3 = _supports()\n\n    if (supports$3.focusFieldsetDisabled) {\n      delete disabledElements.fieldset\n    }\n\n    if (supports$3.focusFormDisabled) {\n      delete disabledElements.form\n    }\n\n    disabledElementsPattern = new RegExp(\n      '^(' + Object.keys(disabledElements).join('|') + ')$'\n    )\n  }\n\n  var element = contextToElement({\n    label: 'is/native-disabled-supported',\n    context: context,\n  })\n\n  var nodeName = element.nodeName.toLowerCase()\n  return Boolean(disabledElementsPattern.test(nodeName))\n}\n\nvar supports$4 = void 0\n\nfunction isDisabledFieldset(element) {\n  var nodeName = element.nodeName.toLowerCase()\n  return nodeName === 'fieldset' && element.disabled\n}\n\nfunction isDisabledForm(element) {\n  var nodeName = element.nodeName.toLowerCase()\n  return nodeName === 'form' && element.disabled\n}\n\nfunction isDisabled(context) {\n  if (!supports$4) {\n    supports$4 = _supports()\n  }\n\n  var element = contextToElement({\n    label: 'is/disabled',\n    context: context,\n  })\n\n  if (element.hasAttribute('data-ally-disabled')) {\n    // treat ally's element/disabled like the DOM native element.disabled\n    return true\n  }\n\n  if (!isNativeDisabledSupported(element)) {\n    // non-form elements do not support the disabled attribute\n    return false\n  }\n\n  if (element.disabled) {\n    // the element itself is disabled\n    return true\n  }\n\n  var parents = getParents({ context: element })\n  if (parents.some(isDisabledFieldset)) {\n    // a parental <fieldset> is disabld and inherits the state onto this element\n    return true\n  }\n\n  if (!supports$4.focusFormDisabled && parents.some(isDisabledForm)) {\n    // a parental <form> is disabld and inherits the state onto this element\n    return true\n  }\n\n  return false\n}\n\nfunction isOnlyTabbableRules() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    _ref$except = _ref.except,\n    except =\n      _ref$except === undefined\n        ? {\n          onlyFocusableBrowsingContext: false,\n          visible: false,\n        }\n        : _ref$except\n\n  var element = contextToElement({\n    label: 'is/only-tabbable',\n    resolveDocument: true,\n    context: context,\n  })\n\n  if (!except.visible && !isVisible(element)) {\n    return false\n  }\n\n  if (\n    !except.onlyFocusableBrowsingContext &&\n    (platform.is.GECKO || platform.is.TRIDENT || platform.is.EDGE)\n  ) {\n    var frameElement = getFrameElement(element)\n    if (frameElement) {\n      if (tabindexValue(frameElement) < 0) {\n        // iframe[tabindex=\"-1\"] and object[tabindex=\"-1\"] inherit the\n        // tabbable demotion onto elements of their browsing contexts\n        return false\n      }\n    }\n  }\n\n  var nodeName = element.nodeName.toLowerCase()\n  var tabindex = tabindexValue(element)\n\n  if (nodeName === 'label' && platform.is.GECKO) {\n    // Firefox cannot focus, but tab to: label[tabindex=0]\n    return tabindex !== null && tabindex >= 0\n  }\n\n  // SVG Elements were keyboard focusable but not script focusable before Firefox 51.\n  // Firefox 51 added the focus management DOM API (.focus and .blur) to SVGElement,\n  // see https://bugzilla.mozilla.org/show_bug.cgi?id=778654\n  if (platform.is.GECKO && element.ownerSVGElement && !element.focus) {\n    if (nodeName === 'a' && element.hasAttribute('xlink:href')) {\n      // any focusable child of <svg> cannot be focused, but tabbed to\n      if (platform.is.GECKO) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n\n// bind exceptions to an iterator callback\nisOnlyTabbableRules.except = function () {\n  var except =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var isOnlyTabbable = function isOnlyTabbable(context) {\n    return isOnlyTabbableRules({\n      context: context,\n      except: except,\n    })\n  }\n\n  isOnlyTabbable.rules = isOnlyTabbableRules\n  return isOnlyTabbable\n}\n\n// provide isOnlyTabbable(context) as default iterator callback\nvar isOnlyTabbable = isOnlyTabbableRules.except({})\n\nvar supports$5 = void 0\n\nfunction isOnlyFocusRelevant(element) {\n  var nodeName = element.nodeName.toLowerCase()\n  if (nodeName === 'embed' || nodeName === 'keygen') {\n    // embed is considered focus-relevant but not focusable\n    // see https://github.com/medialize/ally.js/issues/82\n    return true\n  }\n\n  var _tabindex = tabindexValue(element)\n  if (element.shadowRoot && _tabindex === null) {\n    // ShadowDOM host elements *may* receive focus\n    // even though they are not considered focuable\n    return true\n  }\n\n  if (nodeName === 'label') {\n    // <label tabindex=\"0\"> is only tabbable in Firefox, not script-focusable\n    // there's no way to make an element focusable other than by adding a tabindex,\n    // and focus behavior of the label element seems hard-wired to ignore tabindex\n    // in some browsers (like Gecko, Blink and WebKit)\n    return !supports$5.focusLabelTabindex || _tabindex === null\n  }\n\n  if (nodeName === 'legend') {\n    return _tabindex === null\n  }\n\n  if (\n    supports$5.focusSvgFocusableAttribute &&\n    (element.ownerSVGElement || nodeName === 'svg')\n  ) {\n    // Internet Explorer understands the focusable attribute introduced in SVG Tiny 1.2\n    var focusableAttribute = element.getAttribute('focusable')\n    return focusableAttribute && focusableAttribute === 'false'\n  }\n\n  if (nodeName === 'img' && element.hasAttribute('usemap')) {\n    // Gecko, Trident and Edge do not allow an image with an image map and tabindex to be focused,\n    // it appears the tabindex is overruled so focus is still forwarded to the <map>\n    return _tabindex === null || !supports$5.focusImgUsemapTabindex\n  }\n\n  if (nodeName === 'area') {\n    // all <area>s are considered relevant,\n    // but only the valid <area>s are focusable\n    return !isValidArea(element)\n  }\n\n  return false\n}\n\nfunction isFocusableRules() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    _ref$except = _ref.except,\n    except =\n      _ref$except === undefined\n        ? {\n          disabled: false,\n          visible: false,\n          onlyTabbable: false,\n        }\n        : _ref$except\n\n  if (!supports$5) {\n    supports$5 = _supports()\n  }\n\n  var _isOnlyTabbable = isOnlyTabbable.rules.except({\n    onlyFocusableBrowsingContext: true,\n    visible: except.visible,\n  })\n\n  var element = contextToElement({\n    label: 'is/focusable',\n    resolveDocument: true,\n    context: context,\n  })\n\n  var focusRelevant = isFocusRelevant.rules({\n    context: element,\n    except: except,\n  })\n\n  if (!focusRelevant || isOnlyFocusRelevant(element)) {\n    return false\n  }\n\n  if (!except.disabled && isDisabled(element)) {\n    return false\n  }\n\n  if (!except.onlyTabbable && _isOnlyTabbable(element)) {\n    // some elements may be keyboard focusable, but not script focusable\n    return false\n  }\n\n  // elements that are not rendered, cannot be focused\n  if (!except.visible) {\n    var visibilityOptions = {\n      context: element,\n      except: {},\n    }\n\n    if (supports$5.focusInHiddenIframe) {\n      // WebKit and Blink can focus content in hidden <iframe> and <object>\n      visibilityOptions.except.browsingContext = true\n    }\n\n    if (supports$5.focusObjectSvgHidden) {\n      // Blink allows focusing the object element, even if it has visibility: hidden;\n      // @browser-issue Blink https://code.google.com/p/chromium/issues/detail?id=586191\n      var _nodeName2 = element.nodeName.toLowerCase()\n      if (_nodeName2 === 'object') {\n        visibilityOptions.except.cssVisibility = true\n      }\n    }\n\n    if (!isVisible.rules(visibilityOptions)) {\n      return false\n    }\n  }\n\n  var frameElement = getFrameElement(element)\n  if (frameElement) {\n    var _nodeName = frameElement.nodeName.toLowerCase()\n    if (_nodeName === 'object' && !supports$5.focusInZeroDimensionObject) {\n      if (!frameElement.offsetWidth || !frameElement.offsetHeight) {\n        // WebKit can not focus content in <object> if it doesn't have dimensions\n        return false\n      }\n    }\n  }\n\n  var nodeName = element.nodeName.toLowerCase()\n  if (\n    nodeName === 'svg' &&\n    supports$5.focusSvgInIframe &&\n    !frameElement &&\n    element.getAttribute('tabindex') === null\n  ) {\n    return false\n  }\n\n  return true\n}\n\n// bind exceptions to an iterator callback\nisFocusableRules.except = function () {\n  var except =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var isFocusable = function isFocusable(context) {\n    return isFocusableRules({\n      context: context,\n      except: except,\n    })\n  }\n\n  isFocusable.rules = isFocusableRules\n  return isFocusable\n}\n\n// provide isFocusRelevant(context) as default iterator callback\nvar isFocusable = isFocusableRules.except({})\n\nfunction createFilter(condition) {\n  // see https://developer.mozilla.org/en-US/docs/Web/API/NodeFilter\n  var filter = function filter(node) {\n    if (node.shadowRoot) {\n      // return ShadowRoot elements regardless of them being focusable,\n      // so they can be walked recursively later\n      return NodeFilter.FILTER_ACCEPT\n    }\n\n    if (condition(node)) {\n      // finds elements that could have been found by document.querySelectorAll()\n      return NodeFilter.FILTER_ACCEPT\n    }\n\n    return NodeFilter.FILTER_SKIP\n  }\n  // IE requires a function, Browsers require {acceptNode: function}\n  // see http://www.bennadel.com/blog/2607-finding-html-comment-nodes-in-the-dom-using-treewalker.htm\n  filter.acceptNode = filter\n  return filter\n}\n\nvar PossiblyFocusableFilter = createFilter(isFocusRelevant)\n\nfunction queryFocusableStrict() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    includeContext = _ref.includeContext,\n    includeOnlyTabbable = _ref.includeOnlyTabbable,\n    strategy = _ref.strategy\n\n  if (!context) {\n    context = document.documentElement\n  }\n\n  var _isFocusable = isFocusable.rules.except({\n    onlyTabbable: includeOnlyTabbable,\n  })\n\n  var _document = getDocument(context)\n  // see https://developer.mozilla.org/en-US/docs/Web/API/Document/createTreeWalker\n  var walker = _document.createTreeWalker(\n    // root element to start search in\n    context,\n    // element type filter\n    NodeFilter.SHOW_ELEMENT,\n    // custom NodeFilter filter\n    strategy === 'all' ? PossiblyFocusableFilter : createFilter(_isFocusable),\n    // deprecated, but IE requires it\n    false\n  )\n\n  var list = []\n\n  while (walker.nextNode()) {\n    if (walker.currentNode.shadowRoot) {\n      if (_isFocusable(walker.currentNode)) {\n        list.push(walker.currentNode)\n      }\n\n      list = list.concat(\n        queryFocusableStrict({\n          context: walker.currentNode.shadowRoot,\n          includeOnlyTabbable: includeOnlyTabbable,\n          strategy: strategy,\n        })\n      )\n    } else {\n      list.push(walker.currentNode)\n    }\n  }\n\n  // add context if requested and focusable\n  if (includeContext) {\n    if (strategy === 'all') {\n      if (isFocusRelevant(context)) {\n        list.unshift(context)\n      }\n    } else if (_isFocusable(context)) {\n      list.unshift(context)\n    }\n  }\n\n  return list\n}\n\n// NOTE: this selector MUST *never* be used directly,\nvar supports$6 = void 0\n\nvar selector$1 = void 0\n\nfunction selector$2() {\n  if (!supports$6) {\n    supports$6 = _supports()\n  }\n\n  if (typeof selector$1 === 'string') {\n    return selector$1\n  }\n\n  // https://www.w3.org/TR/html5/editing.html#sequential-focus-navigation-and-the-tabindex-attribute\n  selector$1 =\n    '' +\n    // IE11 supports.can focus <table> and <td>\n    (supports$6.focusTable ? 'table, td,' : '') +\n    // IE11 supports.can focus <fieldset>\n    (supports$6.focusFieldset ? 'fieldset,' : '') +\n    // Namespace problems of [xlink:href] explained in https://stackoverflow.com/a/23047888/515124\n    // svg a[*|href] does not match in IE9, but since we're filtering\n    // through is/focusable we can include all <a> from SVG\n    'svg a,' +\n    // may behave as 'svg, svg *,' in chrome as *every* svg element with a focus event listener is focusable\n    // navigational elements\n    'a[href],' +\n    // validity determined by is/valid-area.js\n    'area[href],' +\n    // validity determined by is/disabled.js\n    'input, select, textarea, button,' +\n    // browsing context containers\n    'iframe, object, embed,' +\n    // interactive content\n    'keygen,' +\n    (supports$6.focusAudioWithoutControls ? 'audio,' : 'audio[controls],') +\n    (supports$6.focusVideoWithoutControls ? 'video,' : 'video[controls],') +\n    (supports$6.focusSummary ? 'summary,' : '') +\n    // validity determined by is/valid-tabindex.js\n    '[tabindex],' +\n    // editing hosts\n    '[contenteditable]'\n\n  // where ShadowDOM is supported, we also want the shadowed focusable elements (via \">>>\" or \"/deep/\")\n  selector$1 = selectInShadows(selector$1)\n\n  return selector$1\n}\n\nfunction queryFocusableQuick() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    includeContext = _ref.includeContext,\n    includeOnlyTabbable = _ref.includeOnlyTabbable\n\n  var _selector = selector$2()\n  var elements = context.querySelectorAll(_selector)\n  // the selector potentially matches more than really is focusable\n\n  var _isFocusable = isFocusable.rules.except({\n    onlyTabbable: includeOnlyTabbable,\n  })\n\n  var result = [].filter.call(elements, _isFocusable)\n\n  // add context if requested and focusable\n  if (includeContext && _isFocusable(context)) {\n    result.unshift(context)\n  }\n\n  return result\n}\n\nfunction queryFocusable() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    includeContext = _ref.includeContext,\n    includeOnlyTabbable = _ref.includeOnlyTabbable,\n    _ref$strategy = _ref.strategy,\n    strategy = _ref$strategy === undefined ? 'quick' : _ref$strategy\n\n  var element = contextToElement({\n    label: 'query/focusable',\n    resolveDocument: true,\n    defaultToDocument: true,\n    context: context,\n  })\n\n  var options = {\n    context: element,\n    includeContext: includeContext,\n    includeOnlyTabbable: includeOnlyTabbable,\n    strategy: strategy,\n  }\n\n  if (strategy === 'quick') {\n    return queryFocusableQuick(options)\n  } else if (strategy === 'strict' || strategy === 'all') {\n    return queryFocusableStrict(options)\n  }\n\n  throw new TypeError(\n    'query/focusable requires option.strategy to be one of [\"quick\", \"strict\", \"all\"]'\n  )\n}\n\nvar supports$7 = void 0\n\n// Internet Explorer 11 considers fieldset, table, td focusable, but not tabbable\n// Internet Explorer 11 considers body to have [tabindex=0], but does not allow tabbing to it\nvar focusableElementsPattern = /^(fieldset|table|td|body)$/\n\nfunction isTabbableRules() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    _ref$except = _ref.except,\n    except =\n      _ref$except === undefined\n        ? {\n          flexbox: false,\n          scrollable: false,\n          shadow: false,\n          visible: false,\n          onlyTabbable: false,\n        }\n        : _ref$except\n\n  if (!supports$7) {\n    supports$7 = _supports()\n  }\n\n  var element = contextToElement({\n    label: 'is/tabbable',\n    resolveDocument: true,\n    context: context,\n  })\n\n  if (platform.is.BLINK && platform.is.ANDROID && platform.majorVersion > 42) {\n    // External keyboard support worked fine in CHrome 42, but stopped working in Chrome 45.\n    // The on-screen keyboard does not provide a way to focus the next input element (like iOS does).\n    // That leaves us with no option to advance focus by keyboard, ergo nothing is tabbable (keyboard focusable).\n    return false\n  }\n\n  var frameElement = getFrameElement(element)\n  if (frameElement) {\n    if (platform.is.WEBKIT && platform.is.IOS) {\n      // iOS only does not consider anything from another browsing context keyboard focusable\n      return false\n    }\n\n    // iframe[tabindex=\"-1\"] and object[tabindex=\"-1\"] inherit the\n    // tabbable demotion onto elements of their browsing contexts\n    if (tabindexValue(frameElement) < 0) {\n      return false\n    }\n\n    if (\n      !except.visible &&\n      (platform.is.BLINK || platform.is.WEBKIT) &&\n      !isVisible(frameElement)\n    ) {\n      // Blink and WebKit consider elements in hidden browsing contexts focusable, but not tabbable\n      return false\n    }\n\n    // Webkit and Blink don't consider anything in <object> tabbable\n    // Blink fixed that fixed in Chrome 54, Opera 41\n    var frameNodeName = frameElement.nodeName.toLowerCase()\n    if (frameNodeName === 'object') {\n      var isFixedBlink =\n        (platform.name === 'Chrome' && platform.majorVersion >= 54) ||\n        (platform.name === 'Opera' && platform.majorVersion >= 41)\n\n      if (platform.is.WEBKIT || (platform.is.BLINK && !isFixedBlink)) {\n        return false\n      }\n    }\n  }\n\n  var nodeName = element.nodeName.toLowerCase()\n  var _tabindex = tabindexValue(element)\n  var tabindex = _tabindex === null ? null : _tabindex >= 0\n\n  if (\n    platform.is.EDGE &&\n    platform.majorVersion >= 14 &&\n    frameElement &&\n    element.ownerSVGElement &&\n    _tabindex < 0\n  ) {\n    // Edge 14+ considers <a xlink:href=\"…\" tabindex=\"-1\"> keyboard focusable\n    // if the element is in a nested browsing context\n    return true\n  }\n\n  var hasTabbableTabindexOrNone = tabindex !== false\n  var hasTabbableTabindex = _tabindex !== null && _tabindex >= 0\n\n  // NOTE: Firefox 31 considers [contenteditable] to have [tabindex=-1], but allows tabbing to it\n  // fixed in Firefox 40 the latest - https://bugzilla.mozilla.org/show_bug.cgi?id=1185657\n  if (element.hasAttribute('contenteditable')) {\n    // tabbing can still be disabled by explicitly providing [tabindex=\"-1\"]\n    return hasTabbableTabindexOrNone\n  }\n\n  if (focusableElementsPattern.test(nodeName) && tabindex !== true) {\n    return false\n  }\n\n  if (platform.is.WEBKIT && platform.is.IOS) {\n    // iOS only considers a hand full of elements tabbable (keyboard focusable)\n    // this holds true even with external keyboards\n    var potentiallyTabbable =\n      (nodeName === 'input' && element.type === 'text') ||\n      element.type === 'password' ||\n      nodeName === 'select' ||\n      nodeName === 'textarea' ||\n      element.hasAttribute('contenteditable')\n\n    if (!potentiallyTabbable) {\n      var style = window.getComputedStyle(element, null)\n      potentiallyTabbable = isUserModifyWritable(style)\n    }\n\n    if (!potentiallyTabbable) {\n      return false\n    }\n  }\n\n  if (nodeName === 'use' && _tabindex !== null) {\n    if (\n      platform.is.BLINK ||\n      (platform.is.WEBKIT && platform.majorVersion === 9)\n    ) {\n      // In Chrome and Safari 9 the <use> element is keyboard focusable even for tabindex=\"-1\"\n      return true\n    }\n  }\n\n  if (elementMatches(element, 'svg a') && element.hasAttribute('xlink:href')) {\n    if (hasTabbableTabindexOrNone) {\n      // in Trident and Gecko SVGElement does not handle the tabIndex property properly\n      return true\n    }\n\n    if (element.focus && !supports$7.focusSvgNegativeTabindexAttribute) {\n      // Firefox 51 and 52 treat any natively tabbable SVG element with\n      // tabindex=\"-1\" as tabbable and everything else as inert\n      // see https://bugzilla.mozilla.org/show_bug.cgi?id=1302340\n      return true\n    }\n  }\n\n  if (\n    nodeName === 'svg' &&\n    supports$7.focusSvgInIframe &&\n    hasTabbableTabindexOrNone\n  ) {\n    return true\n  }\n\n  if (platform.is.TRIDENT || platform.is.EDGE) {\n    if (nodeName === 'svg') {\n      if (supports$7.focusSvg) {\n        // older Internet Explorers consider <svg> keyboard focusable\n        // unless they have focsable=\"false\", but then they wouldn't\n        // be focusable and thus not even reach this filter\n        return true\n      }\n\n      // elements that have [focusable] are automatically keyboard focusable regardless of the attribute's value\n      return element.hasAttribute('focusable') || hasTabbableTabindex\n    }\n\n    if (element.ownerSVGElement) {\n      if (supports$7.focusSvgTabindexAttribute && hasTabbableTabindex) {\n        return true\n      }\n\n      // elements that have [focusable] are automatically keyboard focusable regardless of the attribute's value\n      return element.hasAttribute('focusable')\n    }\n  }\n  if (element.tabIndex === undefined) {\n    return Boolean(except.onlyTabbable)\n  }\n\n  if (nodeName === 'audio') {\n    if (!element.hasAttribute('controls')) {\n      // In Internet Explorer the <audio> element is focusable, but not tabbable, and tabIndex property is wrong\n      return false\n    } else if (platform.is.BLINK) {\n      // In Chrome <audio controls tabindex=\"-1\"> remains keyboard focusable\n      return true\n    }\n  }\n\n  if (nodeName === 'video') {\n    if (!element.hasAttribute('controls')) {\n      if (platform.is.TRIDENT || platform.is.EDGE) {\n        // In Internet Explorer and Edge the <video> element is focusable, but not tabbable, and tabIndex property is wrong\n        return false\n      }\n    } else if (platform.is.BLINK || platform.is.GECKO) {\n      // In Chrome and Firefox <video controls tabindex=\"-1\"> remains keyboard focusable\n      return true\n    }\n  }\n\n  if (nodeName === 'object') {\n    if (platform.is.BLINK || platform.is.WEBKIT) {\n      // In all Blink and WebKit based browsers <embed> and <object> are never keyboard focusable, even with tabindex=\"0\" set\n      return false\n    }\n  }\n\n  if (nodeName === 'iframe') {\n    // In Internet Explorer all iframes are only focusable\n    // In WebKit, Blink and Gecko iframes may be tabbable depending on content.\n    // Since we can't reliably investigate iframe documents because of the\n    // SameOriginPolicy, we're declaring everything only focusable.\n    return false\n  }\n\n  if (!except.scrollable && platform.is.GECKO) {\n    // Firefox considers scrollable containers keyboard focusable,\n    // even though their tabIndex property is -1\n    var _style = window.getComputedStyle(element, null)\n    if (hasCssOverflowScroll(_style)) {\n      return hasTabbableTabindexOrNone\n    }\n  }\n\n  if (platform.is.TRIDENT || platform.is.EDGE) {\n    // IE and Edge degrade <area> to script focusable, if the image\n    // using the <map> has been given tabindex=\"-1\"\n    if (nodeName === 'area') {\n      var img = getImageOfArea(element)\n      if (img && tabindexValue(img) < 0) {\n        return false\n      }\n    }\n\n    var _style2 = window.getComputedStyle(element, null)\n    if (isUserModifyWritable(_style2)) {\n      // prevent being swallowed by the overzealous isScrollableContainer() below\n      return element.tabIndex >= 0\n    }\n\n    if (!except.flexbox && hasCssDisplayFlex(_style2)) {\n      if (_tabindex !== null) {\n        return hasTabbableTabindex\n      }\n\n      return (\n        isFocusRelevantWithoutFlexbox(element) &&\n        isTabbableWithoutFlexbox(element)\n      )\n    }\n\n    // IE considers scrollable containers script focusable only,\n    // even though their tabIndex property is 0\n    if (isScrollableContainer(element, nodeName)) {\n      return false\n    }\n\n    var parent = element.parentElement\n    if (parent) {\n      var parentNodeName = parent.nodeName.toLowerCase()\n      var parentStyle = window.getComputedStyle(parent, null)\n      // IE considers scrollable bodies script focusable only,\n      if (\n        isScrollableContainer(parent, nodeName, parentNodeName, parentStyle)\n      ) {\n        return false\n      }\n\n      // Children of focusable elements with display:flex are focusable in IE10-11,\n      // even though their tabIndex property suggests otherwise\n      if (hasCssDisplayFlex(parentStyle)) {\n        // value of tabindex takes precedence\n        return hasTabbableTabindex\n      }\n    }\n  }\n\n  // https://www.w3.org/WAI/PF/aria-practices/#focus_tabindex\n  return element.tabIndex >= 0\n}\n\n// bind exceptions to an iterator callback\nisTabbableRules.except = function () {\n  var except =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var isTabbable = function isTabbable(context) {\n    return isTabbableRules({\n      context: context,\n      except: except,\n    })\n  }\n\n  isTabbable.rules = isTabbableRules\n  return isTabbable\n}\n\nvar isFocusRelevantWithoutFlexbox = isFocusRelevant.rules.except({\n  flexbox: true,\n})\nvar isTabbableWithoutFlexbox = isTabbableRules.except({ flexbox: true })\n\n// provide isTabbable(context) as default iterator callback\nvar isTabbable = isTabbableRules.except({})\n\nfunction queryTabbable() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    includeContext = _ref.includeContext,\n    includeOnlyTabbable = _ref.includeOnlyTabbable,\n    strategy = _ref.strategy\n\n  var _isTabbable = isTabbable.rules.except({\n    onlyTabbable: includeOnlyTabbable,\n  })\n\n  return queryFocusable({\n    context: context,\n    includeContext: includeContext,\n    includeOnlyTabbable: includeOnlyTabbable,\n    strategy: strategy,\n  }).filter(_isTabbable)\n}\n\n// sorts a list of elements according to their order in the DOM\n\nfunction compareDomPosition(a, b) {\n  return a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING\n    ? -1\n    : 1\n}\n\nfunction sortDomOrder(elements) {\n  return elements.sort(compareDomPosition)\n}\n\nfunction getFirstSuccessorOffset(list, target) {\n  // find the first element that comes AFTER the target element\n  return findIndex(list, function (element) {\n    return (\n      target.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_FOLLOWING\n    )\n  })\n}\n\nfunction findInsertionOffsets(list, elements, resolveElement) {\n  // instead of mutating the elements list directly, remember position and map\n  // to inject later, when we can do this more efficiently\n  var insertions = []\n  elements.forEach(function (element) {\n    var replace = true\n    var offset = list.indexOf(element)\n\n    if (offset === -1) {\n      // element is not in target list\n      offset = getFirstSuccessorOffset(list, element)\n      replace = false\n    }\n\n    if (offset === -1) {\n      // there is no successor in the tabsequence,\n      // meaning the image must be the last element\n      offset = list.length\n    }\n\n    // allow the consumer to replace the injected element\n    var injections = nodeArray(\n      resolveElement ? resolveElement(element) : element\n    )\n    if (!injections.length) {\n      // we can't inject zero elements\n      return\n    }\n\n    insertions.push({\n      offset: offset,\n      replace: replace,\n      elements: injections,\n    })\n  })\n\n  return insertions\n}\n\nfunction insertElementsAtOffsets(list, insertions) {\n  // remember the number of elements we have already injected\n  // so we account for the caused index offset\n  var inserted = 0\n  // make sure that we insert the elements in sequence,\n  // otherwise the offset compensation won't work\n  insertions.sort(function (a, b) {\n    return a.offset - b.offset\n  })\n  insertions.forEach(function (insertion) {\n    // array.splice has an annoying function signature :(\n    var remove = insertion.replace ? 1 : 0\n    var args = [insertion.offset + inserted, remove].concat(insertion.elements)\n    list.splice.apply(list, args)\n    inserted += insertion.elements.length - remove\n  })\n}\n\nfunction mergeInDomOrder() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    list = _ref.list,\n    elements = _ref.elements,\n    resolveElement = _ref.resolveElement\n\n  // operate on a copy so we don't mutate the original array\n  var _list = list.slice(0)\n  // make sure the elements we're injecting are provided in DOM order\n  var _elements = nodeArray(elements).slice(0)\n  sortDomOrder(_elements)\n  // find the offsets within the target array (list) at which to inject\n  // each individual element (from elements)\n  var insertions = findInsertionOffsets(_list, _elements, resolveElement)\n  // actually inject the elements into the target array at the identified positions\n  insertElementsAtOffsets(_list, insertions)\n  return _list\n}\n\nvar _createClass = (function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i]\n      descriptor.enumerable = descriptor.enumerable || false\n      descriptor.configurable = true\n      if ('value' in descriptor) descriptor.writable = true\n      Object.defineProperty(target, descriptor.key, descriptor)\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps)\n    if (staticProps) defineProperties(Constructor, staticProps)\n    return Constructor\n  }\n})()\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function')\n  }\n}\n\nvar Maps = (function () {\n  function Maps(context) {\n    _classCallCheck(this, Maps)\n\n    this._document = getDocument(context)\n    this.maps = {}\n  }\n\n  _createClass(Maps, [\n    {\n      key: 'getAreasFor',\n      value: function getAreasFor(name) {\n        if (!this.maps[name]) {\n          // the map is not defined within the context, so we\n          // have to go find it elsewhere in the document\n          this.addMapByName(name)\n        }\n\n        return this.maps[name]\n      },\n    },\n    {\n      key: 'addMapByName',\n      value: function addMapByName(name) {\n        var map = getMapByName(name, this._document)\n        if (!map) {\n          // if there is no map, the img[usemap] wasn't doing anything anyway\n          return\n        }\n\n        this.maps[map.name] = queryTabbable({ context: map })\n      },\n    },\n    {\n      key: 'extractAreasFromList',\n      value: function extractAreasFromList(elements) {\n        // remove all <area> elements from the elements list,\n        // but put them the map for later retrieval\n        return elements.filter(function (element) {\n          var nodeName = element.nodeName.toLowerCase()\n          if (nodeName !== 'area') {\n            return true\n          }\n\n          var map = element.parentNode\n          if (!this.maps[map.name]) {\n            this.maps[map.name] = []\n          }\n\n          this.maps[map.name].push(element)\n          return false\n        }, this)\n      },\n    },\n  ])\n\n  return Maps\n})()\n\nfunction sortArea(elements, context) {\n  // images - unless they are focusable themselves, likely not\n  // part of the elements list, so we'll have to find them and\n  // sort them into the elements list manually\n  var usemaps = context.querySelectorAll('img[usemap]')\n  var maps = new Maps(context)\n\n  // remove all <area> elements from the elements list,\n  // but put them the map for later retrieval\n  var _elements = maps.extractAreasFromList(elements)\n\n  if (!usemaps.length) {\n    // the context does not contain any <area>s so no need\n    // to replace anything, just remove any maps\n    return _elements\n  }\n\n  return mergeInDomOrder({\n    list: _elements,\n    elements: usemaps,\n    resolveElement: function resolveElement(image) {\n      var name = image.getAttribute('usemap').slice(1)\n      return maps.getAreasFor(name)\n    },\n  })\n}\n\nvar _createClass$1 = (function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i]\n      descriptor.enumerable = descriptor.enumerable || false\n      descriptor.configurable = true\n      if ('value' in descriptor) descriptor.writable = true\n      Object.defineProperty(target, descriptor.key, descriptor)\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps)\n    if (staticProps) defineProperties(Constructor, staticProps)\n    return Constructor\n  }\n})()\n\nfunction _classCallCheck$1(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function')\n  }\n}\n\nvar Shadows = (function () {\n  function Shadows(context, sortElements) {\n    _classCallCheck$1(this, Shadows)\n\n    // document context we're working with\n    this.context = context\n    // callback that sorts an array of elements\n    this.sortElements = sortElements\n    // reference to create unique IDs for each ShadowHost\n    this.hostCounter = 1\n    // reference map for child-ShadowHosts of a ShadowHost\n    this.inHost = {}\n    // reference map for child-ShadowHost of the document\n    this.inDocument = []\n    // reference map for ShadowHosts\n    this.hosts = {}\n    // reference map for tabbable elements of a ShadowHost\n    this.elements = {}\n  }\n\n  // remember which hosts we have to sort within later\n\n  _createClass$1(Shadows, [\n    {\n      key: '_registerHost',\n      value: function _registerHost(host) {\n        if (host._sortingId) {\n          return\n        }\n\n        // make the ShadowHost identifiable (see cleanup() for undo)\n        host._sortingId = 'shadow-' + this.hostCounter++\n        this.hosts[host._sortingId] = host\n\n        // hosts may contain other hosts\n        var parentHost = getShadowHost({ context: host })\n        if (parentHost) {\n          this._registerHost(parentHost)\n          this._registerHostParent(host, parentHost)\n        } else {\n          this.inDocument.push(host)\n        }\n      },\n\n      // remember which host is the child of which other host\n    },\n    {\n      key: '_registerHostParent',\n      value: function _registerHostParent(host, parent) {\n        if (!this.inHost[parent._sortingId]) {\n          this.inHost[parent._sortingId] = []\n        }\n\n        this.inHost[parent._sortingId].push(host)\n      },\n\n      // remember which elements a host contains\n    },\n    {\n      key: '_registerElement',\n      value: function _registerElement(element, host) {\n        if (!this.elements[host._sortingId]) {\n          this.elements[host._sortingId] = []\n        }\n\n        this.elements[host._sortingId].push(element)\n      },\n\n      // remove shadowed elements from the sequence and register\n      // the ShadowHosts they belong to so we know what to sort\n      // later on\n    },\n    {\n      key: 'extractElements',\n      value: function extractElements(elements) {\n        return elements.filter(function (element) {\n          var host = getShadowHost({ context: element })\n          if (!host) {\n            return true\n          }\n\n          this._registerHost(host)\n          this._registerElement(element, host)\n          return false\n        }, this)\n      },\n\n      // inject hosts into the sequence, sort everything,\n      // and recoursively replace hosts by its descendants\n    },\n    {\n      key: 'sort',\n      value: function sort(elements) {\n        var _elements = this._injectHosts(elements)\n        _elements = this._replaceHosts(_elements)\n        this._cleanup()\n        return _elements\n      },\n\n      // merge ShadowHosts into the element lists of other ShadowHosts\n      // or the document, then sort the individual lists\n    },\n    {\n      key: '_injectHosts',\n      value: function _injectHosts(elements) {\n        Object.keys(this.hosts).forEach(function (_sortingId) {\n          var _list = this.elements[_sortingId]\n          var _elements = this.inHost[_sortingId]\n          var _context = this.hosts[_sortingId].shadowRoot\n          this.elements[_sortingId] = this._merge(_list, _elements, _context)\n        }, this)\n\n        return this._merge(elements, this.inDocument, this.context)\n      },\n    },\n    {\n      key: '_merge',\n      value: function _merge(list, elements, context) {\n        var merged = mergeInDomOrder({\n          list: list,\n          elements: elements,\n        })\n\n        return this.sortElements(merged, context)\n      },\n    },\n    {\n      key: '_replaceHosts',\n      value: function _replaceHosts(elements) {\n        return mergeInDomOrder({\n          list: elements,\n          elements: this.inDocument,\n          resolveElement: this._resolveHostElement.bind(this),\n        })\n      },\n    },\n    {\n      key: '_resolveHostElement',\n      value: function _resolveHostElement(host) {\n        var merged = mergeInDomOrder({\n          list: this.elements[host._sortingId],\n          elements: this.inHost[host._sortingId],\n          resolveElement: this._resolveHostElement.bind(this),\n        })\n\n        var _tabindex = tabindexValue(host)\n        if (_tabindex !== null && _tabindex > -1) {\n          return [host].concat(merged)\n        }\n\n        return merged\n      },\n    },\n    {\n      key: '_cleanup',\n      value: function _cleanup() {\n        // remove those identifers we put on the ShadowHost to avoid using Map()\n        Object.keys(this.hosts).forEach(function (key) {\n          delete this.hosts[key]._sortingId\n        }, this)\n      },\n    },\n  ])\n\n  return Shadows\n})()\n\nfunction sortShadowed(elements, context, sortElements) {\n  var shadows = new Shadows(context, sortElements)\n  var _elements = shadows.extractElements(elements)\n\n  if (_elements.length === elements.length) {\n    // no shadowed content found, no need to continue\n    return sortElements(elements)\n  }\n\n  return shadows.sort(_elements)\n}\n\nfunction sortTabindex(elements) {\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement.tabIndex\n  // elements with tabIndex \"0\" (including tabbableElements without tabIndex) should be navigated in the order they appear.\n  // elements with a positive tabIndex:\n  //   Elements that have identical tabIndexes should be navigated in the order they appear.\n  //   Navigation proceeds from the lowest tabIndex to the highest tabIndex.\n\n  // NOTE: sort implementation may be unstable and thus mess up DOM order,\n  // that's why we build a map that's being sorted instead. If we were able to rely\n  // on a stable sorting algorithm, sortTabindex() could be as simple as\n  // elements.sort(function(a, b) { return a.tabIndex - b.tabIndex; });\n  // at this time Chrome does not use a stable sorting algorithm\n  // see http://blog.rodneyrehm.de/archives/14-Sorting-Were-Doing-It-Wrong.html#stability\n\n  // NOTE: compareDocumentPosition seemed like more overhead than just sorting this with buckets\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node.compareDocumentPosition\n\n  var map = {}\n  var indexes = []\n  var normal = elements.filter(function (element) {\n    // in Trident and Gecko SVGElement does not know about the tabIndex property\n    var tabIndex = element.tabIndex\n    if (tabIndex === undefined) {\n      tabIndex = tabindexValue(element)\n    }\n\n    // extract elements that don't need sorting\n    if (tabIndex <= 0 || tabIndex === null || tabIndex === undefined) {\n      return true\n    }\n\n    if (!map[tabIndex]) {\n      // create sortable bucket for dom-order-preservation of elements with the same tabIndex\n      map[tabIndex] = []\n      // maintain a list of unique tabIndexes\n      indexes.push(tabIndex)\n    }\n\n    // sort element into the proper bucket\n    map[tabIndex].push(element)\n    // element moved to sorting map, so not \"normal\" anymore\n    return false\n  })\n\n  // sort the tabindex ascending,\n  // then resolve them to their appropriate buckets,\n  // then flatten the array of arrays to an array\n  var _elements = indexes\n    .sort()\n    .map(function (tabIndex) {\n      return map[tabIndex]\n    })\n    .reduceRight(function (previous, current) {\n      return current.concat(previous)\n    }, normal)\n\n  return _elements\n}\n\nvar supports$8 = void 0\n\nfunction moveContextToBeginning(elements, context) {\n  var pos = elements.indexOf(context)\n  if (pos > 0) {\n    var tmp = elements.splice(pos, 1)\n    return tmp.concat(elements)\n  }\n\n  return elements\n}\n\nfunction sortElements(elements, _context) {\n  if (supports$8.tabsequenceAreaAtImgPosition) {\n    // Some browsers sort <area> in DOM order, some place the <area>s\n    // where the <img> referecing them would've been in DOM order.\n    // https://github.com/medialize/ally.js/issues/5\n    elements = sortArea(elements, _context)\n  }\n\n  elements = sortTabindex(elements)\n  return elements\n}\n\nfunction queryTabsequence() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    context = _ref.context,\n    includeContext = _ref.includeContext,\n    includeOnlyTabbable = _ref.includeOnlyTabbable,\n    strategy = _ref.strategy\n\n  if (!supports$8) {\n    supports$8 = _supports()\n  }\n\n  var _context = nodeArray(context)[0] || document.documentElement\n  var elements = queryTabbable({\n    context: _context,\n    includeContext: includeContext,\n    includeOnlyTabbable: includeOnlyTabbable,\n    strategy: strategy,\n  })\n\n  if (document.body.createShadowRoot && platform.is.BLINK) {\n    // sort tabindex localized to shadow dom\n    // see https://github.com/medialize/ally.js/issues/6\n    elements = sortShadowed(elements, _context, sortElements)\n  } else {\n    elements = sortElements(elements, _context)\n  }\n\n  if (includeContext) {\n    // if we include the context itself, it has to be the first\n    // element of the sequence\n    elements = moveContextToBeginning(elements, _context)\n  }\n\n  return elements\n}\n\n// codes mostly cloned from https://github.com/keithamus/jwerty/blob/master/jwerty.js\n// deliberately not exposing characters like <,.-#* because they vary *wildly*\n// across keyboard layouts and may cause various problems\n// (e.g. \"*\" is \"Shift +\" on a German Mac keyboard)\n// (e.g. \"@\" is \"Alt L\" on a German Mac keyboard)\n\nvar keycode = {\n  // Element Focus\n  tab: 9,\n\n  // Navigation\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  pageUp: 33,\n  'page-up': 33,\n  pageDown: 34,\n  'page-down': 34,\n  end: 35,\n  home: 36,\n\n  // Action\n  enter: 13,\n  escape: 27,\n  space: 32,\n\n  // Modifier\n  shift: 16,\n  capsLock: 20,\n  'caps-lock': 20,\n  ctrl: 17,\n  alt: 18,\n  meta: 91,\n  // in firefox: 224\n  // on mac (chrome): meta-left=91, meta-right=93\n  // on win (IE11): meta-left=91, meta-right=92\n  pause: 19,\n\n  // Content Manipulation\n  insert: 45,\n  delete: 46,\n  backspace: 8,\n\n  // the same logical key may be identified through different keyCodes\n  _alias: {\n    91: [92, 93, 224],\n  },\n}\n\n// Function keys (112 - 137)\n// NOTE: not every keyboard knows F13+\nfor (var n = 1; n < 26; n++) {\n  keycode['f' + n] = n + 111\n}\n\n// Number keys (48-57, numpad 96-105)\n// NOTE: not every keyboard knows num-0+\nfor (var _n = 0; _n < 10; _n++) {\n  var code = _n + 48\n  var numCode = _n + 96\n  keycode[_n] = code\n  keycode['num-' + _n] = numCode\n  keycode._alias[code] = [numCode]\n}\n\n// Latin characters (65 - 90)\nfor (var _n2 = 0; _n2 < 26; _n2++) {\n  var _code = _n2 + 65\n  var name$1 = String.fromCharCode(_code).toLowerCase()\n  keycode[name$1] = _code\n}\n\nvar modifier = {\n  alt: 'altKey',\n  ctrl: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey',\n}\n\nvar modifierSequence = Object.keys(modifier).map(function (name) {\n  return modifier[name]\n})\n\nfunction createExpectedModifiers(ignoreModifiers) {\n  var value = ignoreModifiers ? null : false\n  return {\n    altKey: value,\n    ctrlKey: value,\n    metaKey: value,\n    shiftKey: value,\n  }\n}\n\nfunction resolveModifiers(modifiers) {\n  var ignoreModifiers = modifiers.indexOf('*') !== -1\n  var expected = createExpectedModifiers(ignoreModifiers)\n\n  modifiers.forEach(function (token) {\n    if (token === '*') {\n      // we've already covered the all-in operator\n      return\n    }\n\n    // we want the modifier pressed\n    var value = true\n    var operator = token.slice(0, 1)\n    if (operator === '?') {\n      // we don't care if the modifier is pressed\n      value = null\n    } else if (operator === '!') {\n      // we do not want the modifier pressed\n      value = false\n    }\n\n    if (value !== true) {\n      // compensate for the modifier's operator\n      token = token.slice(1)\n    }\n\n    var propertyName = modifier[token]\n    if (!propertyName) {\n      throw new TypeError('Unknown modifier \"' + token + '\"')\n    }\n\n    expected[propertyName] = value\n  })\n\n  return expected\n}\n\nfunction resolveKey(key) {\n  var code = keycode[key] || parseInt(key, 10)\n  if (!code || typeof code !== 'number' || isNaN(code)) {\n    throw new TypeError('Unknown key \"' + key + '\"')\n  }\n\n  return [code].concat(keycode._alias[code] || [])\n}\n\nfunction matchModifiers(expected, event) {\n  // returns true on match\n  return !modifierSequence.some(function (prop) {\n    // returns true on mismatch\n    return (\n      typeof expected[prop] === 'boolean' &&\n      Boolean(event[prop]) !== expected[prop]\n    )\n  })\n}\n\nfunction keyBinding(text) {\n  return text.split(/\\s+/).map(function (_text) {\n    var tokens = _text.split('+')\n    var _modifiers = resolveModifiers(tokens.slice(0, -1))\n    var _keyCodes = resolveKey(tokens.slice(-1))\n    return {\n      keyCodes: _keyCodes,\n      modifiers: _modifiers,\n      matchModifiers: matchModifiers.bind(null, _modifiers),\n    }\n  })\n}\n\n// Node.compareDocumentPosition is available since IE9\n// see https://developer.mozilla.org/en-US/docs/Web/API/Node.compareDocumentPosition\n\n// callback returns true when element is contained by parent or is the parent suited for use with Array.some()\n/*\n  USAGE:\n    var isChildOf = getParentComparator({parent: someNode});\n    listOfElements.some(isChildOf)\n*/\n\nfunction getParentComparator() {\n  var _ref =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    parent = _ref.parent,\n    element = _ref.element,\n    includeSelf = _ref.includeSelf\n\n  if (parent) {\n    return function isChildOf(node) {\n      return Boolean(\n        (includeSelf && node === parent) ||\n        parent.compareDocumentPosition(node) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n      )\n    }\n  } else if (element) {\n    return function isParentOf(node) {\n      return Boolean(\n        (includeSelf && element === node) ||\n        node.compareDocumentPosition(element) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n      )\n    }\n  }\n\n  throw new TypeError(\n    'util/compare-position#getParentComparator required either options.parent or options.element'\n  )\n}\n\n// Bug 286933 - Key events in the autocomplete popup should be hidden from page scripts\n// @browser-issue Gecko https://bugzilla.mozilla.org/show_bug.cgi?id=286933\n\nfunction whenKey() {\n  var map =\n    arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\n\n  var bindings = {}\n\n  var context = nodeArray(map.context)[0] || document.documentElement\n  delete map.context\n  var filter = nodeArray(map.filter)\n  delete map.filter\n\n  var mapKeys = Object.keys(map)\n  if (!mapKeys.length) {\n    throw new TypeError('when/key requires at least one option key')\n  }\n\n  var registerBinding = function registerBinding(event) {\n    event.keyCodes.forEach(function (code) {\n      if (!bindings[code]) {\n        bindings[code] = []\n      }\n\n      bindings[code].push(event)\n    })\n  }\n\n  mapKeys.forEach(function (text) {\n    if (typeof map[text] !== 'function') {\n      throw new TypeError(\n        'when/key requires option[\"' + text + '\"] to be a function'\n      )\n    }\n\n    var addCallback = function addCallback(event) {\n      event.callback = map[text]\n      return event\n    }\n\n    keyBinding(text).map(addCallback).forEach(registerBinding)\n  })\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (event.defaultPrevented) {\n      return\n    }\n\n    if (filter.length) {\n      // ignore elements within the exempted sub-trees\n      var isParentOfElement = getParentComparator({\n        element: event.target,\n        includeSelf: true,\n      })\n      if (filter.some(isParentOfElement)) {\n        return\n      }\n    }\n\n    var key = event.keyCode || event.which\n    if (!bindings[key]) {\n      return\n    }\n\n    bindings[key].forEach(function (_event) {\n      if (!_event.matchModifiers(event)) {\n        return\n      }\n\n      _event.callback.call(context, event, disengage)\n    })\n  }\n\n  context.addEventListener('keydown', handleKeyDown, false)\n\n  var disengage = function disengage() {\n    context.removeEventListener('keydown', handleKeyDown, false)\n  }\n\n  return { disengage: disengage }\n}\n\nexport default function ({ context } = {}) {\n  if (!context) {\n    context = document.documentElement\n  }\n\n  // Make sure the supports tests are run before intercepting the Tab key,\n  // or IE10 and IE11 will fail to process the first Tab key event. Not\n  // limiting this warm-up to IE because it may be a problem elsewhere, too.\n  queryTabsequence()\n\n  return whenKey({\n    // Safari on OSX may require ALT+TAB to reach links,\n    // see https://github.com/medialize/ally.js/issues/146\n    '?alt+?shift+tab': function altShiftTab(event) {\n      // we're completely taking over the Tab key handling\n      event.preventDefault()\n\n      var sequence = queryTabsequence({\n        context: context,\n      })\n\n      var backward = event.shiftKey\n      var first = sequence[0]\n      var last = sequence[sequence.length - 1]\n\n      // wrap around first to last, last to first\n      var source = backward ? first : last\n      var target = backward ? last : first\n      if (isActiveElement(source)) {\n        target.focus()\n        return\n      }\n\n      // find current position in tabsequence\n      var currentIndex = void 0\n      var found = sequence.some(function (element, index) {\n        if (!isActiveElement(element)) {\n          return false\n        }\n\n        currentIndex = index\n        return true\n      })\n\n      if (!found) {\n        // redirect to first as we're not in our tabsequence\n        first.focus()\n        return\n      }\n\n      // shift focus to previous/next element in the sequence\n      var offset = backward ? -1 : 1\n      sequence[currentIndex + offset].focus()\n    },\n  })\n}\n"],"mappings":"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"}