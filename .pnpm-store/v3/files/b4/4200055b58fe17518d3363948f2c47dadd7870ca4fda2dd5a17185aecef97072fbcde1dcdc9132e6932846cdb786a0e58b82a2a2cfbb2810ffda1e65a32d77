{"version":3,"file":"utils.js","names":["prettifyStack","errorInformation","txt","Array","isArray","join","Anser","ansiToJson","remove_empty","use_classes","json","openInEditor","file","lineNumber","fetch","window","encodeURIComponent","reloadPage","location","reload","skipSSR","searchParams","URLSearchParams","search","set","toString","getCodeFrameInformationFromStackTrace","stackTrace","stackFrame","find","fileName","getFileName","moduleId","formatFilename","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","lineNumberRegex","error","match","filename","htmlMatch","exec","sourceMatch"],"sources":["../../fast-refresh-overlay/utils.js"],"sourcesContent":["import Anser from \"anser\"\n\nexport function prettifyStack(errorInformation) {\n  let txt\n  if (Array.isArray(errorInformation)) {\n    txt = errorInformation.join(`\\n`)\n  } else {\n    txt = errorInformation\n  }\n  return Anser.ansiToJson(txt, {\n    remove_empty: true,\n    use_classes: true,\n    json: true,\n  })\n}\n\nexport function openInEditor(file, lineNumber = 1) {\n  fetch(\n    `/__open-stack-frame-in-editor?fileName=` +\n      window.encodeURIComponent(file) +\n      `&lineNumber=` +\n      window.encodeURIComponent(lineNumber)\n  )\n}\n\nexport function reloadPage() {\n  window.location.reload()\n}\n\nexport function skipSSR() {\n  if (`URLSearchParams` in window) {\n    const searchParams = new URLSearchParams(window.location.search)\n    searchParams.set(`skip-ssr`, `true`)\n    window.location.search = searchParams.toString()\n  }\n}\n\nexport function getCodeFrameInformationFromStackTrace(stackTrace) {\n  const stackFrame = stackTrace.find(stackFrame => {\n    const fileName = stackFrame.getFileName()\n    return fileName && fileName !== `[native code]` // Quirk of Safari error stack frames\n  })\n\n  if (!stackFrame) {\n    return null\n  }\n\n  const moduleId = formatFilename(stackFrame.getFileName())\n  const lineNumber = stackFrame.getLineNumber()\n  const columnNumber = stackFrame.getColumnNumber()\n  const functionName = stackFrame.getFunctionName()\n\n  return {\n    moduleId,\n    lineNumber,\n    columnNumber,\n    functionName,\n  }\n}\n\nconst lineNumberRegex = /^[0-9]*:[0-9]*$/g\n\nexport function getLineNumber(error) {\n  const match = error.match(lineNumberRegex)\n\n  return match?.[1]\n}\n\nexport function formatFilename(filename) {\n  const htmlMatch = /^https?:\\/\\/(.*)\\/(.*)/.exec(filename)\n  if (htmlMatch && htmlMatch[1] && htmlMatch[2]) {\n    return htmlMatch[2]\n  }\n\n  const sourceMatch = /^webpack-internal:\\/\\/\\/(.*)$/.exec(filename)\n  if (sourceMatch && sourceMatch[1]) {\n    return sourceMatch[1]\n  }\n\n  return filename\n}\n"],"mappings":";;;;;;;;;;;AAAA;AAEO,SAASA,aAAa,CAACC,gBAAgB,EAAE;EAC9C,IAAIC,GAAG;EACP,IAAIC,KAAK,CAACC,OAAO,CAACH,gBAAgB,CAAC,EAAE;IACnCC,GAAG,GAAGD,gBAAgB,CAACI,IAAI,CAAE,IAAG,CAAC;EACnC,CAAC,MAAM;IACLH,GAAG,GAAGD,gBAAgB;EACxB;EACA,OAAOK,cAAK,CAACC,UAAU,CAACL,GAAG,EAAE;IAC3BM,YAAY,EAAE,IAAI;IAClBC,WAAW,EAAE,IAAI;IACjBC,IAAI,EAAE;EACR,CAAC,CAAC;AACJ;AAEO,SAASC,YAAY,CAACC,IAAI,EAAEC,UAAU,GAAG,CAAC,EAAE;EACjDC,KAAK,CACF,yCAAwC,GACvCC,MAAM,CAACC,kBAAkB,CAACJ,IAAI,CAAC,GAC9B,cAAa,GACdG,MAAM,CAACC,kBAAkB,CAACH,UAAU,CAAC,CACxC;AACH;AAEO,SAASI,UAAU,GAAG;EAC3BF,MAAM,CAACG,QAAQ,CAACC,MAAM,EAAE;AAC1B;AAEO,SAASC,OAAO,GAAG;EACxB,IAAK,iBAAgB,IAAIL,MAAM,EAAE;IAC/B,MAAMM,YAAY,GAAG,IAAIC,eAAe,CAACP,MAAM,CAACG,QAAQ,CAACK,MAAM,CAAC;IAChEF,YAAY,CAACG,GAAG,CAAE,UAAS,EAAG,MAAK,CAAC;IACpCT,MAAM,CAACG,QAAQ,CAACK,MAAM,GAAGF,YAAY,CAACI,QAAQ,EAAE;EAClD;AACF;AAEO,SAASC,qCAAqC,CAACC,UAAU,EAAE;EAChE,MAAMC,UAAU,GAAGD,UAAU,CAACE,IAAI,CAACD,UAAU,IAAI;IAC/C,MAAME,QAAQ,GAAGF,UAAU,CAACG,WAAW,EAAE;IACzC,OAAOD,QAAQ,IAAIA,QAAQ,KAAM,eAAc,EAAC;EAClD,CAAC,CAAC;;EAEF,IAAI,CAACF,UAAU,EAAE;IACf,OAAO,IAAI;EACb;EAEA,MAAMI,QAAQ,GAAGC,cAAc,CAACL,UAAU,CAACG,WAAW,EAAE,CAAC;EACzD,MAAMlB,UAAU,GAAGe,UAAU,CAACM,aAAa,EAAE;EAC7C,MAAMC,YAAY,GAAGP,UAAU,CAACQ,eAAe,EAAE;EACjD,MAAMC,YAAY,GAAGT,UAAU,CAACU,eAAe,EAAE;EAEjD,OAAO;IACLN,QAAQ;IACRnB,UAAU;IACVsB,YAAY;IACZE;EACF,CAAC;AACH;AAEA,MAAME,eAAe,GAAG,kBAAkB;AAEnC,SAASL,aAAa,CAACM,KAAK,EAAE;EACnC,MAAMC,KAAK,GAAGD,KAAK,CAACC,KAAK,CAACF,eAAe,CAAC;EAE1C,OAAOE,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAG,CAAC,CAAC;AACnB;AAEO,SAASR,cAAc,CAACS,QAAQ,EAAE;EACvC,MAAMC,SAAS,GAAG,wBAAwB,CAACC,IAAI,CAACF,QAAQ,CAAC;EACzD,IAAIC,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE;IAC7C,OAAOA,SAAS,CAAC,CAAC,CAAC;EACrB;EAEA,MAAME,WAAW,GAAG,+BAA+B,CAACD,IAAI,CAACF,QAAQ,CAAC;EAClE,IAAIG,WAAW,IAAIA,WAAW,CAAC,CAAC,CAAC,EAAE;IACjC,OAAOA,WAAW,CAAC,CAAC,CAAC;EACvB;EAEA,OAAOH,QAAQ;AACjB"}