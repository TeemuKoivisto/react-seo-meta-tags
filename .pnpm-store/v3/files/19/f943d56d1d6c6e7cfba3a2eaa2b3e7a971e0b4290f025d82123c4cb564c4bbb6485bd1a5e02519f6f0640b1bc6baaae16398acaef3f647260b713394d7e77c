{"version":3,"file":"datastore.js","names":["dataStore","getDataStore","setupLmdbStore","require","emitter","on"],"sources":["../../src/datastore/datastore.ts"],"sourcesContent":["import { IDataStore } from \"./types\"\nimport { emitter } from \"../redux\"\n\nlet dataStore: IDataStore\n\nexport function getDataStore(): IDataStore {\n  if (!dataStore) {\n    const { setupLmdbStore } = require(`./lmdb/lmdb-datastore`)\n    dataStore = setupLmdbStore()\n  }\n  return dataStore\n}\n\n// It is possible that the store is not initialized yet when calling `DELETE_CACHE`.\n//  The code below ensures we wipe cache from the proper store\n//  (mostly relevant for tests)\nemitter.on(`DELETE_CACHE`, () => {\n  getDataStore()\n})\n"],"mappings":";;;;AACA;AAEA,IAAIA,SAAqB;AAElB,SAASC,YAAY,GAAe;EACzC,IAAI,CAACD,SAAS,EAAE;IACd,MAAM;MAAEE;IAAe,CAAC,GAAGC,OAAO,CAAE,uBAAsB,CAAC;IAC3DH,SAAS,GAAGE,cAAc,EAAE;EAC9B;EACA,OAAOF,SAAS;AAClB;;AAEA;AACA;AACA;AACAI,cAAO,CAACC,EAAE,CAAE,cAAa,EAAE,MAAM;EAC/BJ,YAAY,EAAE;AAChB,CAAC,CAAC"}