{"version":3,"file":"index.js","names":["initJobsMessagingInWorker","initReporterMessagingInWorker","isWorker","global","__GATSBY","process","env","GATSBY_NODE_GLOBALS","JSON","parse","deleteModuleCache","htmlComponentRendererPath","require","cache","resolve"],"sources":["../../../../src/utils/worker/child/index.ts"],"sourcesContent":["import { isWorker } from \"gatsby-worker\"\nimport { initJobsMessagingInWorker } from \"../../jobs/worker-messaging\"\nimport { initReporterMessagingInWorker } from \"../reporter\"\n\ninitJobsMessagingInWorker()\ninitReporterMessagingInWorker()\n\n// set global gatsby object like we do in develop & build\nif (isWorker) {\n  global.__GATSBY = process.env.GATSBY_NODE_GLOBALS\n    ? JSON.parse(process.env.GATSBY_NODE_GLOBALS)\n    : {}\n}\n\nexport {\n  renderHTMLProd,\n  renderHTMLDev,\n  renderPartialHydrationProd,\n  renderSlices,\n} from \"./render-html\"\nexport { setInferenceMetadata, buildSchema } from \"./schema\"\nexport { setComponents, runQueries, saveQueriesDependencies } from \"./queries\"\nexport { loadConfigAndPlugins } from \"./load-config-and-plugins\"\n\n// Let Gatsby force worker to grab latest version of `public/render-page.js`\nexport function deleteModuleCache(htmlComponentRendererPath: string): void {\n  delete require.cache[require.resolve(htmlComponentRendererPath)]\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAYA;AAKsB;AAAA;AAAA;AAAA;AACtB;AAA4D;AAAA;AAC5D;AAA8E;AAAA;AAAA;AAC9E;AAAgE;AAlBhE,IAAAA,0CAAyB,GAAE;AAC3B,IAAAC,uCAA6B,GAAE;;AAE/B;AACA,IAAIC,sBAAQ,EAAE;EACZC,MAAM,CAACC,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB,GAC7CC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAACC,GAAG,CAACC,mBAAmB,CAAC,GAC3C,CAAC,CAAC;AACR;AAYA;AACO,SAASG,iBAAiB,CAACC,yBAAiC,EAAQ;EACzE,OAAOC,OAAO,CAACC,KAAK,CAACD,OAAO,CAACE,OAAO,CAACH,yBAAyB,CAAC,CAAC;AAClE"}