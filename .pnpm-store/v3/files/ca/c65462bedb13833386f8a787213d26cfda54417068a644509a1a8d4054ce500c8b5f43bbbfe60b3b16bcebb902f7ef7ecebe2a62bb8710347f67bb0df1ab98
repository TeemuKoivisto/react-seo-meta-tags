{"version":3,"file":"clear-require-cache.js","names":["clearRequireCacheRecursively","module","ignoreNodeModules","resolvedModule","require","resolve","cacheEntry","cache","includes","parent","index","children","findIndex","c","filename","splice","forEach"],"sources":["../../src/utils/clear-require-cache.ts"],"sourcesContent":["export function clearRequireCacheRecursively(\n  module: string,\n  ignoreNodeModules: boolean = true\n): void {\n  const resolvedModule = require.resolve(module)\n  const cacheEntry = require.cache[resolvedModule]\n  if (!cacheEntry) {\n    return\n  }\n  if (ignoreNodeModules && resolvedModule.includes(`node_modules`)) {\n    return\n  }\n  delete require.cache[resolvedModule]\n\n  const parent = cacheEntry.parent\n  if (parent) {\n    const index = parent.children.findIndex(c => c.filename === resolvedModule)\n    if (index !== -1) {\n      parent.children.splice(index, 1)\n    }\n  }\n  cacheEntry.children.forEach(module =>\n    clearRequireCacheRecursively(module.filename, ignoreNodeModules)\n  )\n}\n"],"mappings":";;;;AAAO,SAASA,4BAA4B,CAC1CC,MAAc,EACdC,iBAA0B,GAAG,IAAI,EAC3B;EACN,MAAMC,cAAc,GAAGC,OAAO,CAACC,OAAO,CAACJ,MAAM,CAAC;EAC9C,MAAMK,UAAU,GAAGF,OAAO,CAACG,KAAK,CAACJ,cAAc,CAAC;EAChD,IAAI,CAACG,UAAU,EAAE;IACf;EACF;EACA,IAAIJ,iBAAiB,IAAIC,cAAc,CAACK,QAAQ,CAAE,cAAa,CAAC,EAAE;IAChE;EACF;EACA,OAAOJ,OAAO,CAACG,KAAK,CAACJ,cAAc,CAAC;EAEpC,MAAMM,MAAM,GAAGH,UAAU,CAACG,MAAM;EAChC,IAAIA,MAAM,EAAE;IACV,MAAMC,KAAK,GAAGD,MAAM,CAACE,QAAQ,CAACC,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACC,QAAQ,KAAKX,cAAc,CAAC;IAC3E,IAAIO,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBD,MAAM,CAACE,QAAQ,CAACI,MAAM,CAACL,KAAK,EAAE,CAAC,CAAC;IAClC;EACF;EACAJ,UAAU,CAACK,QAAQ,CAACK,OAAO,CAACf,MAAM,IAChCD,4BAA4B,CAACC,MAAM,CAACa,QAAQ,EAAEZ,iBAAiB,CAAC,CACjE;AACH"}