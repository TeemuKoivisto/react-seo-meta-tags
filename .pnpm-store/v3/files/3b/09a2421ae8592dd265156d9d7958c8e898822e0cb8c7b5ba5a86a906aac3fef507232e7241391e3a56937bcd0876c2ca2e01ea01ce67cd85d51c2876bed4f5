{"version":3,"file":"pages.js","names":["pagesReducer","state","Map","action","type","plugin","name","console","log","error","JSON","stringify","Error","set","payload","path","delete","page","get","mode","pageMode"],"sources":["../../../src/redux/reducers/pages.ts"],"sourcesContent":["import {\n  IGatsbyState,\n  IGatsbyPage,\n  IDeleteCacheAction,\n  ICreatePageAction,\n  IDeletePageAction,\n  IMaterializePageMode,\n} from \"../types\"\n\nexport const pagesReducer = (\n  state: IGatsbyState[\"pages\"] = new Map<string, IGatsbyPage>(),\n  action:\n    | IDeleteCacheAction\n    | ICreatePageAction\n    | IDeletePageAction\n    | IMaterializePageMode\n): IGatsbyState[\"pages\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return new Map()\n\n    case `CREATE_PAGE`: {\n      // throws an error if the page is not created by a plugin\n      if (!action.plugin?.name) {\n        console.log(``)\n        console.error(JSON.stringify(action, null, 4))\n        console.log(``)\n\n        throw new Error(\n          `Pages can only be created by plugins. There wasn't a plugin set when creating this page.`\n        )\n      }\n\n      // Add page to the state with the path as key\n      state.set(action.payload.path, action.payload)\n\n      return state\n    }\n\n    case `DELETE_PAGE`: {\n      state.delete(action.payload.path)\n\n      return state\n    }\n\n    case `MATERIALIZE_PAGE_MODE`: {\n      const page = state.get(action.payload.path)\n      if (!page) {\n        throw new Error(`Could not find page by path: ${action.payload.path}`)\n      }\n      page.mode = action.payload.pageMode\n      return state\n    }\n\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;AASO,MAAMA,YAAY,GAAG,CAC1BC,KAA4B,GAAG,IAAIC,GAAG,EAAuB,EAC7DC,MAIwB,KACE;EAC1B,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,cAAa;MACjB,OAAO,IAAIF,GAAG,EAAE;IAElB,KAAM,aAAY;MAAE;QAAA;QAClB;QACA,IAAI,oBAACC,MAAM,CAACE,MAAM,2CAAb,eAAeC,IAAI,GAAE;UACxBC,OAAO,CAACC,GAAG,CAAE,EAAC,CAAC;UACfD,OAAO,CAACE,KAAK,CAACC,IAAI,CAACC,SAAS,CAACR,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;UAC9CI,OAAO,CAACC,GAAG,CAAE,EAAC,CAAC;UAEf,MAAM,IAAII,KAAK,CACZ,0FAAyF,CAC3F;QACH;;QAEA;QACAX,KAAK,CAACY,GAAG,CAACV,MAAM,CAACW,OAAO,CAACC,IAAI,EAAEZ,MAAM,CAACW,OAAO,CAAC;QAE9C,OAAOb,KAAK;MACd;IAEA,KAAM,aAAY;MAAE;QAClBA,KAAK,CAACe,MAAM,CAACb,MAAM,CAACW,OAAO,CAACC,IAAI,CAAC;QAEjC,OAAOd,KAAK;MACd;IAEA,KAAM,uBAAsB;MAAE;QAC5B,MAAMgB,IAAI,GAAGhB,KAAK,CAACiB,GAAG,CAACf,MAAM,CAACW,OAAO,CAACC,IAAI,CAAC;QAC3C,IAAI,CAACE,IAAI,EAAE;UACT,MAAM,IAAIL,KAAK,CAAE,gCAA+BT,MAAM,CAACW,OAAO,CAACC,IAAK,EAAC,CAAC;QACxE;QACAE,IAAI,CAACE,IAAI,GAAGhB,MAAM,CAACW,OAAO,CAACM,QAAQ;QACnC,OAAOnB,KAAK;MACd;IAEA;MACE,OAAOA,KAAK;EAAA;AAElB,CAAC;AAAA"}