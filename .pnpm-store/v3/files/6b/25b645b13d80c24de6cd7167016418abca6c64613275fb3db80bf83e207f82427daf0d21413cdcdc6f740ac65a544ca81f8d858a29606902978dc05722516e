{"version":3,"file":"eslint-config.js","names":["eslintRulePaths","path","resolve","__dirname","eslintRequirePreset","require","eslintRequiredConfig","rulePaths","useEslintrc","allowInlineConfig","emitWarning","baseConfig","parser","parserOptions","ecmaVersion","sourceType","ecmaFeatures","jsx","babelOptions","presets","requireConfigFile","globals","graphql","__PATH_PREFIX__","__TRAILING_SLASH__","__BASE_PATH__","extends","eslintConfig","usingAutomaticJsxRuntime","resolvePluginsRelativeTo","plugins","rules","allowNamespace","inputComponents","ignoreElements","ignoreRoles","includeRoles","tabbable","body","iframe","img"],"sources":["../../src/utils/eslint-config.ts"],"sourcesContent":["import { ESLint } from \"eslint\"\nimport path from \"path\"\n\nconst eslintRulePaths = path.resolve(`${__dirname}/eslint-rules`)\nconst eslintRequirePreset = require.resolve(`./eslint/required`)\n\nexport const eslintRequiredConfig: ESLint.Options = {\n  rulePaths: [eslintRulePaths],\n  useEslintrc: false,\n  allowInlineConfig: false,\n  // @ts-ignore\n  emitWarning: true,\n  baseConfig: {\n    parser: require.resolve(`@babel/eslint-parser`),\n    parserOptions: {\n      ecmaVersion: 2020,\n      sourceType: `module`,\n      ecmaFeatures: {\n        jsx: true,\n      },\n      // TODO proper check for custom babel & plugins config\n      // Currently when a babelrc is added to the project, it will override our babelOptions\n      babelOptions: {\n        presets: [require.resolve(`babel-preset-gatsby`)],\n      },\n      requireConfigFile: false,\n    },\n    globals: {\n      graphql: true,\n      __PATH_PREFIX__: true,\n      __TRAILING_SLASH__: true,\n      __BASE_PATH__: true, // this will rarely, if ever, be used by consumers\n    },\n    extends: [eslintRequirePreset],\n  },\n}\n\nexport const eslintConfig = (\n  usingAutomaticJsxRuntime: boolean\n): ESLint.Options => {\n  return {\n    useEslintrc: false,\n    resolvePluginsRelativeTo: __dirname,\n    rulePaths: [eslintRulePaths],\n    baseConfig: {\n      globals: {\n        graphql: true,\n        __PATH_PREFIX__: true,\n        __TRAILING_SLASH__: true,\n        __BASE_PATH__: true, // this will rarely, if ever, be used by consumers\n      },\n      extends: [\n        require.resolve(`eslint-config-react-app`),\n        eslintRequirePreset,\n      ],\n      parser: require.resolve(`@babel/eslint-parser`),\n      parserOptions: {\n        ecmaVersion: 2020,\n        sourceType: `module`,\n        ecmaFeatures: {\n          jsx: true,\n        },\n        // TODO proper check for custom babel & plugins config\n        // Currently when a babelrc is added to the project, it will override our babelOptions\n        babelOptions: {\n          presets: [require.resolve(`babel-preset-gatsby`)],\n        },\n        requireConfigFile: false,\n      },\n      plugins: [],\n      rules: {\n        // New versions of react use a special jsx runtime that remove the requirement\n        // for having react in scope for jsx. Once the jsx runtime is backported to all\n        // versions of react we can make this always be `off`.\n        // I would also assume that eslint-config-react-app will switch their flag to `off`\n        // when jsx runtime is stable in all common versions of React.\n        \"react/jsx-uses-react\": usingAutomaticJsxRuntime ? `off` : `error`,\n        \"react/react-in-jsx-scope\": usingAutomaticJsxRuntime ? `off` : `error`,\n        \"import/no-webpack-loader-syntax\": [0],\n        \"react/jsx-pascal-case\": [\n          `warn`,\n          {\n            allowNamespace: true,\n          },\n        ],\n        // https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/tree/master/docs/rules\n        // \"jsx-a11y/accessible-emoji\": `warn`, Deprecated\n        \"jsx-a11y/alt-text\": `warn`,\n        \"jsx-a11y/anchor-has-content\": `warn`,\n        \"jsx-a11y/anchor-is-valid\": `warn`,\n        \"jsx-a11y/aria-activedescendant-has-tabindex\": `warn`,\n        \"jsx-a11y/aria-props\": `warn`,\n        \"jsx-a11y/aria-proptypes\": `warn`,\n        \"jsx-a11y/aria-role\": `warn`,\n        \"jsx-a11y/aria-unsupported-elements\": `warn`,\n        \"jsx-a11y/autocomplete-valid\": [\n          `warn`,\n          {\n            inputComponents: [],\n          },\n        ],\n        \"jsx-a11y/click-events-have-key-events\": `warn`,\n        \"jsx-a11y/control-has-associated-label\": [\n          `warn`,\n          {\n            ignoreElements: [\n              `audio`,\n              `canvas`,\n              `embed`,\n              `input`,\n              `textarea`,\n              `tr`,\n              `video`,\n            ],\n            ignoreRoles: [\n              `grid`,\n              `listbox`,\n              `menu`,\n              `menubar`,\n              `radiogroup`,\n              `row`,\n              `tablist`,\n              `toolbar`,\n              `tree`,\n              `treegrid`,\n            ],\n            includeRoles: [`alert`, `dialog`],\n          },\n        ],\n        \"jsx-a11y/heading-has-content\": `warn`,\n        \"jsx-a11y/html-has-lang\": `warn`,\n        \"jsx-a11y/iframe-has-title\": `warn`,\n        \"jsx-a11y/img-redundant-alt\": `warn`,\n        \"jsx-a11y/interactive-supports-focus\": [\n          `warn`,\n          {\n            tabbable: [\n              `button`,\n              `checkbox`,\n              `link`,\n              `progressbar`,\n              `searchbox`,\n              `slider`,\n              `spinbutton`,\n              `switch`,\n              `textbox`,\n            ],\n          },\n        ],\n        // \"jsx-a11y/label-has-for\": `warn`, was deprecated and replaced with jsx-a11y/has-associated-control in v6.1.0\n        \"jsx-a11y/label-has-associated-control\": `warn`,\n        \"jsx-a11y/lang\": `warn`,\n        \"jsx-a11y/media-has-caption\": `warn`,\n        \"jsx-a11y/mouse-events-have-key-events\": `warn`,\n        \"jsx-a11y/no-access-key\": `warn`,\n        \"jsx-a11y/no-autofocus\": `warn`,\n        \"jsx-a11y/no-distracting-elements\": `warn`,\n        \"jsx-a11y/no-interactive-element-to-noninteractive-role\": `warn`,\n        \"jsx-a11y/no-noninteractive-element-interactions\": [\n          `warn`,\n          {\n            body: [`onError`, `onLoad`],\n            iframe: [`onError`, `onLoad`],\n            img: [`onError`, `onLoad`],\n          },\n        ],\n        \"jsx-a11y/no-noninteractive-element-to-interactive-role\": `warn`,\n        \"jsx-a11y/no-noninteractive-tabindex\": `warn`,\n        // \"jsx-a11y/no-onchange\": `warn`, Deprecated\n        \"jsx-a11y/no-redundant-roles\": `warn`,\n        \"jsx-a11y/no-static-element-interactions\": `warn`,\n        \"jsx-a11y/role-has-required-aria-props\": `warn`,\n        \"jsx-a11y/role-supports-aria-props\": `warn`,\n        \"jsx-a11y/scope\": `warn`,\n        \"jsx-a11y/tabindex-no-positive\": `warn`,\n      },\n    },\n  }\n}\n"],"mappings":";;;;;AACA;AAEA,MAAMA,eAAe,GAAGC,aAAI,CAACC,OAAO,CAAE,GAAEC,SAAU,eAAc,CAAC;AACjE,MAAMC,mBAAmB,GAAGC,OAAO,CAACH,OAAO,CAAE,mBAAkB,CAAC;AAEzD,MAAMI,oBAAoC,GAAG;EAClDC,SAAS,EAAE,CAACP,eAAe,CAAC;EAC5BQ,WAAW,EAAE,KAAK;EAClBC,iBAAiB,EAAE,KAAK;EACxB;EACAC,WAAW,EAAE,IAAI;EACjBC,UAAU,EAAE;IACVC,MAAM,EAAEP,OAAO,CAACH,OAAO,CAAE,sBAAqB,CAAC;IAC/CW,aAAa,EAAE;MACbC,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAG,QAAO;MACpBC,YAAY,EAAE;QACZC,GAAG,EAAE;MACP,CAAC;MACD;MACA;MACAC,YAAY,EAAE;QACZC,OAAO,EAAE,CAACd,OAAO,CAACH,OAAO,CAAE,qBAAoB,CAAC;MAClD,CAAC;MACDkB,iBAAiB,EAAE;IACrB,CAAC;IACDC,OAAO,EAAE;MACPC,OAAO,EAAE,IAAI;MACbC,eAAe,EAAE,IAAI;MACrBC,kBAAkB,EAAE,IAAI;MACxBC,aAAa,EAAE,IAAI,CAAE;IACvB,CAAC;;IACDC,OAAO,EAAE,CAACtB,mBAAmB;EAC/B;AACF,CAAC;AAAA;AAEM,MAAMuB,YAAY,GACvBC,wBAAiC,IACd;EACnB,OAAO;IACLpB,WAAW,EAAE,KAAK;IAClBqB,wBAAwB,EAAE1B,SAAS;IACnCI,SAAS,EAAE,CAACP,eAAe,CAAC;IAC5BW,UAAU,EAAE;MACVU,OAAO,EAAE;QACPC,OAAO,EAAE,IAAI;QACbC,eAAe,EAAE,IAAI;QACrBC,kBAAkB,EAAE,IAAI;QACxBC,aAAa,EAAE,IAAI,CAAE;MACvB,CAAC;;MACDC,OAAO,EAAE,CACPrB,OAAO,CAACH,OAAO,CAAE,yBAAwB,CAAC,EAC1CE,mBAAmB,CACpB;MACDQ,MAAM,EAAEP,OAAO,CAACH,OAAO,CAAE,sBAAqB,CAAC;MAC/CW,aAAa,EAAE;QACbC,WAAW,EAAE,IAAI;QACjBC,UAAU,EAAG,QAAO;QACpBC,YAAY,EAAE;UACZC,GAAG,EAAE;QACP,CAAC;QACD;QACA;QACAC,YAAY,EAAE;UACZC,OAAO,EAAE,CAACd,OAAO,CAACH,OAAO,CAAE,qBAAoB,CAAC;QAClD,CAAC;QACDkB,iBAAiB,EAAE;MACrB,CAAC;MACDU,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE;QACL;QACA;QACA;QACA;QACA;QACA,sBAAsB,EAAEH,wBAAwB,GAAI,KAAI,GAAI,OAAM;QAClE,0BAA0B,EAAEA,wBAAwB,GAAI,KAAI,GAAI,OAAM;QACtE,iCAAiC,EAAE,CAAC,CAAC,CAAC;QACtC,uBAAuB,EAAE,CACtB,MAAK,EACN;UACEI,cAAc,EAAE;QAClB,CAAC,CACF;QACD;QACA;QACA,mBAAmB,EAAG,MAAK;QAC3B,6BAA6B,EAAG,MAAK;QACrC,0BAA0B,EAAG,MAAK;QAClC,6CAA6C,EAAG,MAAK;QACrD,qBAAqB,EAAG,MAAK;QAC7B,yBAAyB,EAAG,MAAK;QACjC,oBAAoB,EAAG,MAAK;QAC5B,oCAAoC,EAAG,MAAK;QAC5C,6BAA6B,EAAE,CAC5B,MAAK,EACN;UACEC,eAAe,EAAE;QACnB,CAAC,CACF;QACD,uCAAuC,EAAG,MAAK;QAC/C,uCAAuC,EAAE,CACtC,MAAK,EACN;UACEC,cAAc,EAAE,CACb,OAAM,EACN,QAAO,EACP,OAAM,EACN,OAAM,EACN,UAAS,EACT,IAAG,EACH,OAAM,CACR;UACDC,WAAW,EAAE,CACV,MAAK,EACL,SAAQ,EACR,MAAK,EACL,SAAQ,EACR,YAAW,EACX,KAAI,EACJ,SAAQ,EACR,SAAQ,EACR,MAAK,EACL,UAAS,CACX;UACDC,YAAY,EAAE,CAAE,OAAM,EAAG,QAAO;QAClC,CAAC,CACF;QACD,8BAA8B,EAAG,MAAK;QACtC,wBAAwB,EAAG,MAAK;QAChC,2BAA2B,EAAG,MAAK;QACnC,4BAA4B,EAAG,MAAK;QACpC,qCAAqC,EAAE,CACpC,MAAK,EACN;UACEC,QAAQ,EAAE,CACP,QAAO,EACP,UAAS,EACT,MAAK,EACL,aAAY,EACZ,WAAU,EACV,QAAO,EACP,YAAW,EACX,QAAO,EACP,SAAQ;QAEb,CAAC,CACF;QACD;QACA,uCAAuC,EAAG,MAAK;QAC/C,eAAe,EAAG,MAAK;QACvB,4BAA4B,EAAG,MAAK;QACpC,uCAAuC,EAAG,MAAK;QAC/C,wBAAwB,EAAG,MAAK;QAChC,uBAAuB,EAAG,MAAK;QAC/B,kCAAkC,EAAG,MAAK;QAC1C,wDAAwD,EAAG,MAAK;QAChE,iDAAiD,EAAE,CAChD,MAAK,EACN;UACEC,IAAI,EAAE,CAAE,SAAQ,EAAG,QAAO,CAAC;UAC3BC,MAAM,EAAE,CAAE,SAAQ,EAAG,QAAO,CAAC;UAC7BC,GAAG,EAAE,CAAE,SAAQ,EAAG,QAAO;QAC3B,CAAC,CACF;QACD,wDAAwD,EAAG,MAAK;QAChE,qCAAqC,EAAG,MAAK;QAC7C;QACA,6BAA6B,EAAG,MAAK;QACrC,yCAAyC,EAAG,MAAK;QACjD,uCAAuC,EAAG,MAAK;QAC/C,mCAAmC,EAAG,MAAK;QAC3C,gBAAgB,EAAG,MAAK;QACxB,+BAA+B,EAAG;MACpC;IACF;EACF,CAAC;AACH,CAAC;AAAA"}