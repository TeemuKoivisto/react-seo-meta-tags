{"version":3,"file":"telemetry.js","names":["initialState","gatsbyImageSourceUrls","Set","telemetryReducer","state","action","type","sourceUrl","payload","add","queryStateTelemetryChunk","urlsFromWorker","forEach","url"],"sources":["../../../src/redux/reducers/telemetry.ts"],"sourcesContent":["import { ActionsUnion, IGatsbyState } from \"../types\"\n\nconst initialState = {\n  gatsbyImageSourceUrls: new Set<string>(),\n}\n\nexport const telemetryReducer = (\n  state: IGatsbyState[\"telemetry\"] = initialState,\n  action: ActionsUnion\n): IGatsbyState[\"telemetry\"] => {\n  switch (action.type) {\n    case `PROCESS_GATSBY_IMAGE_SOURCE_URL`: {\n      const { sourceUrl } = action.payload\n      state.gatsbyImageSourceUrls.add(sourceUrl)\n      return state\n    }\n    case `CLEAR_GATSBY_IMAGE_SOURCE_URL`: {\n      state.gatsbyImageSourceUrls = new Set<string>()\n      return state\n    }\n    case `MERGE_WORKER_QUERY_STATE`: {\n      const { queryStateTelemetryChunk } = action.payload\n\n      // This action may be dispatched in cases where queries might not be included in the merge data\n      if (!queryStateTelemetryChunk) {\n        return state\n      }\n\n      const urlsFromWorker =\n        queryStateTelemetryChunk.gatsbyImageSourceUrls || new Set<string>()\n\n      urlsFromWorker.forEach(url => {\n        state.gatsbyImageSourceUrls.add(url)\n      })\n\n      return state\n    }\n    default: {\n      return state\n    }\n  }\n}\n"],"mappings":";;;;AAEA,MAAMA,YAAY,GAAG;EACnBC,qBAAqB,EAAE,IAAIC,GAAG;AAChC,CAAC;AAEM,MAAMC,gBAAgB,GAAG,CAC9BC,KAAgC,GAAGJ,YAAY,EAC/CK,MAAoB,KACU;EAC9B,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,iCAAgC;MAAE;QACtC,MAAM;UAAEC;QAAU,CAAC,GAAGF,MAAM,CAACG,OAAO;QACpCJ,KAAK,CAACH,qBAAqB,CAACQ,GAAG,CAACF,SAAS,CAAC;QAC1C,OAAOH,KAAK;MACd;IACA,KAAM,+BAA8B;MAAE;QACpCA,KAAK,CAACH,qBAAqB,GAAG,IAAIC,GAAG,EAAU;QAC/C,OAAOE,KAAK;MACd;IACA,KAAM,0BAAyB;MAAE;QAC/B,MAAM;UAAEM;QAAyB,CAAC,GAAGL,MAAM,CAACG,OAAO;;QAEnD;QACA,IAAI,CAACE,wBAAwB,EAAE;UAC7B,OAAON,KAAK;QACd;QAEA,MAAMO,cAAc,GAClBD,wBAAwB,CAACT,qBAAqB,IAAI,IAAIC,GAAG,EAAU;QAErES,cAAc,CAACC,OAAO,CAACC,GAAG,IAAI;UAC5BT,KAAK,CAACH,qBAAqB,CAACQ,GAAG,CAACI,GAAG,CAAC;QACtC,CAAC,CAAC;QAEF,OAAOT,KAAK;MACd;IACA;MAAS;QACP,OAAOA,KAAK;MACd;EAAC;AAEL,CAAC;AAAA"}