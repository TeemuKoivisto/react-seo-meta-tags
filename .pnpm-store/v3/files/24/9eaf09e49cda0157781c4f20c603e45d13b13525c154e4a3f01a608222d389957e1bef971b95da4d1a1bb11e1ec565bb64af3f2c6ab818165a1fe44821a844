{"version":3,"file":"listen-for-mutations.js","names":["listenForMutations","callback","emitMutation","event","type","payload","emitSourceChange","emitWebhook","emitQueryRunRequest","emitSetSchema","emitGraphQLDefinitions","emitter","on","unsubscribeFromMutationListening","off"],"sources":["../../src/services/listen-for-mutations.ts"],"sourcesContent":["import { emitter } from \"../redux\"\nimport { InvokeCallback, Sender } from \"xstate\"\n\nexport const listenForMutations: InvokeCallback = (callback: Sender<any>) => {\n  const emitMutation = (event: unknown): void => {\n    callback({ type: `ADD_NODE_MUTATION`, payload: event })\n  }\n\n  const emitSourceChange = (event: unknown): void => {\n    callback({ type: `SOURCE_FILE_CHANGED`, payload: event })\n  }\n\n  const emitWebhook = (event: unknown): void => {\n    callback({ type: `WEBHOOK_RECEIVED`, payload: event })\n  }\n\n  const emitQueryRunRequest = (event: unknown): void => {\n    callback({ type: `QUERY_RUN_REQUESTED`, payload: event })\n  }\n\n  const emitSetSchema = (event: unknown): void => {\n    callback({ type: `SET_SCHEMA`, payload: event })\n  }\n\n  const emitGraphQLDefinitions = (event: unknown): void => {\n    callback({ type: `SET_GRAPHQL_DEFINITIONS`, payload: event })\n  }\n\n  emitter.on(`ENQUEUE_NODE_MUTATION`, emitMutation)\n  emitter.on(`WEBHOOK_RECEIVED`, emitWebhook)\n  emitter.on(`SOURCE_FILE_CHANGED`, emitSourceChange)\n  emitter.on(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n  emitter.on(`SET_SCHEMA`, emitSetSchema)\n  emitter.on(`SET_GRAPHQL_DEFINITIONS`, emitGraphQLDefinitions)\n\n  return function unsubscribeFromMutationListening(): void {\n    emitter.off(`ENQUEUE_NODE_MUTATION`, emitMutation)\n    emitter.off(`WEBHOOK_RECEIVED`, emitWebhook)\n    emitter.off(`SOURCE_FILE_CHANGED`, emitSourceChange)\n    emitter.off(`QUERY_RUN_REQUESTED`, emitQueryRunRequest)\n    emitter.off(`SET_SCHEMA`, emitSetSchema)\n    emitter.off(`SET_GRAPHQL_DEFINITIONS`, emitGraphQLDefinitions)\n  }\n}\n"],"mappings":";;;;AAAA;AAGO,MAAMA,kBAAkC,GAAIC,QAAqB,IAAK;EAC3E,MAAMC,YAAY,GAAIC,KAAc,IAAW;IAC7CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,mBAAkB;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EACzD,CAAC;EAED,MAAMG,gBAAgB,GAAIH,KAAc,IAAW;IACjDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,qBAAoB;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EAC3D,CAAC;EAED,MAAMI,WAAW,GAAIJ,KAAc,IAAW;IAC5CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,kBAAiB;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EACxD,CAAC;EAED,MAAMK,mBAAmB,GAAIL,KAAc,IAAW;IACpDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,qBAAoB;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EAC3D,CAAC;EAED,MAAMM,aAAa,GAAIN,KAAc,IAAW;IAC9CF,QAAQ,CAAC;MAAEG,IAAI,EAAG,YAAW;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EAClD,CAAC;EAED,MAAMO,sBAAsB,GAAIP,KAAc,IAAW;IACvDF,QAAQ,CAAC;MAAEG,IAAI,EAAG,yBAAwB;MAAEC,OAAO,EAAEF;IAAM,CAAC,CAAC;EAC/D,CAAC;EAEDQ,cAAO,CAACC,EAAE,CAAE,uBAAsB,EAAEV,YAAY,CAAC;EACjDS,cAAO,CAACC,EAAE,CAAE,kBAAiB,EAAEL,WAAW,CAAC;EAC3CI,cAAO,CAACC,EAAE,CAAE,qBAAoB,EAAEN,gBAAgB,CAAC;EACnDK,cAAO,CAACC,EAAE,CAAE,qBAAoB,EAAEJ,mBAAmB,CAAC;EACtDG,cAAO,CAACC,EAAE,CAAE,YAAW,EAAEH,aAAa,CAAC;EACvCE,cAAO,CAACC,EAAE,CAAE,yBAAwB,EAAEF,sBAAsB,CAAC;EAE7D,OAAO,SAASG,gCAAgC,GAAS;IACvDF,cAAO,CAACG,GAAG,CAAE,uBAAsB,EAAEZ,YAAY,CAAC;IAClDS,cAAO,CAACG,GAAG,CAAE,kBAAiB,EAAEP,WAAW,CAAC;IAC5CI,cAAO,CAACG,GAAG,CAAE,qBAAoB,EAAER,gBAAgB,CAAC;IACpDK,cAAO,CAACG,GAAG,CAAE,qBAAoB,EAAEN,mBAAmB,CAAC;IACvDG,cAAO,CAACG,GAAG,CAAE,YAAW,EAAEL,aAAa,CAAC;IACxCE,cAAO,CAACG,GAAG,CAAE,yBAAwB,EAAEJ,sBAAsB,CAAC;EAChE,CAAC;AACH,CAAC;AAAA"}