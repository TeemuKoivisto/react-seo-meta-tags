{"version":3,"file":"jaeger-local.js","names":["tracer","create","config","serviceName","reporter","collectorEndpoint","sampler","type","param","options","initTracer","stop","Promise","resolve","close"],"sources":["../../../src/utils/tracer/jaeger-local.ts"],"sourcesContent":["import { initTracer, JaegerTracer, TracingConfig } from \"jaeger-client\"\n\nlet tracer: JaegerTracer\n\nfunction create(): JaegerTracer {\n  // See schema\n  // https://github.com/jaegertracing/jaeger-client-node/blob/master/src/configuration.js#L37\n  const config: TracingConfig = {\n    serviceName: `gatsby`,\n    reporter: {\n      // Provide the traces endpoint; this forces the client to\n      // connect directly to the Collector and send spans over HTTP\n      collectorEndpoint: `http://localhost:14268/api/traces`,\n    },\n    sampler: {\n      type: `const`,\n      param: 1,\n    },\n  }\n  const options = {}\n  tracer = initTracer(config, options)\n  return tracer\n}\n\nfunction stop(): Promise<void> {\n  return new Promise(resolve => {\n    tracer.close(resolve)\n  })\n}\n\nexport { create, stop }\n"],"mappings":";;;;;AAAA;AAEA,IAAIA,MAAoB;AAExB,SAASC,MAAM,GAAiB;EAC9B;EACA;EACA,MAAMC,MAAqB,GAAG;IAC5BC,WAAW,EAAG,QAAO;IACrBC,QAAQ,EAAE;MACR;MACA;MACAC,iBAAiB,EAAG;IACtB,CAAC;IACDC,OAAO,EAAE;MACPC,IAAI,EAAG,OAAM;MACbC,KAAK,EAAE;IACT;EACF,CAAC;EACD,MAAMC,OAAO,GAAG,CAAC,CAAC;EAClBT,MAAM,GAAG,IAAAU,wBAAU,EAACR,MAAM,EAAEO,OAAO,CAAC;EACpC,OAAOT,MAAM;AACf;AAEA,SAASW,IAAI,GAAkB;EAC7B,OAAO,IAAIC,OAAO,CAACC,OAAO,IAAI;IAC5Bb,MAAM,CAACc,KAAK,CAACD,OAAO,CAAC;EACvB,CAAC,CAAC;AACJ"}