{"version":3,"file":"gatsby-node.js","names":["fs","require","apiRunnerNode","exports","onPreBootstrap","store","parentSpan","directory","browserslist","getState","program","directoryPath","withBasePath","stage","babelState","JSON","stringify","babelrc","writeFile"],"sources":["../../../src/internal-plugins/load-babel-config/gatsby-node.js"],"sourcesContent":["/* @flow */\n\nconst fs = require(`fs-extra`)\n\nconst apiRunnerNode = require(`../../utils/api-runner-node`)\nimport { withBasePath } from \"../../utils/path\"\n\nexports.onPreBootstrap = async ({ store, parentSpan }) => {\n  const { directory, browserslist } = store.getState().program\n  const directoryPath = withBasePath(directory)\n\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop-html`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-javascript`,\n    parentSpan,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-html`,\n    parentSpan,\n  })\n\n  const babelState = JSON.stringify(\n    {\n      ...store.getState().babelrc,\n      browserslist,\n    },\n    null,\n    2\n  )\n\n  await fs.writeFile(directoryPath(`.cache/babelState.json`), babelState)\n}\n"],"mappings":";;AAKA;AAHA,MAAMA,EAAE,GAAGC,OAAO,CAAE,UAAS,CAAC;AAE9B,MAAMC,aAAa,GAAGD,OAAO,CAAE,6BAA4B,CAAC;AAG5DE,OAAO,CAACC,cAAc,GAAG,OAAO;EAAEC,KAAK;EAAEC;AAAW,CAAC,KAAK;EACxD,MAAM;IAAEC,SAAS;IAAEC;EAAa,CAAC,GAAGH,KAAK,CAACI,QAAQ,EAAE,CAACC,OAAO;EAC5D,MAAMC,aAAa,GAAG,IAAAC,kBAAY,EAACL,SAAS,CAAC;EAE7C,MAAML,aAAa,CAAE,qBAAoB,EAAE;IACzCW,KAAK,EAAG,SAAQ;IAChBP;EACF,CAAC,CAAC;EACF,MAAMJ,aAAa,CAAE,qBAAoB,EAAE;IACzCW,KAAK,EAAG,cAAa;IACrBP;EACF,CAAC,CAAC;EACF,MAAMJ,aAAa,CAAE,qBAAoB,EAAE;IACzCW,KAAK,EAAG,kBAAiB;IACzBP;EACF,CAAC,CAAC;EACF,MAAMJ,aAAa,CAAE,qBAAoB,EAAE;IACzCW,KAAK,EAAG,YAAW;IACnBP;EACF,CAAC,CAAC;EAEF,MAAMQ,UAAU,GAAGC,IAAI,CAACC,SAAS,CAC/B;IACE,GAAGX,KAAK,CAACI,QAAQ,EAAE,CAACQ,OAAO;IAC3BT;EACF,CAAC,EACD,IAAI,EACJ,CAAC,CACF;EAED,MAAMR,EAAE,CAACkB,SAAS,CAACP,aAAa,CAAE,wBAAuB,CAAC,EAAEG,UAAU,CAAC;AACzE,CAAC"}