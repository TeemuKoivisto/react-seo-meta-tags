{"version":3,"file":"babel-module-exports-helpers.js","names":["hasSibling","path","getAllPrevSiblings","getAllNextSiblings","length","removeExportProperties","exportPath","objectPath","propertiesToRemove","i","node","properties","property","type","value","includes","name","propertyPath","get","removed","remove","parentPath"],"sources":["../../../src/utils/babel/babel-module-exports-helpers.ts"],"sourcesContent":["import { ExportNamedDeclaration, ObjectPattern } from \"@babel/types\"\nimport { NodePath } from \"@babel/core\"\n\n/**\n * Check the node has at least one sibling.\n */\nexport function hasSibling(path: NodePath): boolean {\n  return (\n    [...path.getAllPrevSiblings(), ...path.getAllNextSiblings()].length !== 0\n  )\n}\n\n/**\n * Remove specific properties from a destructured variable named export.\n *\n * If there are no other properties or declarations, the entire export declaration will be removed.\n * If there are other properties, only the matching properties will be removed.\n *\n * Matches exports like these:\n * ```\n * export const { foo } = {} // or `let`/`var`\n * export const { foo, bar: baz } = {} // or `let`/`var`\n * ```\n *\n * This is cheaper than using a nested visitor and traversing upwards to check distance\n * from the export declaration.\n */\nexport function removeExportProperties(\n  exportPath: NodePath<ExportNamedDeclaration>,\n  objectPath: NodePath<ObjectPattern>,\n  propertiesToRemove: Array<string>\n): void {\n  for (let i = 0; i < objectPath.node.properties.length; i++) {\n    const property = objectPath.node.properties[i]\n\n    if (\n      property.type !== `ObjectProperty` ||\n      property.value.type !== `Identifier` ||\n      !propertiesToRemove.includes(property.value.name)\n    ) {\n      continue\n    }\n\n    const propertyPath = objectPath.get(`properties.${i}`) as NodePath\n\n    if (hasSibling(propertyPath) && !propertyPath.removed) {\n      propertyPath.remove()\n      continue\n    }\n\n    if (hasSibling(objectPath.parentPath) && !objectPath.parentPath.removed) {\n      objectPath.parentPath.remove()\n      break\n    }\n\n    if (!exportPath.removed) {\n      exportPath.remove()\n    }\n  }\n}\n"],"mappings":";;;;;AAGA;AACA;AACA;AACO,SAASA,UAAU,CAACC,IAAc,EAAW;EAClD,OACE,CAAC,GAAGA,IAAI,CAACC,kBAAkB,EAAE,EAAE,GAAGD,IAAI,CAACE,kBAAkB,EAAE,CAAC,CAACC,MAAM,KAAK,CAAC;AAE7E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,sBAAsB,CACpCC,UAA4C,EAC5CC,UAAmC,EACnCC,kBAAiC,EAC3B;EACN,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,UAAU,CAACG,IAAI,CAACC,UAAU,CAACP,MAAM,EAAEK,CAAC,EAAE,EAAE;IAC1D,MAAMG,QAAQ,GAAGL,UAAU,CAACG,IAAI,CAACC,UAAU,CAACF,CAAC,CAAC;IAE9C,IACEG,QAAQ,CAACC,IAAI,KAAM,gBAAe,IAClCD,QAAQ,CAACE,KAAK,CAACD,IAAI,KAAM,YAAW,IACpC,CAACL,kBAAkB,CAACO,QAAQ,CAACH,QAAQ,CAACE,KAAK,CAACE,IAAI,CAAC,EACjD;MACA;IACF;IAEA,MAAMC,YAAY,GAAGV,UAAU,CAACW,GAAG,CAAE,cAAaT,CAAE,EAAC,CAAa;IAElE,IAAIT,UAAU,CAACiB,YAAY,CAAC,IAAI,CAACA,YAAY,CAACE,OAAO,EAAE;MACrDF,YAAY,CAACG,MAAM,EAAE;MACrB;IACF;IAEA,IAAIpB,UAAU,CAACO,UAAU,CAACc,UAAU,CAAC,IAAI,CAACd,UAAU,CAACc,UAAU,CAACF,OAAO,EAAE;MACvEZ,UAAU,CAACc,UAAU,CAACD,MAAM,EAAE;MAC9B;IACF;IAEA,IAAI,CAACd,UAAU,CAACa,OAAO,EAAE;MACvBb,UAAU,CAACc,MAAM,EAAE;IACrB;EACF;AACF"}