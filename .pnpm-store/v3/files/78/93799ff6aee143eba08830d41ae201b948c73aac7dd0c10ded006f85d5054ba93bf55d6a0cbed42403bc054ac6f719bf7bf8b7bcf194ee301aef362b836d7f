{"version":3,"file":"detect-port-in-use-and-prompt.js","names":["detectPortInUseAndPrompt","port","hostname","detectedPort","detectPort","catch","err","report","panic","log","response","prompts","type","name","message","initial","newPort","Error"],"sources":["../../src/utils/detect-port-in-use-and-prompt.ts"],"sourcesContent":["import detectPort from \"detect-port\"\nimport report from \"gatsby-cli/lib/reporter\"\nimport prompts from \"prompts\"\n\nexport const detectPortInUseAndPrompt = async (\n  port: number,\n  hostname?: string\n): Promise<number> => {\n  const detectedPort = await detectPort({ port, hostname }).catch(\n    (err: Error) => report.panic(err)\n  )\n  if (port !== detectedPort) {\n    report.log(`\\nSomething is already running at port ${port}`)\n    const response = await prompts({\n      type: `confirm`,\n      name: `newPort`,\n      message: `Would you like to run the app at another port instead?`,\n      initial: true,\n    })\n    if (response.newPort) {\n      port = detectedPort\n    } else {\n      throw new Error(`USER_REJECTED`)\n    }\n  }\n\n  return port\n}\n"],"mappings":";;;;;AAAA;AACA;AACA;AAEO,MAAMA,wBAAwB,GAAG,OACtCC,IAAY,EACZC,QAAiB,KACG;EACpB,MAAMC,YAAY,GAAG,MAAM,IAAAC,mBAAU,EAAC;IAAEH,IAAI;IAAEC;EAAS,CAAC,CAAC,CAACG,KAAK,CAC5DC,GAAU,IAAKC,iBAAM,CAACC,KAAK,CAACF,GAAG,CAAC,CAClC;EACD,IAAIL,IAAI,KAAKE,YAAY,EAAE;IACzBI,iBAAM,CAACE,GAAG,CAAE,0CAAyCR,IAAK,EAAC,CAAC;IAC5D,MAAMS,QAAQ,GAAG,MAAM,IAAAC,gBAAO,EAAC;MAC7BC,IAAI,EAAG,SAAQ;MACfC,IAAI,EAAG,SAAQ;MACfC,OAAO,EAAG,wDAAuD;MACjEC,OAAO,EAAE;IACX,CAAC,CAAC;IACF,IAAIL,QAAQ,CAACM,OAAO,EAAE;MACpBf,IAAI,GAAGE,YAAY;IACrB,CAAC,MAAM;MACL,MAAM,IAAIc,KAAK,CAAE,eAAc,CAAC;IAClC;EACF;EAEA,OAAOhB,IAAI;AACb,CAAC;AAAA"}