{"version":3,"file":"proxy.js","names":["thirdPartyProxyPath","partytownProxy","partytownProxiedURLs","proxy","req","URL","query","url","origin","filter","some","proxyReqPathResolver","pathname","search"],"sources":["../../../src/internal-plugins/partytown/proxy.ts"],"sourcesContent":["import proxy from \"express-http-proxy\"\nimport type { RequestHandler } from \"express\"\n\nexport const thirdPartyProxyPath = `/__third-party-proxy`\n\nexport function partytownProxy(\n  partytownProxiedURLs: Array<string>\n): RequestHandler {\n  return proxy(req => new URL(req.query.url as string).origin as string, {\n    filter: req => partytownProxiedURLs.some(url => req.query?.url === url),\n    proxyReqPathResolver: req => {\n      const { pathname = ``, search = `` } = new URL(req.query?.url as string)\n      return pathname + search\n    },\n  })\n}\n"],"mappings":";;;;;;AAAA;AAGO,MAAMA,mBAAmB,GAAI,sBAAqB;AAAA;AAElD,SAASC,cAAc,CAC5BC,oBAAmC,EACnB;EAChB,OAAO,IAAAC,yBAAK,EAACC,GAAG,IAAI,IAAIC,GAAG,CAACD,GAAG,CAACE,KAAK,CAACC,GAAG,CAAW,CAACC,MAAgB,EAAE;IACrEC,MAAM,EAAEL,GAAG,IAAIF,oBAAoB,CAACQ,IAAI,CAACH,GAAG;MAAA;MAAA,OAAI,eAAAH,GAAG,CAACE,KAAK,+CAAT,WAAWC,GAAG,MAAKA,GAAG;IAAA,EAAC;IACvEI,oBAAoB,EAAEP,GAAG,IAAI;MAAA;MAC3B,MAAM;QAAEQ,QAAQ,GAAI,EAAC;QAAEC,MAAM,GAAI;MAAE,CAAC,GAAG,IAAIR,GAAG,gBAACD,GAAG,CAACE,KAAK,gDAAT,YAAWC,GAAG,CAAW;MACxE,OAAOK,QAAQ,GAAGC,MAAM;IAC1B;EACF,CAAC,CAAC;AACJ"}