{"version":3,"file":"normalize.js","names":["normalizePlugin","plugin","resolve","options","plugins","normalizePlugins","map","normalizeConfig","config"],"sources":["../../../../src/bootstrap/load-plugins/utils/normalize.ts"],"sourcesContent":["import { ISiteConfig, IRawSiteConfig } from \"../types\"\nimport { IPluginRefObject, PluginRef } from \"gatsby-plugin-utils/dist/types\"\n\nexport function normalizePlugin(\n  plugin: IPluginRefObject | string\n): IPluginRefObject {\n  if (typeof plugin === `string`) {\n    return {\n      resolve: plugin,\n      options: {},\n    }\n  }\n\n  if (plugin.options?.plugins) {\n    plugin.options = {\n      ...plugin.options,\n      plugins: normalizePlugins(plugin.options.plugins),\n    }\n  }\n\n  return plugin\n}\n\nexport function normalizePlugins(\n  plugins?: Array<PluginRef>\n): Array<IPluginRefObject> {\n  return (plugins || []).map(normalizePlugin)\n}\n\nexport const normalizeConfig = (config: IRawSiteConfig = {}): ISiteConfig => {\n  return {\n    ...config,\n    plugins: (config.plugins || []).map(normalizePlugin),\n  }\n}\n"],"mappings":";;;;;;AAGO,SAASA,eAAe,CAC7BC,MAAiC,EACf;EAAA;EAClB,IAAI,OAAOA,MAAM,KAAM,QAAO,EAAE;IAC9B,OAAO;MACLC,OAAO,EAAED,MAAM;MACfE,OAAO,EAAE,CAAC;IACZ,CAAC;EACH;EAEA,uBAAIF,MAAM,CAACE,OAAO,4CAAd,gBAAgBC,OAAO,EAAE;IAC3BH,MAAM,CAACE,OAAO,GAAG;MACf,GAAGF,MAAM,CAACE,OAAO;MACjBC,OAAO,EAAEC,gBAAgB,CAACJ,MAAM,CAACE,OAAO,CAACC,OAAO;IAClD,CAAC;EACH;EAEA,OAAOH,MAAM;AACf;AAEO,SAASI,gBAAgB,CAC9BD,OAA0B,EACD;EACzB,OAAO,CAACA,OAAO,IAAI,EAAE,EAAEE,GAAG,CAACN,eAAe,CAAC;AAC7C;AAEO,MAAMO,eAAe,GAAG,CAACC,MAAsB,GAAG,CAAC,CAAC,KAAkB;EAC3E,OAAO;IACL,GAAGA,MAAM;IACTJ,OAAO,EAAE,CAACI,MAAM,CAACJ,OAAO,IAAI,EAAE,EAAEE,GAAG,CAACN,eAAe;EACrD,CAAC;AACH,CAAC;AAAA"}