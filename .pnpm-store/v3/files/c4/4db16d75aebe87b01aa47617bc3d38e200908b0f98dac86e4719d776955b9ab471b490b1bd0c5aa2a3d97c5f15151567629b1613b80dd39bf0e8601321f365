{"version":3,"file":"develop-static.js","names":["developStatic","root","options","expressStatic","express","static","req","res","next","includes","method","path","parseUrl","pathname","parsedPath","sysPath","parse","ext"],"sources":["../../src/commands/develop-static.ts"],"sourcesContent":["import sysPath from \"path\"\nimport express from \"express\"\nimport { ServeStaticOptions } from \"serve-static\"\nimport parseUrl from \"parseurl\"\n\nexport function developStatic(\n  root: string,\n  options: ServeStaticOptions\n): express.Handler {\n  const expressStatic = express.static(root, options)\n\n  return function (\n    req: express.Request,\n    res: express.Response,\n    next: express.NextFunction\n  ): typeof expressStatic | void {\n    if ([`GET`, `HEAD`].includes(req.method)) {\n      const path = parseUrl(req).pathname\n      const parsedPath = sysPath.parse(path)\n      if ([`.htm`, `.html`].includes(parsedPath.ext)) {\n        return next()\n      }\n    }\n\n    return expressStatic(req, res, next)\n  }\n}\n"],"mappings":";;;;;AAAA;AACA;AAEA;AAEO,SAASA,aAAa,CAC3BC,IAAY,EACZC,OAA2B,EACV;EACjB,MAAMC,aAAa,GAAGC,gBAAO,CAACC,MAAM,CAACJ,IAAI,EAAEC,OAAO,CAAC;EAEnD,OAAO,UACLI,GAAoB,EACpBC,GAAqB,EACrBC,IAA0B,EACG;IAC7B,IAAI,CAAE,KAAI,EAAG,MAAK,CAAC,CAACC,QAAQ,CAACH,GAAG,CAACI,MAAM,CAAC,EAAE;MACxC,MAAMC,IAAI,GAAG,IAAAC,iBAAQ,EAACN,GAAG,CAAC,CAACO,QAAQ;MACnC,MAAMC,UAAU,GAAGC,aAAO,CAACC,KAAK,CAACL,IAAI,CAAC;MACtC,IAAI,CAAE,MAAK,EAAG,OAAM,CAAC,CAACF,QAAQ,CAACK,UAAU,CAACG,GAAG,CAAC,EAAE;QAC9C,OAAOT,IAAI,EAAE;MACf;IACF;IAEA,OAAOL,aAAa,CAACG,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC;EACtC,CAAC;AACH"}