{"version":3,"file":"gatsby-node.js","names":["path","require","exports","onCreateBabelConfig","actions","setBabelPlugin","name","onCreateWebpackConfig","stage","objectAssignStub","join","__dirname","noOp","fetchStub","whatwgFetchStub","alias","unfetch$","setWebpackConfig","resolve"],"sources":["../../../src/internal-plugins/bundle-optimisations/gatsby-node.js"],"sourcesContent":["const path = require(`path`)\n\nexports.onCreateBabelConfig = ({ actions }) => {\n  // rewrites import { get }from 'lodash' into import get from 'lodash/get';\n  actions.setBabelPlugin({\n    name: `babel-plugin-lodash`,\n  })\n}\n\nexports.onCreateWebpackConfig = function onCreateWebpackConfig({\n  stage,\n  actions,\n}) {\n  const objectAssignStub = path.join(__dirname, `polyfills/object-assign.js`)\n  const noOp = path.join(__dirname, `polyfills/no-op.js`)\n  const fetchStub = path.join(__dirname, `polyfills/fetch.js`)\n  const whatwgFetchStub = path.join(__dirname, `polyfills/whatwg-fetch.js`)\n\n  const alias = {\n    // These files are already polyfilled so these should return in a no-op\n    // Stub Package: object.assign & object-assign\n    \"object.assign\": objectAssignStub,\n    \"object-assign$\": objectAssignStub,\n    \"@babel/runtime/helpers/extends.js$\": objectAssignStub,\n    // Stub package: fetch\n    unfetch$: fetchStub,\n    \"unfetch/polyfill$\": noOp,\n    \"isomorphic-unfetch$\": fetchStub,\n    \"isomorphic-fetch$\": fetchStub,\n    \"whatwg-fetch$\": whatwgFetchStub,\n  }\n\n  if (stage === `build-javascript` || stage === `develop`) {\n    alias[`url-polyfill$`] = noOp\n  }\n\n  actions.setWebpackConfig({\n    resolve: {\n      alias,\n    },\n  })\n}\n"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAE,MAAK,CAAC;AAE5BC,OAAO,CAACC,mBAAmB,GAAG,CAAC;EAAEC;AAAQ,CAAC,KAAK;EAC7C;EACAA,OAAO,CAACC,cAAc,CAAC;IACrBC,IAAI,EAAG;EACT,CAAC,CAAC;AACJ,CAAC;AAEDJ,OAAO,CAACK,qBAAqB,GAAG,SAASA,qBAAqB,CAAC;EAC7DC,KAAK;EACLJ;AACF,CAAC,EAAE;EACD,MAAMK,gBAAgB,GAAGT,IAAI,CAACU,IAAI,CAACC,SAAS,EAAG,4BAA2B,CAAC;EAC3E,MAAMC,IAAI,GAAGZ,IAAI,CAACU,IAAI,CAACC,SAAS,EAAG,oBAAmB,CAAC;EACvD,MAAME,SAAS,GAAGb,IAAI,CAACU,IAAI,CAACC,SAAS,EAAG,oBAAmB,CAAC;EAC5D,MAAMG,eAAe,GAAGd,IAAI,CAACU,IAAI,CAACC,SAAS,EAAG,2BAA0B,CAAC;EAEzE,MAAMI,KAAK,GAAG;IACZ;IACA;IACA,eAAe,EAAEN,gBAAgB;IACjC,gBAAgB,EAAEA,gBAAgB;IAClC,oCAAoC,EAAEA,gBAAgB;IACtD;IACAO,QAAQ,EAAEH,SAAS;IACnB,mBAAmB,EAAED,IAAI;IACzB,qBAAqB,EAAEC,SAAS;IAChC,mBAAmB,EAAEA,SAAS;IAC9B,eAAe,EAAEC;EACnB,CAAC;EAED,IAAIN,KAAK,KAAM,kBAAiB,IAAIA,KAAK,KAAM,SAAQ,EAAE;IACvDO,KAAK,CAAE,eAAc,CAAC,GAAGH,IAAI;EAC/B;EAEAR,OAAO,CAACa,gBAAgB,CAAC;IACvBC,OAAO,EAAE;MACPH;IACF;EACF,CAAC,CAAC;AACJ,CAAC"}