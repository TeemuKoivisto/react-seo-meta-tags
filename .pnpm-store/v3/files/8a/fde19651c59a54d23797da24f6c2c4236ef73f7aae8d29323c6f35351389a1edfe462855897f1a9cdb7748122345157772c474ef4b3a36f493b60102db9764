{"version":3,"file":"schema-customization.js","names":["initialState","composer","context","fieldExtensions","printConfig","thirdPartySchemas","types","schemaCustomizationReducer","state","action","type","payload","Array","isArray","map","typeOrTypeDef","plugin","extension","name","path","include","exclude","withFieldTypes"],"sources":["../../../src/redux/reducers/schema-customization.ts"],"sourcesContent":["import { IGatsbyState, ActionsUnion } from \"../types\"\n\nconst initialState = (): IGatsbyState[\"schemaCustomization\"] => {\n  return {\n    composer: null,\n    context: {},\n    fieldExtensions: {},\n    printConfig: null,\n    thirdPartySchemas: [],\n    types: [],\n  }\n}\n\nexport const schemaCustomizationReducer = (\n  state: IGatsbyState[\"schemaCustomization\"] = initialState(),\n  action: ActionsUnion\n): IGatsbyState[\"schemaCustomization\"] => {\n  switch (action.type) {\n    case `ADD_THIRD_PARTY_SCHEMA`:\n      return {\n        ...state,\n        thirdPartySchemas: [...state.thirdPartySchemas, action.payload],\n      }\n    case `SET_SCHEMA_COMPOSER`:\n      return {\n        ...state,\n        composer: action.payload,\n      }\n    case `CREATE_TYPES`: {\n      let types: IGatsbyState[\"schemaCustomization\"][\"types\"]\n      if (Array.isArray(action.payload)) {\n        types = [\n          ...state.types,\n          ...action.payload.map(typeOrTypeDef => {\n            return {\n              typeOrTypeDef,\n              plugin: action.plugin,\n            }\n          }),\n        ]\n      } else {\n        types = [\n          ...state.types,\n          { typeOrTypeDef: action.payload, plugin: action.plugin },\n        ]\n      }\n      return {\n        ...state,\n        types,\n      }\n    }\n    case `CREATE_FIELD_EXTENSION`: {\n      const { extension, name } = action.payload\n      return {\n        ...state,\n        fieldExtensions: { ...state.fieldExtensions, [name]: extension },\n      }\n    }\n    case `PRINT_SCHEMA_REQUESTED`: {\n      const { path, include, exclude, withFieldTypes } = action.payload\n      return {\n        ...state,\n        printConfig: {\n          path,\n          include,\n          exclude,\n          withFieldTypes,\n        },\n      }\n    }\n    case `CREATE_RESOLVER_CONTEXT`: {\n      const context = action.payload\n      return {\n        ...state,\n        context: { ...state.context, ...context },\n      }\n    }\n    case `CLEAR_SCHEMA_CUSTOMIZATION`:\n      return {\n        ...initialState(),\n        composer: state.composer,\n      }\n    case `DELETE_CACHE`:\n      return initialState()\n    default:\n      return state\n  }\n}\n"],"mappings":";;;;AAEA,MAAMA,YAAY,GAAG,MAA2C;EAC9D,OAAO;IACLC,QAAQ,EAAE,IAAI;IACdC,OAAO,EAAE,CAAC,CAAC;IACXC,eAAe,EAAE,CAAC,CAAC;IACnBC,WAAW,EAAE,IAAI;IACjBC,iBAAiB,EAAE,EAAE;IACrBC,KAAK,EAAE;EACT,CAAC;AACH,CAAC;AAEM,MAAMC,0BAA0B,GAAG,CACxCC,KAA0C,GAAGR,YAAY,EAAE,EAC3DS,MAAoB,KACoB;EACxC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAM,wBAAuB;MAC3B,OAAO;QACL,GAAGF,KAAK;QACRH,iBAAiB,EAAE,CAAC,GAAGG,KAAK,CAACH,iBAAiB,EAAEI,MAAM,CAACE,OAAO;MAChE,CAAC;IACH,KAAM,qBAAoB;MACxB,OAAO;QACL,GAAGH,KAAK;QACRP,QAAQ,EAAEQ,MAAM,CAACE;MACnB,CAAC;IACH,KAAM,cAAa;MAAE;QACnB,IAAIL,KAAmD;QACvD,IAAIM,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACE,OAAO,CAAC,EAAE;UACjCL,KAAK,GAAG,CACN,GAAGE,KAAK,CAACF,KAAK,EACd,GAAGG,MAAM,CAACE,OAAO,CAACG,GAAG,CAACC,aAAa,IAAI;YACrC,OAAO;cACLA,aAAa;cACbC,MAAM,EAAEP,MAAM,CAACO;YACjB,CAAC;UACH,CAAC,CAAC,CACH;QACH,CAAC,MAAM;UACLV,KAAK,GAAG,CACN,GAAGE,KAAK,CAACF,KAAK,EACd;YAAES,aAAa,EAAEN,MAAM,CAACE,OAAO;YAAEK,MAAM,EAAEP,MAAM,CAACO;UAAO,CAAC,CACzD;QACH;QACA,OAAO;UACL,GAAGR,KAAK;UACRF;QACF,CAAC;MACH;IACA,KAAM,wBAAuB;MAAE;QAC7B,MAAM;UAAEW,SAAS;UAAEC;QAAK,CAAC,GAAGT,MAAM,CAACE,OAAO;QAC1C,OAAO;UACL,GAAGH,KAAK;UACRL,eAAe,EAAE;YAAE,GAAGK,KAAK,CAACL,eAAe;YAAE,CAACe,IAAI,GAAGD;UAAU;QACjE,CAAC;MACH;IACA,KAAM,wBAAuB;MAAE;QAC7B,MAAM;UAAEE,IAAI;UAAEC,OAAO;UAAEC,OAAO;UAAEC;QAAe,CAAC,GAAGb,MAAM,CAACE,OAAO;QACjE,OAAO;UACL,GAAGH,KAAK;UACRJ,WAAW,EAAE;YACXe,IAAI;YACJC,OAAO;YACPC,OAAO;YACPC;UACF;QACF,CAAC;MACH;IACA,KAAM,yBAAwB;MAAE;QAC9B,MAAMpB,OAAO,GAAGO,MAAM,CAACE,OAAO;QAC9B,OAAO;UACL,GAAGH,KAAK;UACRN,OAAO,EAAE;YAAE,GAAGM,KAAK,CAACN,OAAO;YAAE,GAAGA;UAAQ;QAC1C,CAAC;MACH;IACA,KAAM,4BAA2B;MAC/B,OAAO;QACL,GAAGF,YAAY,EAAE;QACjBC,QAAQ,EAAEO,KAAK,CAACP;MAClB,CAAC;IACH,KAAM,cAAa;MACjB,OAAOD,YAAY,EAAE;IACvB;MACE,OAAOQ,KAAK;EAAA;AAElB,CAAC;AAAA"}